!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=pe.type(e);return"function"!==n&&!pe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(pe.isFunction(t))return pe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return pe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ce.test(t))return pe.filter(t,e,n);t=pe.filter(t,e)}return pe.grep(e,function(e){return pe.inArray(e,t)>-1!==n})}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function a(e){var t={};return pe.each(e.match(Se)||[],function(e,n){t[n]=!0}),t}function r(){ie.addEventListener?(ie.removeEventListener("DOMContentLoaded",l),e.removeEventListener("load",l)):(ie.detachEvent("onreadystatechange",l),e.detachEvent("onload",l))}function l(){(ie.addEventListener||"load"===e.event.type||"complete"===ie.readyState)&&(r(),pe.ready())}function s(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(je,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Re.test(n)?pe.parseJSON(n):n)}catch(o){}pe.data(e,t,n)}else n=void 0}return n}function d(e){var t;for(t in e)if(("data"!==t||!pe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,i){if(Pe(e)){var o,a,r=pe.expando,l=e.nodeType,s=l?pe.cache:e,d=l?e[r]:e[r]&&r;if(d&&s[d]&&(i||s[d].data)||void 0!==n||"string"!=typeof t)return d||(d=l?e[r]=ne.pop()||pe.guid++:r),s[d]||(s[d]=l?{}:{toJSON:pe.noop}),"object"!=typeof t&&"function"!=typeof t||(i?s[d]=pe.extend(s[d],t):s[d].data=pe.extend(s[d].data,t)),a=s[d],i||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[pe.camelCase(t)]=n),"string"==typeof t?(o=a[t],null==o&&(o=a[pe.camelCase(t)])):o=a,o}}function u(e,t,n){if(Pe(e)){var i,o,a=e.nodeType,r=a?pe.cache:e,l=a?e[pe.expando]:pe.expando;if(r[l]){if(t&&(i=n?r[l]:r[l].data)){pe.isArray(t)?t=t.concat(pe.map(t,pe.camelCase)):t in i?t=[t]:(t=pe.camelCase(t),t=t in i?[t]:t.split(" ")),o=t.length;for(;o--;)delete i[t[o]];if(n?!d(i):!pe.isEmptyObject(i))return}(n||(delete r[l].data,d(r[l])))&&(a?pe.cleanData([e],!0):ue.deleteExpando||r!=r.window?delete r[l]:r[l]=void 0)}}}function h(e,t,n,i){var o,a=1,r=20,l=i?function(){return i.cur()}:function(){return pe.css(e,t,"")},s=l(),d=n&&n[3]||(pe.cssNumber[t]?"":"px"),c=(pe.cssNumber[t]||"px"!==d&&+s)&&Oe.exec(pe.css(e,t));if(c&&c[3]!==d){d=d||c[3],n=n||[],c=+s||1;do a=a||".5",c/=a,pe.style(e,t,c+d);while(a!==(a=l()/s)&&1!==a&&--r)}return n&&(c=+c||+s||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=d,i.start=c,i.end=o)),o}function p(e){var t=Qe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){var n,i,o=0,a="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(i=n[o]);o++)!t||pe.nodeName(i,t)?a.push(i):pe.merge(a,f(i,t));return void 0===t||t&&pe.nodeName(e,t)?pe.merge([e],a):a}function g(e,t){for(var n,i=0;null!=(n=e[i]);i++)pe._data(n,"globalEval",!t||pe._data(t[i],"globalEval"))}function m(e){qe.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t,n,i,o){for(var a,r,l,s,d,c,u,h=e.length,v=p(t),y=[],x=0;x<h;x++)if(r=e[x],r||0===r)if("object"===pe.type(r))pe.merge(y,r.nodeType?[r]:r);else if(Ge.test(r)){for(s=s||v.appendChild(t.createElement("div")),d=(He.exec(r)||["",""])[1].toLowerCase(),u=Be[d]||Be._default,s.innerHTML=u[1]+pe.htmlPrefilter(r)+u[2],a=u[0];a--;)s=s.lastChild;if(!ue.leadingWhitespace&&Fe.test(r)&&y.push(t.createTextNode(Fe.exec(r)[0])),!ue.tbody)for(r="table"!==d||We.test(r)?"<table>"!==u[1]||We.test(r)?0:s:s.firstChild,a=r&&r.childNodes.length;a--;)pe.nodeName(c=r.childNodes[a],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(pe.merge(y,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=v.lastChild}else y.push(t.createTextNode(r));for(s&&v.removeChild(s),ue.appendChecked||pe.grep(f(y,"input"),m),x=0;r=y[x++];)if(i&&pe.inArray(r,i)>-1)o&&o.push(r);else if(l=pe.contains(r.ownerDocument,r),s=f(v.appendChild(r),"script"),l&&g(s),n)for(a=0;r=s[a++];)Ke.test(r.type||"")&&n.push(r);return s=null,v}function y(){return!0}function x(){return!1}function b(){try{return ie.activeElement}catch(e){}}function w(e,t,n,i,o,a){var r,l;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(l in t)w(e,l,n,i,t[l],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),o===!1)o=x;else if(!o)return e;return 1===a&&(r=o,o=function(e){return pe().off(e),r.apply(this,arguments)},o.guid=r.guid||(r.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,o,i,n)})}function k(e,t){return pe.nodeName(e,"table")&&pe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function C(e){return e.type=(null!==pe.find.attr(e,"type"))+"/"+e.type,e}function T(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function N(e,t){if(1===t.nodeType&&pe.hasData(e)){var n,i,o,a=pe._data(e),r=pe._data(t,a),l=a.events;if(l){delete r.handle,r.events={};for(n in l)for(i=0,o=l[n].length;i<o;i++)pe.event.add(t,n,l[n][i])}r.data&&(r.data=pe.extend({},r.data))}}function I(e,t){var n,i,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ue.noCloneEvent&&t[pe.expando]){o=pe._data(t);for(i in o.events)pe.removeEvent(t,i,o.handle);t.removeAttribute(pe.expando)}"script"===n&&t.text!==e.text?(C(t).text=e.text,T(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ue.html5Clone&&e.innerHTML&&!pe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&qe.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function _(e,t,n,i){t=ae.apply([],t);var o,a,r,l,s,d,c=0,u=e.length,h=u-1,p=t[0],g=pe.isFunction(p);if(g||u>1&&"string"==typeof p&&!ue.checkClone&&it.test(p))return e.each(function(o){var a=e.eq(o);g&&(t[0]=p.call(this,o,a.html())),_(a,t,n,i)});if(u&&(d=v(t,e[0].ownerDocument,!1,e,i),o=d.firstChild,1===d.childNodes.length&&(d=o),o||i)){for(l=pe.map(f(d,"script"),C),r=l.length;c<u;c++)a=d,c!==h&&(a=pe.clone(a,!0,!0),r&&pe.merge(l,f(a,"script"))),n.call(e[c],a,c);if(r)for(s=l[l.length-1].ownerDocument,pe.map(l,T),c=0;c<r;c++)a=l[c],Ke.test(a.type||"")&&!pe._data(a,"globalEval")&&pe.contains(s,a)&&(a.src?pe._evalUrl&&pe._evalUrl(a.src):pe.globalEval((a.text||a.textContent||a.innerHTML||"").replace(at,"")));d=o=null}return e}function E(e,t,n){for(var i,o=t?pe.filter(t,e):e,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||pe.cleanData(f(i)),i.parentNode&&(n&&pe.contains(i.ownerDocument,i)&&g(f(i,"script")),i.parentNode.removeChild(i));return e}function S(e,t){var n=pe(t.createElement(e)).appendTo(t.body),i=pe.css(n[0],"display");return n.detach(),i}function $(e){var t=ie,n=dt[e];return n||(n=S(e,t),"none"!==n&&n||(st=(st||pe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(st[0].contentWindow||st[0].contentDocument).document,t.write(),t.close(),n=S(e,t),st.detach()),dt[e]=n),n}function D(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in Tt)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Ct.length;n--;)if(e=Ct[n]+t,e in Tt)return e}function R(e,t){for(var n,i,o,a=[],r=0,l=e.length;r<l;r++)i=e[r],i.style&&(a[r]=pe._data(i,"olddisplay"),n=i.style.display,t?(a[r]||"none"!==n||(i.style.display=""),""===i.style.display&&Me(i)&&(a[r]=pe._data(i,"olddisplay",$(i.nodeName)))):(o=Me(i),(n&&"none"!==n||!o)&&pe._data(i,"olddisplay",o?n:pe.css(i,"display"))));for(r=0;r<l;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[r]||"":"none"));return e}function j(e,t,n){var i=bt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function A(e,t,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,r=0;a<4;a+=2)"margin"===n&&(r+=pe.css(e,n+Le[a],!0,o)),i?("content"===n&&(r-=pe.css(e,"padding"+Le[a],!0,o)),"margin"!==n&&(r-=pe.css(e,"border"+Le[a]+"Width",!0,o))):(r+=pe.css(e,"padding"+Le[a],!0,o),"padding"!==n&&(r+=pe.css(e,"border"+Le[a]+"Width",!0,o)));return r}function O(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=ft(e),r=ue.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,a);if(o<=0||null==o){if(o=gt(e,t,a),(o<0||null==o)&&(o=e.style[t]),ut.test(o))return o;i=r&&(ue.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+A(e,t,n||(r?"border":"content"),i,a)+"px"}function L(e,t,n,i,o){return new L.prototype.init(e,t,n,i,o)}function M(){return e.setTimeout(function(){Nt=void 0}),Nt=pe.now()}function z(e,t){var n,i={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)n=Le[o],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function q(e,t,n){for(var i,o=(F.tweeners[t]||[]).concat(F.tweeners["*"]),a=0,r=o.length;a<r;a++)if(i=o[a].call(n,t,e))return i}function H(e,t,n){var i,o,a,r,l,s,d,c,u=this,h={},p=e.style,f=e.nodeType&&Me(e),g=pe._data(e,"fxshow");n.queue||(l=pe._queueHooks(e,"fx"),null==l.unqueued&&(l.unqueued=0,s=l.empty.fire,l.empty.fire=function(){l.unqueued||s()}),l.unqueued++,u.always(function(){u.always(function(){l.unqueued--,pe.queue(e,"fx").length||l.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],d=pe.css(e,"display"),c="none"===d?pe._data(e,"olddisplay")||$(e.nodeName):d,"inline"===c&&"none"===pe.css(e,"float")&&(ue.inlineBlockNeedsLayout&&"inline"!==$(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ue.shrinkWrapBlocks()||u.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],_t.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;f=!0}h[i]=g&&g[i]||pe.style(e,i)}else d=void 0;if(pe.isEmptyObject(h))"inline"===("none"===d?$(e.nodeName):d)&&(p.display=d);else{g?"hidden"in g&&(f=g.hidden):g=pe._data(e,"fxshow",{}),a&&(g.hidden=!f),f?pe(e).show():u.done(function(){pe(e).hide()}),u.done(function(){var t;pe._removeData(e,"fxshow");for(t in h)pe.style(e,t,h[t])});for(i in h)r=q(f?g[i]:0,i,u),i in g||(g[i]=r.start,f&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}}function K(e,t){var n,i,o,a,r;for(n in e)if(i=pe.camelCase(n),o=t[i],a=e[n],pe.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),r=pe.cssHooks[i],r&&"expand"in r){a=r.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=o)}else t[i]=o}function F(e,t,n){var i,o,a=0,r=F.prefilters.length,l=pe.Deferred().always(function(){delete s.elem}),s=function(){if(o)return!1;for(var t=Nt||M(),n=Math.max(0,d.startTime+d.duration-t),i=n/d.duration||0,a=1-i,r=0,s=d.tweens.length;r<s;r++)d.tweens[r].run(a);return l.notifyWith(e,[d,a,n]),a<1&&s?n:(l.resolveWith(e,[d]),!1)},d=l.promise({elem:e,props:pe.extend({},t),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:Nt||M(),duration:n.duration,tweens:[],createTween:function(t,n){var i=pe.Tween(e,d.opts,t,n,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(i),i},stop:function(t){var n=0,i=t?d.tweens.length:0;if(o)return this;for(o=!0;n<i;n++)d.tweens[n].run(1);return t?(l.notifyWith(e,[d,1,0]),l.resolveWith(e,[d,t])):l.rejectWith(e,[d,t]),this}}),c=d.props;for(K(c,d.opts.specialEasing);a<r;a++)if(i=F.prefilters[a].call(d,e,c,d.opts))return pe.isFunction(i.stop)&&(pe._queueHooks(d.elem,d.opts.queue).stop=pe.proxy(i.stop,i)),i;return pe.map(c,q,d),pe.isFunction(d.opts.start)&&d.opts.start.call(e,d),pe.fx.timer(pe.extend(s,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function Q(e){return pe.attr(e,"class")||""}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,a=t.toLowerCase().match(Se)||[];if(pe.isFunction(n))for(;i=a[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function G(e,t,n,i){function o(l){var s;return a[l]=!0,pe.each(e[l]||[],function(e,l){var d=l(t,n,i);return"string"!=typeof d||r||a[d]?r?!(s=d):void 0:(t.dataTypes.unshift(d),o(d),!1)}),s}var a={},r=e===Jt;return o(t.dataTypes[0])||!a["*"]&&o("*")}function W(e,t){var n,i,o=pe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&pe.extend(!0,e,n),e}function V(e,t,n){for(var i,o,a,r,l=e.contents,s=e.dataTypes;"*"===s[0];)s.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){s.unshift(r);break}if(s[0]in n)a=s[0];else{for(r in n){if(!s[0]||e.converters[r+" "+s[0]]){a=r;break}i||(i=r)}a=a||i}if(a)return a!==s[0]&&s.unshift(a),n[a]}function U(e,t,n,i){var o,a,r,l,s,d={},c=e.dataTypes.slice();if(c[1])for(r in e.converters)d[r.toLowerCase()]=e.converters[r];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!s&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s=a,a=c.shift())if("*"===a)a=s;else if("*"!==s&&s!==a){if(r=d[s+" "+a]||d["* "+a],!r)for(o in d)if(l=o.split(" "),l[1]===a&&(r=d[s+" "+l[0]]||d["* "+l[0]])){r===!0?r=d[o]:d[o]!==!0&&(a=l[0],c.unshift(l[1]));break}if(r!==!0)if(r&&e["throws"])t=r(t);else try{t=r(t)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+s+" to "+a}}}return{state:"success",data:t}}function Y(e){return e.style&&e.style.display||pe.css(e,"display")}function X(e){if(!pe.contains(e.ownerDocument||ie,e))return!0;for(;e&&1===e.nodeType;){if("none"===Y(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function J(e,t,n,i){var o;if(pe.isArray(t))pe.each(t,function(t,o){n||on.test(e)?i(e,o):J(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==pe.type(t))i(e,t);else for(o in t)J(e+"["+o+"]",t[o],n,i)}function Z(){try{return new e.XMLHttpRequest}catch(t){}}function ee(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function te(e){return pe.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ne=[],ie=e.document,oe=ne.slice,ae=ne.concat,re=ne.push,le=ne.indexOf,se={},de=se.toString,ce=se.hasOwnProperty,ue={},he="1.12.4",pe=function(e,t){return new pe.fn.init(e,t)},fe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,me=/-([\da-z])/gi,ve=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:he,constructor:pe,selector:"",length:0,toArray:function(){return oe.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:oe.call(this)},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return pe.each(this,e)},map:function(e){return this.pushStack(pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:re,sort:ne.sort,splice:ne.splice},pe.extend=pe.fn.extend=function(){var e,t,n,i,o,a,r=arguments[0]||{},l=1,s=arguments.length,d=!1;for("boolean"==typeof r&&(d=r,r=arguments[l]||{},l++),"object"==typeof r||pe.isFunction(r)||(r={}),l===s&&(r=this,l--);l<s;l++)if(null!=(o=arguments[l]))for(i in o)e=r[i],n=o[i],r!==n&&(d&&n&&(pe.isPlainObject(n)||(t=pe.isArray(n)))?(t?(t=!1,a=e&&pe.isArray(e)?e:[]):a=e&&pe.isPlainObject(e)?e:{},r[i]=pe.extend(d,a,n)):void 0!==n&&(r[i]=n));return r},pe.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isArray:Array.isArray||function(e){return"array"===pe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!pe.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==pe.type(e)||e.nodeType||pe.isWindow(e))return!1;try{if(e.constructor&&!ce.call(e,"constructor")&&!ce.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!ue.ownFirst)for(t in e)return ce.call(e,t);for(t in e);return void 0===t||ce.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?se[de.call(e)]||"object":typeof e},globalEval:function(t){t&&pe.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ge,"ms-").replace(me,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;o<i&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(fe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?pe.merge(i,"string"==typeof e?[e]:e):re.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(le)return le.call(t,e,n);for(i=t.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;i<n;)e[o++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[o++]=t[i++];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],a=0,r=e.length,l=!n;a<r;a++)i=!t(e[a],a),i!==l&&o.push(e[a]);return o},map:function(e,t,i){var o,a,r=0,l=[];if(n(e))for(o=e.length;r<o;r++)a=t(e[r],r,i),null!=a&&l.push(a);else for(r in e)a=t(e[r],r,i),null!=a&&l.push(a);return ae.apply([],l)},guid:1,proxy:function(e,t){var n,i,o;if("string"==typeof t&&(o=e[t],t=e,e=o),pe.isFunction(e))return n=oe.call(arguments,2),i=function(){return e.apply(t||this,n.concat(oe.call(arguments)))},i.guid=e.guid=e.guid||pe.guid++,i},now:function(){return+new Date},support:ue}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=ne[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var ye=function(e){function t(e,t,n,i){var o,a,r,l,s,d,u,p,f=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!i&&((t?t.ownerDocument||t:q)!==P&&D(t),t=t||P,j)){if(11!==g&&(d=ve.exec(e)))if(o=d[1]){if(9===g){if(!(r=t.getElementById(o)))return n;if(r.id===o)return n.push(r),n}else if(f&&(r=f.getElementById(o))&&M(t,r)&&r.id===o)return n.push(r),n}else{if(d[2])return J.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&!B[e+" "]&&(!A||!A.test(e))){if(1!==g)f=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(xe,"\\$&"):t.setAttribute("id",l=z),u=N(e),a=u.length,s=he.test(l)?"#"+l:"[id='"+l+"']";a--;)u[a]=s+" "+h(u[a]);p=u.join(","),f=ye.test(e)&&c(t.parentNode)||t}if(p)try{return J.apply(n,f.querySelectorAll(p)),n}catch(m){}finally{l===z&&t.removeAttribute("id")}}}return _(e.replace(le,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[z]=!0,e}function o(e){var t=P.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=n.length;i--;)k.attrHandle[n[i]]=t}function r(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function s(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function d(e){return i(function(t){return t=+t,i(function(n,i){for(var o,a=e([],n.length,t),r=a.length;r--;)n[o=a[r]]&&(n[o]=!(i[o]=n[o]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function u(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=K++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,a)}:function(t,n,r){var l,s,d,c=[H,a];if(r){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,r))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(d=t[z]||(t[z]={}),s=d[t.uniqueID]||(d[t.uniqueID]={}),(l=s[i])&&l[0]===H&&l[1]===a)return c[2]=l[2];if(s[i]=c,c[2]=e(t,n,r))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function g(e,n,i){for(var o=0,a=n.length;o<a;o++)t(e,n[o],i);return i}function m(e,t,n,i,o){for(var a,r=[],l=0,s=e.length,d=null!=t;l<s;l++)(a=e[l])&&(n&&!n(a,i,o)||(r.push(a),d&&t.push(l)));return r}function v(e,t,n,o,a,r){return o&&!o[z]&&(o=v(o)),a&&!a[z]&&(a=v(a,r)),i(function(i,r,l,s){var d,c,u,h=[],p=[],f=r.length,v=i||g(t||"*",l.nodeType?[l]:l,[]),y=!e||!i&&t?v:m(v,h,e,l,s),x=n?a||(i?e:f||o)?[]:r:y;if(n&&n(y,x,l,s),o)for(d=m(x,p),o(d,[],l,s),c=d.length;c--;)(u=d[c])&&(x[p[c]]=!(y[p[c]]=u));if(i){if(a||e){if(a){for(d=[],c=x.length;c--;)(u=x[c])&&d.push(y[c]=u);a(null,x=[],d,s)}for(c=x.length;c--;)(u=x[c])&&(d=a?ee(i,u):h[c])>-1&&(i[d]=!(r[d]=u))}}else x=m(x===r?x.splice(f,x.length):x),a?a(null,r,x,s):J.apply(r,x)})}function y(e){for(var t,n,i,o=e.length,a=k.relative[e[0].type],r=a||k.relative[" "],l=a?1:0,s=p(function(e){return e===t},r,!0),d=p(function(e){return ee(t,e)>-1},r,!0),c=[function(e,n,i){var o=!a&&(i||n!==E)||((t=n).nodeType?s(e,n,i):d(e,n,i));return t=null,o}];l<o;l++)if(n=k.relative[e[l].type])c=[p(f(c),n)];else{if(n=k.filter[e[l].type].apply(null,e[l].matches),n[z]){for(i=++l;i<o&&!k.relative[e[i].type];i++);return v(l>1&&f(c),l>1&&h(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(le,"$1"),n,l<i&&y(e.slice(l,i)),i<o&&y(e=e.slice(i)),i<o&&h(e))}c.push(n)}return f(c)}function x(e,n){var o=n.length>0,a=e.length>0,r=function(i,r,l,s,d){var c,u,h,p=0,f="0",g=i&&[],v=[],y=E,x=i||a&&k.find.TAG("*",d),b=H+=null==y?1:Math.random()||.1,w=x.length;for(d&&(E=r===P||r||d);f!==w&&null!=(c=x[f]);f++){if(a&&c){for(u=0,r||c.ownerDocument===P||(D(c),l=!j);h=e[u++];)if(h(c,r||P,l)){s.push(c);break}d&&(H=b)}o&&((c=!h&&c)&&p--,i&&g.push(c))}if(p+=f,o&&f!==p){for(u=0;h=n[u++];)h(g,v,r,l);if(i){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=Y.call(s));v=m(v)}J.apply(s,v),d&&!i&&v.length>0&&p+n.length>1&&t.uniqueSort(s)}return d&&(H=b,E=y),g};return o?i(r):r}var b,w,k,C,T,N,I,_,E,S,$,D,P,R,j,A,O,L,M,z="sizzle"+1*new Date,q=e.document,H=0,K=0,F=n(),Q=n(),B=n(),G=function(e,t){return e===t&&($=!0),0},W=1<<31,V={}.hasOwnProperty,U=[],Y=U.pop,X=U.push,J=U.push,Z=U.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",re=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),se=new RegExp("^"+ne+"*,"+ne+"*"),de=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(ae),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,xe=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ke=function(){D()};try{J.apply(U=Z.call(q.childNodes),q.childNodes),U[q.childNodes.length].nodeType}catch(Ce){J={apply:U.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:q;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,R=P.documentElement,j=!T(P),(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(P.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(P.getElementsByClassName),w.getById=o(function(e){return R.appendChild(e).id=z,!P.getElementsByName||!P.getElementsByName(z).length}),w.getById?(k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&j){var n=t.getElementById(e);return n?[n]:[]}},k.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},k.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&j)return t.getElementsByClassName(e)},O=[],A=[],(w.qsa=me.test(P.querySelectorAll))&&(o(function(e){R.appendChild(e).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&A.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||A.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+z+"-]").length||A.push("~="),e.querySelectorAll(":checked").length||A.push(":checked"),e.querySelectorAll("a#"+z+"+*").length||A.push(".#.+[+~]")}),o(function(e){var t=P.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&A.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||A.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),A.push(",.*:")})),(w.matchesSelector=me.test(L=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&o(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),O.push("!=",ae)}),A=A.length&&new RegExp(A.join("|")),O=O.length&&new RegExp(O.join("|")),t=me.test(R.compareDocumentPosition),M=t||me.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return $=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===P||e.ownerDocument===q&&M(q,e)?-1:t===P||t.ownerDocument===q&&M(q,t)?1:S?ee(S,e)-ee(S,t):0:4&n?-1:1)}:function(e,t){if(e===t)return $=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,l=[e],s=[t];if(!o||!a)return e===P?-1:t===P?1:o?-1:a?1:S?ee(S,e)-ee(S,t):0;if(o===a)return r(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;l[i]===s[i];)i++;return i?r(l[i],s[i]):l[i]===q?-1:s[i]===q?1:0},P):P},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==P&&D(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&j&&!B[n+" "]&&(!O||!O.test(n))&&(!A||!A.test(n)))try{var i=L.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&D(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&D(e);var n=k.attrHandle[t.toLowerCase()],i=n&&V.call(k.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==i?i:w.attributes||!j?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if($=!w.detectDuplicates,S=!w.sortStable&&e.slice(0),e.sort(G),$){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return S=null,e},C=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},k=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=N(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=F[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&F(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var a=t.attr(o,e);return null==a?"!="===n:!n||(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(re," ")+" ").indexOf(i)>-1:"|="===n&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,o){var a="nth"!==e.slice(0,3),r="last"!==e.slice(-4),l="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,s){var d,c,u,h,p,f,g=a!==r?"nextSibling":"previousSibling",m=t.parentNode,v=l&&t.nodeName.toLowerCase(),y=!s&&!l,x=!1;if(m){if(a){for(;g;){for(h=t;h=h[g];)if(l?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&y){for(h=m,u=h[z]||(h[z]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],p=d[0]===H&&d[1],x=p&&d[2],
h=p&&m.childNodes[p];h=++p&&h&&h[g]||(x=p=0)||f.pop();)if(1===h.nodeType&&++x&&h===t){c[e]=[H,p,x];break}}else if(y&&(h=t,u=h[z]||(h[z]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),d=c[e]||[],p=d[0]===H&&d[1],x=p),x===!1)for(;(h=++p&&h&&h[g]||(x=p=0)||f.pop())&&((l?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++x||(y&&(u=h[z]||(h[z]={}),c=u[h.uniqueID]||(u[h.uniqueID]={}),c[e]=[H,x]),h!==t)););return x-=o,x===i||x%i===0&&x/i>=0}}},PSEUDO:function(e,n){var o,a=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[z]?a(n):a.length>1?(o=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=a(e,n),r=o.length;r--;)i=ee(e,o[r]),e[i]=!(t[i]=o[r])}):function(e){return a(e,0,o)}):a}},pseudos:{not:i(function(e){var t=[],n=[],o=I(e.replace(le,"$1"));return o[z]?i(function(e,t,n,i){for(var a,r=o(e,null,i,[]),l=e.length;l--;)(a=r[l])&&(e[l]=!(t[l]=a))}):function(e,i,a){return t[0]=e,o(t,null,a,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(e,t){return[t-1]}),eq:d(function(e,t,n){return[n<0?n+t:n]}),even:d(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:d(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:d(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:d(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[b]=l(b);for(b in{submit:!0,reset:!0})k.pseudos[b]=s(b);return u.prototype=k.filters=k.pseudos,k.setFilters=new u,N=t.tokenize=function(e,n){var i,o,a,r,l,s,d,c=Q[e+" "];if(c)return n?0:c.slice(0);for(l=e,s=[],d=k.preFilter;l;){i&&!(o=se.exec(l))||(o&&(l=l.slice(o[0].length)||l),s.push(a=[])),i=!1,(o=de.exec(l))&&(i=o.shift(),a.push({value:i,type:o[0].replace(le," ")}),l=l.slice(i.length));for(r in k.filter)!(o=pe[r].exec(l))||d[r]&&!(o=d[r](o))||(i=o.shift(),a.push({value:i,type:r,matches:o}),l=l.slice(i.length));if(!i)break}return n?l.length:l?t.error(e):Q(e,s).slice(0)},I=t.compile=function(e,t){var n,i=[],o=[],a=B[e+" "];if(!a){for(t||(t=N(e)),n=t.length;n--;)a=y(t[n]),a[z]?i.push(a):o.push(a);a=B(e,x(o,i)),a.selector=e}return a},_=t.select=function(e,t,n,i){var o,a,r,l,s,d="function"==typeof e&&e,u=!i&&N(e=d.selector||e);if(n=n||[],1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(r=a[0]).type&&w.getById&&9===t.nodeType&&j&&k.relative[a[1].type]){if(t=(k.find.ID(r.matches[0].replace(be,we),t)||[])[0],!t)return n;d&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=pe.needsContext.test(e)?0:a.length;o--&&(r=a[o],!k.relative[l=r.type]);)if((s=k.find[l])&&(i=s(r.matches[0].replace(be,we),ye.test(a[0].type)&&c(t.parentNode)||t))){if(a.splice(o,1),e=i.length&&h(a),!e)return J.apply(n,i),n;break}}return(d||I(e,u))(i,t,!j,n,!t||ye.test(e)&&c(t.parentNode)||t),n},w.sortStable=z.split("").sort(G).join("")===z,w.detectDuplicates=!!$,D(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);pe.find=ye,pe.expr=ye.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=ye.uniqueSort,pe.text=ye.getText,pe.isXMLDoc=ye.isXML,pe.contains=ye.contains;var xe=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&pe(e).is(n))break;i.push(e)}return i},be=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},we=pe.expr.match.needsContext,ke=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ce=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?pe.find.matchesSelector(i,e)?[i]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,n=[],i=this,o=i.length;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;t<o;t++)if(pe.contains(i[t],this))return!0}));for(t=0;t<o;t++)pe.find(e,i[t],n);return n=this.pushStack(o>1?pe.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&we.test(e)?pe(e):e||[],!1).length}});var Te,Ne=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Ie=pe.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||Te,"string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Ne.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),ke.test(i[1])&&pe.isPlainObject(t))for(i in t)pe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(o=ie.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return Te.find(e);this.length=1,this[0]=o}return this.context=ie,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):pe.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(pe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),pe.makeArray(e,this))};Ie.prototype=pe.fn,Te=pe(ie);var _e=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t,n=pe(e,this),i=n.length;return this.filter(function(){for(t=0;t<i;t++)if(pe.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,a=[],r=we.test(e)||"string"!=typeof e?pe(e,t||this.context):0;i<o;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(r?r.index(n)>-1:1===n.nodeType&&pe.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?pe.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?pe.inArray(this[0],pe(e)):pe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return xe(e,"parentNode")},parentsUntil:function(e,t,n){return xe(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return xe(e,"nextSibling")},prevAll:function(e){return xe(e,"previousSibling")},nextUntil:function(e,t,n){return xe(e,"nextSibling",n)},prevUntil:function(e,t,n){return xe(e,"previousSibling",n)},siblings:function(e){return be((e.parentNode||{}).firstChild,e)},children:function(e){return be(e.firstChild)},contents:function(e){return pe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:pe.merge([],e.childNodes)}},function(e,t){pe.fn[e]=function(n,i){var o=pe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=pe.filter(i,o)),this.length>1&&(Ee[e]||(o=pe.uniqueSort(o)),_e.test(e)&&(o=o.reverse())),this.pushStack(o)}});var Se=/\S+/g;pe.Callbacks=function(e){e="string"==typeof e?a(e):pe.extend({},e);var t,n,i,o,r=[],l=[],s=-1,d=function(){for(o=e.once,i=t=!0;l.length;s=-1)for(n=l.shift();++s<r.length;)r[s].apply(n[0],n[1])===!1&&e.stopOnFalse&&(s=r.length,n=!1);e.memory||(n=!1),t=!1,o&&(r=n?[]:"")},c={add:function(){return r&&(n&&!t&&(s=r.length-1,l.push(n)),function i(t){pe.each(t,function(t,n){pe.isFunction(n)?e.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==pe.type(n)&&i(n)})}(arguments),n&&!t&&d()),this},remove:function(){return pe.each(arguments,function(e,t){for(var n;(n=pe.inArray(t,r,n))>-1;)r.splice(n,1),n<=s&&s--}),this},has:function(e){return e?pe.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=l=[],r=n="",this},disabled:function(){return!r},lock:function(){return o=!0,n||c.disable(),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],l.push(n),t||d()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},pe.extend({Deferred:function(e){var t=[["resolve","done",pe.Callbacks("once memory"),"resolved"],["reject","fail",pe.Callbacks("once memory"),"rejected"],["notify","progress",pe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return pe.Deferred(function(n){pe.each(t,function(t,a){var r=pe.isFunction(e[t])&&e[t];o[a[1]](function(){var e=r&&r.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===i?n.promise():this,r?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?pe.extend(e,i):i}},o={};return i.pipe=i.then,pe.each(t,function(e,a){var r=a[2],l=a[3];i[a[1]]=r.add,l&&r.add(function(){n=l},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?i:this,arguments),this},o[a[0]+"With"]=r.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,a=oe.call(arguments),r=a.length,l=1!==r||e&&pe.isFunction(e.promise)?r:0,s=1===l?e:pe.Deferred(),d=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?oe.call(arguments):o,i===t?s.notifyWith(n,i):--l||s.resolveWith(n,i)}};if(r>1)for(t=new Array(r),n=new Array(r),i=new Array(r);o<r;o++)a[o]&&pe.isFunction(a[o].promise)?a[o].promise().progress(d(o,n,t)).done(d(o,i,a)).fail(s.reject):--l;return l||s.resolveWith(i,a),s.promise()}});var $e;pe.fn.ready=function(e){return pe.ready.promise().done(e),this},pe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?pe.readyWait++:pe.ready(!0)},ready:function(e){(e===!0?--pe.readyWait:pe.isReady)||(pe.isReady=!0,e!==!0&&--pe.readyWait>0||($e.resolveWith(ie,[pe]),pe.fn.triggerHandler&&(pe(ie).triggerHandler("ready"),pe(ie).off("ready"))))}}),pe.ready.promise=function(t){if(!$e)if($e=pe.Deferred(),"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll)e.setTimeout(pe.ready);else if(ie.addEventListener)ie.addEventListener("DOMContentLoaded",l),e.addEventListener("load",l);else{ie.attachEvent("onreadystatechange",l),e.attachEvent("onload",l);var n=!1;try{n=null==e.frameElement&&ie.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!pe.isReady){try{n.doScroll("left")}catch(t){return e.setTimeout(o,50)}r(),pe.ready()}}()}return $e.promise(t)},pe.ready.promise();var De;for(De in pe(ue))break;ue.ownFirst="0"===De,ue.inlineBlockNeedsLayout=!1,pe(function(){var e,t,n,i;n=ie.getElementsByTagName("body")[0],n&&n.style&&(t=ie.createElement("div"),i=ie.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ue.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=ie.createElement("div");ue.deleteExpando=!0;try{delete e.test}catch(t){ue.deleteExpando=!1}e=null}();var Pe=function(e){var t=pe.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||t!==!0&&e.getAttribute("classid")===t)},Re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,je=/([A-Z])/g;pe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?pe.cache[e[pe.expando]]:e[pe.expando],!!e&&!d(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return u(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return u(e,t,!0)}}),pe.fn.extend({data:function(e,t){var n,i,o,a=this[0],r=a&&a.attributes;if(void 0===e){if(this.length&&(o=pe.data(a),1===a.nodeType&&!pe._data(a,"parsedAttrs"))){for(n=r.length;n--;)r[n]&&(i=r[n].name,0===i.indexOf("data-")&&(i=pe.camelCase(i.slice(5)),s(a,i,o[i])));pe._data(a,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){pe.data(this,e)}):arguments.length>1?this.each(function(){pe.data(this,e,t)}):a?s(a,e,pe.data(a,e)):void 0},removeData:function(e){return this.each(function(){pe.removeData(this,e)})}}),pe.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=pe._data(e,t),n&&(!i||pe.isArray(n)?i=pe._data(e,t,pe.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=pe.queue(e,t),i=n.length,o=n.shift(),a=pe._queueHooks(e,t),r=function(){pe.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,r,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return pe._data(e,n)||pe._data(e,n,{empty:pe.Callbacks("once memory").add(function(){pe._removeData(e,t+"queue"),pe._removeData(e,n)})})}}),pe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?pe.queue(this[0],e):void 0===t?this:this.each(function(){var n=pe.queue(this,e,t);pe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=pe.Deferred(),a=this,r=this.length,l=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";r--;)n=pe._data(a[r],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(l));return l(),o.promise(t)}}),function(){var e;ue.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=ie.getElementsByTagName("body")[0],n&&n.style?(t=ie.createElement("div"),i=ie.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(ie.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var Ae=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oe=new RegExp("^(?:([+-])=|)("+Ae+")([a-z%]*)$","i"),Le=["Top","Right","Bottom","Left"],Me=function(e,t){return e=t||e,"none"===pe.css(e,"display")||!pe.contains(e.ownerDocument,e)},ze=function(e,t,n,i,o,a,r){var l=0,s=e.length,d=null==n;if("object"===pe.type(n)){o=!0;for(l in n)ze(e,t,l,n[l],!0,a,r)}else if(void 0!==i&&(o=!0,pe.isFunction(i)||(r=!0),d&&(r?(t.call(e,i),t=null):(d=t,t=function(e,t,n){return d.call(pe(e),n)})),t))for(;l<s;l++)t(e[l],n,r?i:i.call(e[l],l,t(e[l],n)));return o?e:d?t.call(e):s?t(e[0],n):a},qe=/^(?:checkbox|radio)$/i,He=/<([\w:-]+)/,Ke=/^$|\/(?:java|ecma)script/i,Fe=/^\s+/,Qe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=ie.createElement("div"),t=ie.createDocumentFragment(),n=ie.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ue.leadingWhitespace=3===e.firstChild.nodeType,ue.tbody=!e.getElementsByTagName("tbody").length,ue.htmlSerialize=!!e.getElementsByTagName("link").length,ue.html5Clone="<:nav></:nav>"!==ie.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),ue.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",ue.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=ie.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ue.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ue.noCloneEvent=!!e.addEventListener,e[pe.expando]=1,ue.attributes=!e.getAttribute(pe.expando)}();var Be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ue.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td;var Ge=/<|&#?\w+;/,We=/<tbody/i;!function(){var t,n,i=ie.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ue[t]=n in e)||(i.setAttribute(n,"t"),ue[t]=i.attributes[n].expando===!1);i=null}();var Ve=/^(?:input|select|textarea)$/i,Ue=/^key/,Ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Xe=/^(?:focusinfocus|focusoutblur)$/,Je=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,n,i,o){var a,r,l,s,d,c,u,h,p,f,g,m=pe._data(e);if(m){for(n.handler&&(s=n,n=s.handler,o=s.selector),n.guid||(n.guid=pe.guid++),(r=m.events)||(r=m.events={}),(c=m.handle)||(c=m.handle=function(e){return"undefined"==typeof pe||e&&pe.event.triggered===e.type?void 0:pe.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(Se)||[""],l=t.length;l--;)a=Je.exec(t[l])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(d=pe.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=pe.event.special[p]||{},u=pe.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&pe.expr.match.needsContext.test(o),namespace:f.join(".")},s),(h=r[p])||(h=r[p]=[],h.delegateCount=0,d.setup&&d.setup.call(e,i,f,c)!==!1||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),pe.event.global[p]=!0);e=null}},remove:function(e,t,n,i,o){var a,r,l,s,d,c,u,h,p,f,g,m=pe.hasData(e)&&pe._data(e);if(m&&(c=m.events)){for(t=(t||"").match(Se)||[""],d=t.length;d--;)if(l=Je.exec(t[d])||[],p=g=l[1],f=(l[2]||"").split(".").sort(),p){for(u=pe.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,h=c[p]||[],l=l[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=h.length;a--;)r=h[a],!o&&g!==r.origType||n&&n.guid!==r.guid||l&&!l.test(r.namespace)||i&&i!==r.selector&&("**"!==i||!r.selector)||(h.splice(a,1),r.selector&&h.delegateCount--,u.remove&&u.remove.call(e,r));s&&!h.length&&(u.teardown&&u.teardown.call(e,f,m.handle)!==!1||pe.removeEvent(e,p,m.handle),delete c[p])}else for(p in c)pe.event.remove(e,p+t[d],n,i,!0);pe.isEmptyObject(c)&&(delete m.handle,pe._removeData(e,"events"))}},trigger:function(t,n,i,o){var a,r,l,s,d,c,u,h=[i||ie],p=ce.call(t,"type")?t.type:t,f=ce.call(t,"namespace")?t.namespace.split("."):[];if(l=c=i=i||ie,3!==i.nodeType&&8!==i.nodeType&&!Xe.test(p+pe.event.triggered)&&(p.indexOf(".")>-1&&(f=p.split("."),p=f.shift(),f.sort()),r=p.indexOf(":")<0&&"on"+p,t=t[pe.expando]?t:new pe.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:pe.makeArray(n,[t]),d=pe.event.special[p]||{},o||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!o&&!d.noBubble&&!pe.isWindow(i)){for(s=d.delegateType||p,Xe.test(s+p)||(l=l.parentNode);l;l=l.parentNode)h.push(l),c=l;c===(i.ownerDocument||ie)&&h.push(c.defaultView||c.parentWindow||e)}for(u=0;(l=h[u++])&&!t.isPropagationStopped();)t.type=u>1?s:d.bindType||p,a=(pe._data(l,"events")||{})[t.type]&&pe._data(l,"handle"),a&&a.apply(l,n),a=r&&l[r],a&&a.apply&&Pe(l)&&(t.result=a.apply(l,n),t.result===!1&&t.preventDefault());if(t.type=p,!o&&!t.isDefaultPrevented()&&(!d._default||d._default.apply(h.pop(),n)===!1)&&Pe(i)&&r&&i[p]&&!pe.isWindow(i)){c=i[r],c&&(i[r]=null),pe.event.triggered=p;try{i[p]()}catch(g){}pe.event.triggered=void 0,c&&(i[r]=c)}return t.result}},dispatch:function(e){e=pe.event.fix(e);var t,n,i,o,a,r=[],l=oe.call(arguments),s=(pe._data(this,"events")||{})[e.type]||[],d=pe.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(r=pe.event.handlers.call(this,e,s),t=0;(o=r[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,i=((pe.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,l),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,a,r=[],l=t.delegateCount,s=e.target;if(l&&s.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;s!=this;s=s.parentNode||this)if(1===s.nodeType&&(s.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<l;n++)a=t[n],o=a.selector+" ",void 0===i[o]&&(i[o]=a.needsContext?pe(o,this).index(s)>-1:pe.find(o,this,null,[s]).length),i[o]&&i.push(a);i.length&&r.push({elem:s,handlers:i})}return l<t.length&&r.push({elem:this,handlers:t.slice(l)}),r},fix:function(e){if(e[pe.expando])return e;var t,n,i,o=e.type,a=e,r=this.fixHooks[o];for(r||(this.fixHooks[o]=r=Ye.test(o)?this.mouseHooks:Ue.test(o)?this.keyHooks:{}),i=r.props?this.props.concat(r.props):this.props,e=new pe.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=a.srcElement||ie),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,r.filter?r.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,a=t.button,r=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||ie,o=i.documentElement,n=i.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?t.toElement:r),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==b()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===b()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(pe.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return pe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var i=pe.extend(new pe.Event,n,{type:e,isSimulated:!0});pe.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}},pe.removeEvent=ie.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},pe.Event=function(e,t){return this instanceof pe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?y:x):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),void(this[pe.expando]=!0)):new pe.Event(e,t)},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===i||pe.contains(i,o))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),ue.submit||(pe.event.special.submit={setup:function(){return!pe.nodeName(this,"form")&&void pe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=pe.nodeName(t,"input")||pe.nodeName(t,"button")?pe.prop(t,"form"):void 0;n&&!pe._data(n,"submit")&&(pe.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),pe._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&pe.event.simulate("submit",this.parentNode,e))},teardown:function(){return!pe.nodeName(this,"form")&&void pe.event.remove(this,"._submit")}}),ue.change||(pe.event.special.change={setup:function(){return Ve.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(pe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),pe.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),pe.event.simulate("change",this,e)})),!1):void pe.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ve.test(t.nodeName)&&!pe._data(t,"change")&&(pe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||pe.event.simulate("change",this.parentNode,e)}),pe._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return pe.event.remove(this,"._change"),!Ve.test(this.nodeName)}}),ue.focusin||pe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){pe.event.simulate(t,e.target,pe.event.fix(e))};pe.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=pe._data(i,t);o||i.addEventListener(e,n,!0),pe._data(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=pe._data(i,t)-1;o?pe._data(i,t,o):(i.removeEventListener(e,n,!0),pe._removeData(i,t))}}}),pe.fn.extend({on:function(e,t,n,i){return w(this,e,t,n,i)},one:function(e,t,n,i){return w(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,pe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=x),this.each(function(){pe.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return pe.event.trigger(e,t,n,!0)}});var Ze=/ jQuery\d+="(?:null|\d+)"/g,et=new RegExp("<(?:"+Qe+")[\\s/>]","i"),tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,nt=/<script|<style|<link/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^true\/(.*)/,at=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rt=p(ie),lt=rt.appendChild(ie.createElement("div"));pe.extend({htmlPrefilter:function(e){return e.replace(tt,"<$1></$2>")},clone:function(e,t,n){var i,o,a,r,l,s=pe.contains(e.ownerDocument,e);if(ue.html5Clone||pe.isXMLDoc(e)||!et.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(lt.innerHTML=e.outerHTML,lt.removeChild(a=lt.firstChild)),!(ue.noCloneEvent&&ue.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(i=f(a),l=f(e),r=0;null!=(o=l[r]);++r)i[r]&&I(o,i[r]);if(t)if(n)for(l=l||f(e),i=i||f(a),r=0;null!=(o=l[r]);r++)N(o,i[r]);else N(e,a);return i=f(a,"script"),i.length>0&&g(i,!s&&f(e,"script")),i=l=o=null,a},cleanData:function(e,t){for(var n,i,o,a,r=0,l=pe.expando,s=pe.cache,d=ue.attributes,c=pe.event.special;null!=(n=e[r]);r++)if((t||Pe(n))&&(o=n[l],a=o&&s[o])){if(a.events)for(i in a.events)c[i]?pe.event.remove(n,i):pe.removeEvent(n,i,a.handle);s[o]&&(delete s[o],d||"undefined"==typeof n.removeAttribute?n[l]=void 0:n.removeAttribute(l),ne.push(o))}}}),pe.fn.extend({domManip:_,detach:function(e){return E(this,e,!0)},remove:function(e){return E(this,e)},text:function(e){return ze(this,function(e){return void 0===e?pe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ie).createTextNode(e))},null,e,arguments.length)},append:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.appendChild(e)}})},prepend:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=k(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&pe.cleanData(f(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&pe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return ze(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Ze,""):void 0;if("string"==typeof e&&!nt.test(e)&&(ue.htmlSerialize||!et.test(e))&&(ue.leadingWhitespace||!Fe.test(e))&&!Be[(He.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(pe.cleanData(f(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return _(this,arguments,function(t){var n=this.parentNode;pe.inArray(this,e)<0&&(pe.cleanData(f(this)),n&&n.replaceChild(t,this));
},e)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pe.fn[e]=function(e){for(var n,i=0,o=[],a=pe(e),r=a.length-1;i<=r;i++)n=i===r?this:this.clone(!0),pe(a[i])[t](n),re.apply(o,n.get());return this.pushStack(o)}});var st,dt={HTML:"block",BODY:"block"},ct=/^margin/,ut=new RegExp("^("+Ae+")(?!px)[a-z%]+$","i"),ht=function(e,t,n,i){var o,a,r={};for(a in t)r[a]=e.style[a],e.style[a]=t[a];o=n.apply(e,i||[]);for(a in t)e.style[a]=r[a];return o},pt=ie.documentElement;!function(){function t(){var t,c,u=ie.documentElement;u.appendChild(s),d.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=o=l=!1,i=r=!0,e.getComputedStyle&&(c=e.getComputedStyle(d),n="1%"!==(c||{}).top,l="2px"===(c||{}).marginLeft,o="4px"===(c||{width:"4px"}).width,d.style.marginRight="50%",i="4px"===(c||{marginRight:"4px"}).marginRight,t=d.appendChild(ie.createElement("div")),t.style.cssText=d.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",d.style.width="1px",r=!parseFloat((e.getComputedStyle(t)||{}).marginRight),d.removeChild(t)),d.style.display="none",a=0===d.getClientRects().length,a&&(d.style.display="",d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d.childNodes[0].style.borderCollapse="separate",t=d.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",a=0===t[0].offsetHeight,a&&(t[0].style.display="",t[1].style.display="none",a=0===t[0].offsetHeight)),u.removeChild(s)}var n,i,o,a,r,l,s=ie.createElement("div"),d=ie.createElement("div");d.style&&(d.style.cssText="float:left;opacity:.5",ue.opacity="0.5"===d.style.opacity,ue.cssFloat=!!d.style.cssFloat,d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",ue.clearCloneStyle="content-box"===d.style.backgroundClip,s=ie.createElement("div"),s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",d.innerHTML="",s.appendChild(d),ue.boxSizing=""===d.style.boxSizing||""===d.style.MozBoxSizing||""===d.style.WebkitBoxSizing,pe.extend(ue,{reliableHiddenOffsets:function(){return null==n&&t(),a},boxSizingReliable:function(){return null==n&&t(),o},pixelMarginRight:function(){return null==n&&t(),i},pixelPosition:function(){return null==n&&t(),n},reliableMarginRight:function(){return null==n&&t(),r},reliableMarginLeft:function(){return null==n&&t(),l}}))}();var ft,gt,mt=/^(top|right|bottom|left)$/;e.getComputedStyle?(ft=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},gt=function(e,t,n){var i,o,a,r,l=e.style;return n=n||ft(e),r=n?n.getPropertyValue(t)||n[t]:void 0,""!==r&&void 0!==r||pe.contains(e.ownerDocument,e)||(r=pe.style(e,t)),n&&!ue.pixelMarginRight()&&ut.test(r)&&ct.test(t)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=r,r=n.width,l.width=i,l.minWidth=o,l.maxWidth=a),void 0===r?r:r+""}):pt.currentStyle&&(ft=function(e){return e.currentStyle},gt=function(e,t,n){var i,o,a,r,l=e.style;return n=n||ft(e),r=n?n[t]:void 0,null==r&&l&&l[t]&&(r=l[t]),ut.test(r)&&!mt.test(t)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===t?"1em":r,r=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),void 0===r?r:r+""||"auto"});var vt=/alpha\([^)]*\)/i,yt=/opacity\s*=\s*([^)]*)/i,xt=/^(none|table(?!-c[ea]).+)/,bt=new RegExp("^("+Ae+")(.*)$","i"),wt={position:"absolute",visibility:"hidden",display:"block"},kt={letterSpacing:"0",fontWeight:"400"},Ct=["Webkit","O","Moz","ms"],Tt=ie.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=gt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ue.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,r,l=pe.camelCase(t),s=e.style;if(t=pe.cssProps[l]||(pe.cssProps[l]=P(l)||l),r=pe.cssHooks[t]||pe.cssHooks[l],void 0===n)return r&&"get"in r&&void 0!==(o=r.get(e,!1,i))?o:s[t];if(a=typeof n,"string"===a&&(o=Oe.exec(n))&&o[1]&&(n=h(e,t,o),a="number"),null!=n&&n===n&&("number"===a&&(n+=o&&o[3]||(pe.cssNumber[l]?"":"px")),ue.clearCloneStyle||""!==n||0!==t.indexOf("background")||(s[t]="inherit"),!(r&&"set"in r&&void 0===(n=r.set(e,n,i)))))try{s[t]=n}catch(d){}}},css:function(e,t,n,i){var o,a,r,l=pe.camelCase(t);return t=pe.cssProps[l]||(pe.cssProps[l]=P(l)||l),r=pe.cssHooks[t]||pe.cssHooks[l],r&&"get"in r&&(a=r.get(e,!0,n)),void 0===a&&(a=gt(e,t,i)),"normal"===a&&t in kt&&(a=kt[t]),""===n||n?(o=parseFloat(a),n===!0||isFinite(o)?o||0:a):a}}),pe.each(["height","width"],function(e,t){pe.cssHooks[t]={get:function(e,n,i){if(n)return xt.test(pe.css(e,"display"))&&0===e.offsetWidth?ht(e,wt,function(){return O(e,t,i)}):O(e,t,i)},set:function(e,n,i){var o=i&&ft(e);return j(e,n,i?A(e,t,i,ue.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,o),o):0)}}}),ue.opacity||(pe.cssHooks.opacity={get:function(e,t){return yt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=pe.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===pe.trim(a.replace(vt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=vt.test(a)?a.replace(vt,o):a+" "+o)}}),pe.cssHooks.marginRight=D(ue.reliableMarginRight,function(e,t){if(t)return ht(e,{display:"inline-block"},gt,[e,"marginRight"])}),pe.cssHooks.marginLeft=D(ue.reliableMarginLeft,function(e,t){if(t)return(parseFloat(gt(e,"marginLeft"))||(pe.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-ht(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),pe.each({margin:"",padding:"",border:"Width"},function(e,t){pe.cssHooks[e+t]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];i<4;i++)o[e+Le[i]+t]=a[i]||a[i-2]||a[0];return o}},ct.test(e)||(pe.cssHooks[e+t].set=j)}),pe.fn.extend({css:function(e,t){return ze(this,function(e,t,n){var i,o,a={},r=0;if(pe.isArray(t)){for(i=ft(e),o=t.length;r<o;r++)a[t[r]]=pe.css(e,t[r],!1,i);return a}return void 0!==n?pe.style(e,t,n):pe.css(e,t)},e,t,arguments.length>1)},show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Me(this)?pe(this).show():pe(this).hide()})}}),pe.Tween=L,L.prototype={constructor:L,init:function(e,t,n,i,o,a){this.elem=e,this.prop=n,this.easing=o||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(pe.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=L.prototype.init,pe.fx.step={};var Nt,It,_t=/^(?:toggle|show|hide)$/,Et=/queueHooks$/;pe.Animation=pe.extend(F,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return h(n.elem,e,Oe.exec(t),n),n}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Se);for(var n,i=0,o=e.length;i<o;i++)n=e[i],F.tweeners[n]=F.tweeners[n]||[],F.tweeners[n].unshift(t)},prefilters:[H],prefilter:function(e,t){t?F.prefilters.unshift(e):F.prefilters.push(e)}}),pe.speed=function(e,t,n){var i=e&&"object"==typeof e?pe.extend({},e):{complete:n||!n&&t||pe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!pe.isFunction(t)&&t};return i.duration=pe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in pe.fx.speeds?pe.fx.speeds[i.duration]:pe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){pe.isFunction(i.old)&&i.old.call(this),i.queue&&pe.dequeue(this,i.queue)},i},pe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Me).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=pe.isEmptyObject(e),a=pe.speed(t,n,i),r=function(){var t=F(this,pe.extend({},e),a);(o||pe._data(this,"finish"))&&t.stop(!0)};return r.finish=r,o||a.queue===!1?this.each(r):this.queue(a.queue,r)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=pe.timers,r=pe._data(this);if(o)r[o]&&r[o].stop&&i(r[o]);else for(o in r)r[o]&&r[o].stop&&Et.test(o)&&i(r[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||pe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=pe._data(this),i=n[e+"queue"],o=n[e+"queueHooks"],a=pe.timers,r=i?i.length:0;for(n.finish=!0,pe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<r;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),pe.each(["toggle","show","hide"],function(e,t){var n=pe.fn[t];pe.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(z(t,!0),e,i,o)}}),pe.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),pe.timers=[],pe.fx.tick=function(){var e,t=pe.timers,n=0;for(Nt=pe.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||pe.fx.stop(),Nt=void 0},pe.fx.timer=function(e){pe.timers.push(e),e()?pe.fx.start():pe.timers.pop()},pe.fx.interval=13,pe.fx.start=function(){It||(It=e.setInterval(pe.fx.tick,pe.fx.interval))},pe.fx.stop=function(){e.clearInterval(It),It=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(t,n){return t=pe.fx?pe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e,t=ie.createElement("input"),n=ie.createElement("div"),i=ie.createElement("select"),o=i.appendChild(ie.createElement("option"));n=ie.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",ue.getSetAttribute="t"!==n.className,ue.style=/top/.test(e.getAttribute("style")),ue.hrefNormalized="/a"===e.getAttribute("href"),ue.checkOn=!!t.value,ue.optSelected=o.selected,ue.enctype=!!ie.createElement("form").enctype,i.disabled=!0,ue.optDisabled=!o.disabled,t=ie.createElement("input"),t.setAttribute("value",""),ue.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ue.radioValue="t"===t.value}();var St=/\r/g,$t=/[\x20\t\r\n\f]+/g;pe.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=pe.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,pe(this).val()):e,null==o?o="":"number"==typeof o?o+="":pe.isArray(o)&&(o=pe.map(o,function(e){return null==e?"":e+""})),t=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=pe.valHooks[o.type]||pe.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(St,""):null==n?"":n)}}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:pe.trim(pe.text(e)).replace($t," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,a="select-one"===e.type||o<0,r=a?null:[],l=a?o+1:i.length,s=o<0?l:a?o:0;s<l;s++)if(n=i[s],(n.selected||s===o)&&(ue.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!pe.nodeName(n.parentNode,"optgroup"))){if(t=pe(n).val(),a)return t;r.push(t)}return r},set:function(e,t){for(var n,i,o=e.options,a=pe.makeArray(t),r=o.length;r--;)if(i=o[r],pe.inArray(pe.valHooks.option.get(i),a)>-1)try{i.selected=n=!0}catch(l){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),o}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){if(pe.isArray(t))return e.checked=pe.inArray(pe(e).val(),t)>-1}},ue.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Dt,Pt,Rt=pe.expr.attrHandle,jt=/^(?:checked|selected)$/i,At=ue.getSetAttribute,Ot=ue.input;pe.fn.extend({attr:function(e,t){return ze(this,pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?pe.prop(e,t,n):(1===a&&pe.isXMLDoc(e)||(t=t.toLowerCase(),o=pe.attrHooks[t]||(pe.expr.match.bool.test(t)?Pt:Dt)),void 0!==n?null===n?void pe.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=pe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ue.radioValue&&"radio"===t&&pe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,a=t&&t.match(Se);if(a&&1===e.nodeType)for(;n=a[o++];)i=pe.propFix[n]||n,pe.expr.match.bool.test(n)?Ot&&At||!jt.test(n)?e[i]=!1:e[pe.camelCase("default-"+n)]=e[i]=!1:pe.attr(e,n,""),e.removeAttribute(At?n:i)}}),Pt={set:function(e,t,n){return t===!1?pe.removeAttr(e,n):Ot&&At||!jt.test(n)?e.setAttribute(!At&&pe.propFix[n]||n,n):e[pe.camelCase("default-"+n)]=e[n]=!0,n}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Rt[t]||pe.find.attr;Ot&&At||!jt.test(t)?Rt[t]=function(e,t,i){var o,a;return i||(a=Rt[t],Rt[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,Rt[t]=a),o}:Rt[t]=function(e,t,n){if(!n)return e[pe.camelCase("default-"+t)]?t.toLowerCase():null}}),Ot&&At||(pe.attrHooks.value={set:function(e,t,n){return pe.nodeName(e,"input")?void(e.defaultValue=t):Dt&&Dt.set(e,t,n)}}),At||(Dt={set:function(e,t,n){var i=e.getAttributeNode(n);if(i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n))return t}},Rt.id=Rt.name=Rt.coords=function(e,t,n){var i;if(!n)return(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},pe.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:Dt.set},pe.attrHooks.contenteditable={set:function(e,t,n){Dt.set(e,""!==t&&t,n)}},pe.each(["width","height"],function(e,t){pe.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),ue.style||(pe.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Lt=/^(?:input|select|textarea|button|object)$/i,Mt=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return ze(this,pe.prop,e,t,arguments.length>1)},removeProp:function(e){return e=pe.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),pe.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,o=pe.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):Lt.test(e.nodeName)||Mt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ue.hrefNormalized||pe.each(["href","src"],function(e,t){pe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ue.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this}),ue.enctype||(pe.propFix.enctype="encoding");var zt=/[\t\r\n\f]/g;pe.fn.extend({addClass:function(e){var t,n,i,o,a,r,l,s=0;if(pe.isFunction(e))return this.each(function(t){pe(this).addClass(e.call(this,t,Q(this)))});if("string"==typeof e&&e)for(t=e.match(Se)||[];n=this[s++];)if(o=Q(n),i=1===n.nodeType&&(" "+o+" ").replace(zt," ")){for(r=0;a=t[r++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");l=pe.trim(i),o!==l&&pe.attr(n,"class",l)}return this},removeClass:function(e){var t,n,i,o,a,r,l,s=0;if(pe.isFunction(e))return this.each(function(t){pe(this).removeClass(e.call(this,t,Q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Se)||[];n=this[s++];)if(o=Q(n),i=1===n.nodeType&&(" "+o+" ").replace(zt," ")){for(r=0;a=t[r++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");l=pe.trim(i),o!==l&&pe.attr(n,"class",l)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):pe.isFunction(e)?this.each(function(n){pe(this).toggleClass(e.call(this,n,Q(this),t),t)}):this.each(function(){var t,i,o,a;if("string"===n)for(i=0,o=pe(this),a=e.match(Se)||[];t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=Q(this),t&&pe._data(this,"__className__",t),pe.attr(this,"class",t||e===!1?"":pe._data(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Q(n)+" ").replace(zt," ").indexOf(t)>-1)return!0;return!1}}),pe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){pe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var qt=e.location,Ht=pe.now(),Kt=/\?/,Ft=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;pe.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,o=pe.trim(t+"");return o&&!pe.trim(o.replace(Ft,function(e,t,o,a){return n&&t&&(i=0),0===i?e:(n=o||t,i+=!a-!o,"")}))?Function("return "+o)():pe.error("Invalid JSON: "+t)},pe.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new e.DOMParser,n=i.parseFromString(t,"text/xml")):(n=new e.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+t),n};var Qt=/#.*$/,Bt=/([?&])_=[^&]*/,Gt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Vt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Yt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Xt={},Jt={},Zt="*/".concat("*"),en=qt.href,tn=Yt.exec(en.toLowerCase())||[];pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:en,type:"GET",isLocal:Wt.test(tn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pe.parseJSON,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,pe.ajaxSettings),t):W(pe.ajaxSettings,e)},ajaxPrefilter:B(Xt),ajaxTransport:B(Jt),ajax:function(t,n){function i(t,n,i,o){var a,u,y,x,w,C=n;2!==b&&(b=2,s&&e.clearTimeout(s),c=void 0,l=o||"",k.readyState=t>0?4:0,a=t>=200&&t<300||304===t,i&&(x=V(h,k,i)),x=U(h,x,k,a),a?(h.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(pe.lastModified[r]=w),w=k.getResponseHeader("etag"),w&&(pe.etag[r]=w)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=x.state,u=x.data,y=x.error,a=!y)):(y=C,!t&&C||(C="error",t<0&&(t=0))),k.status=t,k.statusText=(n||C)+"",a?g.resolveWith(p,[u,C,k]):g.rejectWith(p,[k,C,y]),k.statusCode(v),v=void 0,d&&f.trigger(a?"ajaxSuccess":"ajaxError",[k,h,a?u:y]),m.fireWith(p,[k,C]),d&&(f.trigger("ajaxComplete",[k,h]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,a,r,l,s,d,c,u,h=pe.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?pe(p):pe.event,g=pe.Deferred(),m=pe.Callbacks("once memory"),v=h.statusCode||{},y={},x={},b=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!u)for(u={};t=Gt.exec(l);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?l:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=x[n]=x[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)v[t]=[v[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),i(0,t),this}};if(g.promise(k).complete=m.add,k.success=k.done,k.error=k.fail,h.url=((t||h.url||en)+"").replace(Qt,"").replace(Ut,tn[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=pe.trim(h.dataType||"*").toLowerCase().match(Se)||[""],null==h.crossDomain&&(o=Yt.exec(h.url.toLowerCase()),h.crossDomain=!(!o||o[1]===tn[1]&&o[2]===tn[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(tn[3]||("http:"===tn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=pe.param(h.data,h.traditional)),G(Xt,h,n,k),2===b)return k;d=pe.event&&h.global,d&&0===pe.active++&&pe.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Vt.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(Kt.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Bt.test(r)?r.replace(Bt,"$1_="+Ht++):r+(Kt.test(r)?"&":"?")+"_="+Ht++)),h.ifModified&&(pe.lastModified[r]&&k.setRequestHeader("If-Modified-Since",pe.lastModified[r]),pe.etag[r]&&k.setRequestHeader("If-None-Match",pe.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Zt+"; q=0.01":""):h.accepts["*"]);for(a in h.headers)k.setRequestHeader(a,h.headers[a]);if(h.beforeSend&&(h.beforeSend.call(p,k,h)===!1||2===b))return k.abort();w="abort";for(a in{success:1,error:1,complete:1})k[a](h[a]);if(c=G(Jt,h,n,k)){if(k.readyState=1,d&&f.trigger("ajaxSend",[k,h]),2===b)return k;h.async&&h.timeout>0&&(s=e.setTimeout(function(){k.abort("timeout")},h.timeout));try{b=1,c.send(y,i)}catch(C){if(!(b<2))throw C;i(-1,C)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return pe.get(e,t,n,"json")},getScript:function(e,t){return pe.get(e,void 0,t,"script")}}),pe.each(["get","post"],function(e,t){pe[t]=function(e,n,i,o){return pe.isFunction(n)&&(o=o||i,i=n,n=void 0),pe.ajax(pe.extend({url:e,type:t,dataType:o,data:n,success:i},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pe.fn.extend({wrapAll:function(e){if(pe.isFunction(e))return this.each(function(t){pe(this).wrapAll(e.call(this,t))});if(this[0]){var t=pe(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return pe.isFunction(e)?this.each(function(t){pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=pe.isFunction(e);return this.each(function(n){pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){pe.nodeName(this,"body")||pe(this).replaceWith(this.childNodes)}).end()}}),pe.expr.filters.hidden=function(e){return ue.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:X(e)},pe.expr.filters.visible=function(e){return!pe.expr.filters.hidden(e)};var nn=/%20/g,on=/\[\]$/,an=/\r?\n/g,rn=/^(?:submit|button|image|reset|file)$/i,ln=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var n,i=[],o=function(e,t){t=pe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=pe.ajaxSettings&&pe.ajaxSettings.traditional),pe.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){o(this.name,this.value)});else for(n in e)J(n,e[n],t,o);return i.join("&").replace(nn,"+")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&ln.test(this.nodeName)&&!rn.test(e)&&(this.checked||!qe.test(e))}).map(function(e,t){var n=pe(this).val();return null==n?null:pe.isArray(n)?pe.map(n,function(e){return{name:t.name,value:e.replace(an,"\r\n")}}):{name:t.name,value:n.replace(an,"\r\n")}}).get()}}),pe.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return this.isLocal?ee():ie.documentMode>8?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||ee()}:Z;var sn=0,dn={},cn=pe.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in dn)dn[e](void 0,!0)}),ue.cors=!!cn&&"withCredentials"in cn,cn=ue.ajax=!!cn,cn&&pe.ajaxTransport(function(t){if(!t.crossDomain||ue.cors){var n;return{send:function(i,o){var a,r=t.xhr(),l=++sn;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)r[a]=t.xhrFields[a];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)void 0!==i[a]&&r.setRequestHeader(a,i[a]+"");r.send(t.hasContent&&t.data||null),n=function(e,i){var a,s,d;if(n&&(i||4===r.readyState))if(delete dn[l],n=void 0,r.onreadystatechange=pe.noop,i)4!==r.readyState&&r.abort();else{d={},a=r.status,"string"==typeof r.responseText&&(d.text=r.responseText);try{s=r.statusText}catch(c){s=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=d.text?200:404}d&&o(a,s,d,r.getAllResponseHeaders())},t.async?4===r.readyState?e.setTimeout(n):r.onreadystatechange=dn[l]=n:n()},abort:function(){n&&n(void 0,!0)}}}}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),pe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=ie.head||pe("head")[0]||ie.documentElement;return{send:function(i,o){t=ie.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var un=[],hn=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=un.pop()||pe.expando+"_"+Ht++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(t,n,i){var o,a,r,l=t.jsonp!==!1&&(hn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&hn.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=pe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(hn,"$1"+o):t.jsonp!==!1&&(t.url+=(Kt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return r||pe.error(o+" was not called"),r[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){r=arguments},i.always(function(){void 0===a?pe(e).removeProp(o):e[o]=a,t[o]&&(t.jsonpCallback=n.jsonpCallback,un.push(o)),r&&pe.isFunction(a)&&a(r[0]),r=a=void 0}),"script"}),pe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ie;var i=ke.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=v([e],t,o),o&&o.length&&pe(o).remove(),pe.merge([],i.childNodes))};var pn=pe.fn.load;pe.fn.load=function(e,t,n){if("string"!=typeof e&&pn)return pn.apply(this,arguments);var i,o,a,r=this,l=e.indexOf(" ");return l>-1&&(i=pe.trim(e.slice(l,e.length)),e=e.slice(0,l)),pe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),r.length>0&&pe.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,r.html(i?pe("<div>").append(pe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){r.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.filters.animated=function(e){return pe.grep(pe.timers,function(t){return e===t.elem}).length},pe.offset={setOffset:function(e,t,n){var i,o,a,r,l,s,d,c=pe.css(e,"position"),u=pe(e),h={};"static"===c&&(e.style.position="relative"),l=u.offset(),a=pe.css(e,"top"),s=pe.css(e,"left"),d=("absolute"===c||"fixed"===c)&&pe.inArray("auto",[a,s])>-1,d?(i=u.position(),r=i.top,o=i.left):(r=parseFloat(a)||0,o=parseFloat(s)||0),pe.isFunction(t)&&(t=t.call(e,n,pe.extend({},l))),null!=t.top&&(h.top=t.top-l.top+r),null!=t.left&&(h.left=t.left-l.left+o),"using"in t?t.using.call(e,h):u.css(h)}},pe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){pe.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return t=a.documentElement,pe.contains(t,o)?("undefined"!=typeof o.getBoundingClientRect&&(i=o.getBoundingClientRect()),n=te(a),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===pe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pe.nodeName(e[0],"html")||(n=e.offset()),n.top+=pe.css(e[0],"borderTopWidth",!0),n.left+=pe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-pe.css(i,"marginTop",!0),left:t.left-n.left-pe.css(i,"marginLeft",!0)}}},offsetParent:function(){
return this.map(function(){for(var e=this.offsetParent;e&&!pe.nodeName(e,"html")&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||pt})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);pe.fn[e]=function(i){return ze(this,function(e,i,o){var a=te(e);return void 0===o?a?t in a?a[t]:a.document.documentElement[i]:e[i]:void(a?a.scrollTo(n?pe(a).scrollLeft():o,n?o:pe(a).scrollTop()):e[i]=o)},e,i,arguments.length,null)}}),pe.each(["top","left"],function(e,t){pe.cssHooks[t]=D(ue.pixelPosition,function(e,n){if(n)return n=gt(e,t),ut.test(n)?pe(e).position()[t]+"px":n})}),pe.each({Height:"height",Width:"width"},function(e,t){pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){pe.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),r=n||(i===!0||o===!0?"margin":"border");return ze(this,function(t,n,i){var o;return pe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?pe.css(t,n,r):pe.style(t,n,i,r)},t,a?i:void 0,a,null)}})}),pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),pe.fn.size=function(){return this.length},pe.fn.andSelf=pe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var fn=e.jQuery,gn=e.$;return pe.noConflict=function(t){return e.$===pe&&(e.$=gn),t&&e.jQuery===pe&&(e.jQuery=fn),pe},t||(e.jQuery=e.$=pe),pe}),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(e){var t=e.treeObj,n=consts.event;t.bind(n.NODECREATED,function(t,n,i){tools.apply(e.callback.onNodeCreated,[t,n,i])}),t.bind(n.CLICK,function(t,n,i,o,a){tools.apply(e.callback.onClick,[n,i,o,a])}),t.bind(n.EXPAND,function(t,n,i){tools.apply(e.callback.onExpand,[t,n,i])}),t.bind(n.COLLAPSE,function(t,n,i){tools.apply(e.callback.onCollapse,[t,n,i])}),t.bind(n.ASYNC_SUCCESS,function(t,n,i,o){tools.apply(e.callback.onAsyncSuccess,[t,n,i,o])}),t.bind(n.ASYNC_ERROR,function(t,n,i,o,a,r){tools.apply(e.callback.onAsyncError,[t,n,i,o,a,r])}),t.bind(n.REMOVE,function(t,n,i){tools.apply(e.callback.onRemove,[t,n,i])}),t.bind(n.SELECTED,function(t,n,i){tools.apply(e.callback.onSelected,[n,i])}),t.bind(n.UNSELECTED,function(t,n,i){tools.apply(e.callback.onUnSelected,[n,i])})},_unbindEvent=function(e){var t=e.treeObj,n=consts.event;t.unbind(n.NODECREATED).unbind(n.CLICK).unbind(n.EXPAND).unbind(n.COLLAPSE).unbind(n.ASYNC_SUCCESS).unbind(n.ASYNC_ERROR).unbind(n.REMOVE).unbind(n.SELECTED).unbind(n.UNSELECTED)},_eventProxy=function(e){var t=e.target,n=data.getSetting(e.data.treeId),i="",o=null,a="",r="",l=null,s=null,d=null;if(tools.eqs(e.type,"mousedown")?r="mousedown":tools.eqs(e.type,"mouseup")?r="mouseup":tools.eqs(e.type,"contextmenu")?r="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+consts.id.SWITCH)?(i=tools.getNodeMainDom(t).id,a="switchNode"):(d=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),d&&(i=tools.getNodeMainDom(d).id,a="clickNode")):tools.eqs(e.type,"dblclick")&&(r="dblclick",d=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),d&&(i=tools.getNodeMainDom(d).id,a="switchNode")),r.length>0&&0==i.length&&(d=tools.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]),d&&(i=tools.getNodeMainDom(d).id)),i.length>0)switch(o=data.getNodeCache(n,i),a){case"switchNode":o.isParent&&(tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(n.view.dblClickExpand,[n.treeId,o],n.view.dblClickExpand))?l=handler.onSwitchNode:a="";break;case"clickNode":l=handler.onClickNode}switch(r){case"mousedown":s=handler.onZTreeMousedown;break;case"mouseup":s=handler.onZTreeMouseup;break;case"dblclick":s=handler.onZTreeDblclick;break;case"contextmenu":s=handler.onZTreeContextmenu}var c={stop:!1,node:o,nodeEventType:a,nodeEventCallback:l,treeEventType:r,treeEventCallback:s};return c},_initNode=function(e,t,n,i,o,a,r){if(n){var l=data.getRoot(e),s=e.data.key.children;n.level=t,n.tId=e.treeId+"_"+ ++l.zId,n.parentTId=i?i.tId:null,n.open="string"==typeof n.open?tools.eqs(n.open,"true"):!!n.open,n[s]&&n[s].length>0?(n.isParent=!0,n.zAsync=!0):(n.isParent="string"==typeof n.isParent?tools.eqs(n.isParent,"true"):!!n.isParent,n.open=!(!n.isParent||e.async.enable)&&n.open,n.zAsync=!n.isParent),n.isFirstNode=o,n.isLastNode=a,n.getParentNode=function(){return data.getNodeCache(e,n.parentTId)},n.getPreNode=function(){return data.getPreNode(e,n)},n.getNextNode=function(){return data.getNextNode(e,n)},n.getIndex=function(){return data.getNodeIndex(e,n)},n.getPath=function(){return data.getNodePath(e,n)},n.isAjaxing=!1,data.fixPIdKeyValue(e,n)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,n,i){var o,a=e.data.key.children;t[a]?n>=t[a].length&&(n=-1):(t[a]=[],n=-1),t[a].length>0&&0===n?(t[a][0].isFirstNode=!1,view.setNodeLineIcos(e,t[a][0])):t[a].length>0&&n<0&&(t[a][t[a].length-1].isLastNode=!1,view.setNodeLineIcos(e,t[a][t[a].length-1])),t.isParent=!0,n<0?t[a]=t[a].concat(i):(o=[n,0].concat(i),t[a].splice.apply(t[a],o))},addSelectedNode:function(e,t){var n=data.getRoot(e);data.isSelectedNode(e,t)||n.curSelectedList.push(t)},addCreatedNode:function(e,t){if(e.callback.onNodeCreated||e.view.addDiyDom){var n=data.getRoot(e);n.createdNodes.push(t)}},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,n){for(var i=0,o=_init.afterA.length;i<o;i++)_init.afterA[i].apply(this,arguments)},getBeforeA:function(e,t,n){for(var i=0,o=_init.beforeA.length;i<o;i++)_init.beforeA[i].apply(this,arguments)},getInnerAfterA:function(e,t,n){for(var i=0,o=_init.innerAfterA.length;i<o;i++)_init.innerAfterA[i].apply(this,arguments)},getInnerBeforeA:function(e,t,n){for(var i=0,o=_init.innerBeforeA.length;i<o;i++)_init.innerBeforeA[i].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;for(var n=e.data.key.children,i=t.parentTId?t.getParentNode():data.getRoot(e),o=0,a=i[n].length-1;o<=a;o++)if(i[n][o]===t)return o;return-1},getNextNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,i=t.parentTId?t.getParentNode():data.getRoot(e),o=0,a=i[n].length-1;o<=a;o++)if(i[n][o]===t)return o==a?null:i[n][o+1];return null},getNodeByParam:function(e,t,n,i){if(!t||!n)return null;for(var o=e.data.key.children,a=0,r=t.length;a<r;a++){if(t[a][n]==i)return t[a];var l=data.getNodeByParam(e,t[a][o],n,i);if(l)return l}return null},getNodeCache:function(e,t){if(!t)return null;var n=caches[e.treeId].nodes[data.getNodeCacheId(t)];return n?n:null},getNodeName:function(e,t){var n=e.data.key.name;return""+t[n]},getNodePath:function(e,t){if(!t)return null;var n;return n=t.parentTId?t.getParentNode().getPath():[],n&&n.push(t),n},getNodeTitle:function(e,t){var n=""===e.data.key.title?e.data.key.name:e.data.key.title;return""+t[n]},getNodes:function(e){return data.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,n,i){if(!t||!n)return[];for(var o=e.data.key.children,a=[],r=0,l=t.length;r<l;r++)t[r][n]==i&&a.push(t[r]),a=a.concat(data.getNodesByParam(e,t[r][o],n,i));return a},getNodesByParamFuzzy:function(e,t,n,i){if(!t||!n)return[];var o=e.data.key.children,a=[];i=i.toLowerCase();for(var r=0,l=t.length;r<l;r++)"string"==typeof t[r][n]&&t[r][n].toLowerCase().indexOf(i)>-1&&a.push(t[r]),a=a.concat(data.getNodesByParamFuzzy(e,t[r][o],n,i));return a},getNodesByFilter:function(e,t,n,i,o){if(!t)return i?null:[];for(var a=e.data.key.children,r=i?null:[],l=0,s=t.length;l<s;l++){if(tools.apply(n,[t[l],o],!1)){if(i)return t[l];r.push(t[l])}var d=data.getNodesByFilter(e,t[l][a],n,i,o);if(i&&d)return d;r=i?d:r.concat(d)}return r},getPreNode:function(e,t){if(!t)return null;for(var n=e.data.key.children,i=t.parentTId?t.getParentNode():data.getRoot(e),o=0,a=i[n].length;o<a;o++)if(i[n][o]===t)return 0==o?null:i[n][o-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,n=_init.caches.length;t<n;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,n,i,o,a){for(var r=0,l=_init.nodes.length;r<l;r++)_init.nodes[r].apply(this,arguments)},initRoot:function(e){for(var t=0,n=_init.roots.length;t<n;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var n=data.getRoot(e),i=0,o=n.curSelectedList.length;i<o;i++)if(t===n.curSelectedList[i])return!0;return!1},removeNodeCache:function(e,t){var n=e.data.key.children;if(t[n])for(var i=0,o=t[n].length;i<o;i++)data.removeNodeCache(e,t[n][i]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var n=data.getRoot(e),i=0,o=n.curSelectedList.length;i<o;i++)t!==n.curSelectedList[i]&&data.getNodeCache(e,n.curSelectedList[i].tId)||(n.curSelectedList.splice(i,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,t]),i--,o--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var n=0,i=_init.zTreeTools.length;n<i;n++)_init.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var n=e.data.key.children,i=[];if(tools.isArray(t))for(var o=0,a=t.length;o<a;o++)i.push(t[o]),t[o][n]&&(i=i.concat(data.transformToArrayFormat(e,t[o][n])));else i.push(t),t[n]&&(i=i.concat(data.transformToArrayFormat(e,t[n])));return i},transformTozTreeFormat:function(e,t){var n,i,o=e.data.simpleData.idKey,a=e.data.simpleData.pIdKey,r=e.data.key.children;if(!o||""==o||!t)return[];if(tools.isArray(t)){var l=[],s=[];for(n=0,i=t.length;n<i;n++)s[t[n][o]]=t[n];for(n=0,i=t.length;n<i;n++)s[t[n][a]]&&t[n][o]!=t[n][a]?(s[t[n][a]][r]||(s[t[n][a]][r]=[]),s[t[n][a]][r].push(t[n])):l.push(t[n]);return l}return[t]}},event={bindEvent:function(e){for(var t=0,n=_init.bind.length;t<n;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,n=_init.unbind.length;t<n;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},n=e.treeObj;e.view.txtSelectedEnable||n.bind("selectstart",handler.onSelectStart).css({"-moz-user-select":"-moz-none"}),n.bind("click",t,event.proxy),n.bind("dblclick",t,event.proxy),n.bind("mouseover",t,event.proxy),n.bind("mouseout",t,event.proxy),n.bind("mousedown",t,event.proxy),n.bind("mouseup",t,event.proxy),n.bind("contextmenu",t,event.proxy)},unbindTree:function(e){var t=e.treeObj;t.unbind("selectstart",handler.onSelectStart).unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){for(var t=[],n=0,i=_init.proxys.length;n<i;n++){var o=_init.proxys[n].apply(this,arguments);if(t.push(o),o.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var n=event.doProxy(e),i=!0,o=!1,a=0,r=n.length;a<r;a++){var l=n[a];l.nodeEventCallback&&(o=!0,i=l.nodeEventCallback.apply(l,[e,l.node])&&i),l.treeEventCallback&&(o=!0,i=l.treeEventCallback.apply(l,[e,l.node])&&i)}return i}},handler={onSwitchNode:function(e,t){var n=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(n.callback.beforeCollapse,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}else{if(0==tools.apply(n.callback.beforeExpand,[n.treeId,t],!0))return!0;data.getRoot(n).expandTriggerFlag=!0,view.switchNode(n,t)}return!0},onClickNode:function(e,t){var n=data.getSetting(e.data.treeId),i=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return 0==tools.apply(n.callback.beforeClick,[n.treeId,t,i],!0)||(0===i?view.cancelPreSelectedNode(n,t):view.selectNode(n,t,2===i),n.treeObj.trigger(consts.event.CLICK,[e,n.treeId,t,i]),!0)},onZTreeMousedown:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseDown,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseDown,[e,n.treeId,t]),!0},onZTreeMouseup:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeMouseUp,[n.treeId,t],!0)&&tools.apply(n.callback.onMouseUp,[e,n.treeId,t]),!0},onZTreeDblclick:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeDblClick,[n.treeId,t],!0)&&tools.apply(n.callback.onDblClick,[e,n.treeId,t]),!0},onZTreeContextmenu:function(e,t){var n=data.getSetting(e.data.treeId);return tools.apply(n.callback.beforeRightClick,[n.treeId,t],!0)&&tools.apply(n.callback.onRightClick,[e,n.treeId,t]),"function"!=typeof n.callback.onRightClick},onSelectStart:function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===t||"textarea"===t}},tools={apply:function(e,t,n){return"function"==typeof e?e.apply(zt,t?t:[]):n},canAsync:function(e,t){var n=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[n]&&t[n].length>0)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var n in e)t[n]=e[n]instanceof Date?new Date(e[n].getTime()):"object"==typeof e[n]?tools.clone(e[n]):e[n];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},$:function(e,t,n){return t&&"string"!=typeof t&&(n=t,t=""),"string"==typeof e?$(e,n?n.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,n?n.treeObj:null)},getMDom:function(e,t,n){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var i=0,o=n.length;t.tagName&&i<o;i++)if(tools.eqs(t.tagName,n[i].tagName)&&null!==t.getAttribute(n[i].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return $(e).closest("#"+t).length>0},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,n,i,o){if(!e.data.keep.leaf||!t||t.isParent)if(tools.isArray(i)||(i=[i]),e.data.simpleData.enable&&(i=data.transformTozTreeFormat(e,i)),t){var a=$$(t,consts.id.SWITCH,e),r=$$(t,consts.id.ICON,e),l=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,a,consts.folder.CLOSE),view.replaceIcoClass(t,r,consts.folder.CLOSE),t.open=!1,l.css({display:"none"})),data.addNodesData(e,t,n,i),view.createNodes(e,t.level+1,i,t,n),o||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),n,i),view.createNodes(e,0,i,null,n)},appendNodes:function(e,t,n,i,o,a,r){if(!n)return[];var l,s,d=[],c=e.data.key.children,u=i?i:data.getRoot(e),h=u[c];(!h||o>=h.length)&&(o=-1);for(var p=0,f=n.length;p<f;p++){var g=n[p];a&&(l=(0===o||h.length==n.length)&&0==p,s=o<0&&p==n.length-1,data.initNode(e,t,g,i,l,s,r),data.addNodeCache(e,g));var m=[];g[c]&&g[c].length>0&&(m=view.appendNodes(e,t+1,g[c],g,-1,a,r&&g.open)),r&&(view.makeDOMNodeMainBefore(d,e,g),view.makeDOMNodeLine(d,e,g),data.getBeforeA(e,g,d),view.makeDOMNodeNameBefore(d,e,g),data.getInnerBeforeA(e,g,d),view.makeDOMNodeIcon(d,e,g),data.getInnerAfterA(e,g,d),view.makeDOMNodeNameAfter(d,e,g),data.getAfterA(e,g,d),g.isParent&&g.open&&view.makeUlHtml(e,g,d,m.join("")),view.makeDOMNodeMainAfter(d,e,g),data.addCreatedNode(e,g))}return d},appendParentULDom:function(e,t){var n=[],i=$$(t,e);!i.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),i=$$(t,e));var o=$$(t,consts.id.UL,e);o.get(0)&&o.remove();var a=e.data.key.children,r=view.appendNodes(e,t.level+1,t[a],t,-1,!1,!0);view.makeUlHtml(e,t,n,r.join("")),i.append(n.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"","class":consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;pKey.length>1&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;i<l;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,cache:!1,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(err){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,-1,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,-1,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,n){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,n]))}}),!0},cancelPreSelectedNode:function(e,t,n){var i,o,a=data.getRoot(e).curSelectedList;for(i=a.length-1;i>=0;i--)if(o=a[i],t===o||!t&&(!n||n!==o)){if($$(o,consts.id.A,e).removeClass(consts.node.CURSELECTED),t){data.removeSelectedNode(e,t);break}a.splice(i,1),e.treeObj.trigger(consts.event.UNSELECTED,[e.treeId,o])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);t.createdNodes.length>0;){var n=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,n]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,n])}},createNodes:function(e,t,n,i,o){if(n&&0!=n.length){var a=data.getRoot(e),r=e.data.key.children,l=!i||i.open||!!$$(i[r][0],e).get(0);a.createdNodes=[];var s,d,c=view.appendNodes(e,t,n,i,o,!0,l);if(i){var u=$$(i,consts.id.UL,e);u.get(0)&&(s=u)}else s=e.treeObj;s&&(o>=0&&(d=s.children()[o]),o>=0&&d?$(d).before(c.join("")):s.append(c.join(""))),view.createNodeCallback(e)}},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,n,i,o){var a,r,l=data.getRoot(e),s=e.data.key.children;if(!t)return void tools.apply(o,[]);if(l.expandTriggerFlag&&(r=o,a=function(){r&&r(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},o=a,l.expandTriggerFlag=!1),!t.open&&t.isParent&&(!$$(t,consts.id.UL,e).get(0)||t[s]&&t[s].length>0&&!$$(t[s][0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open==n)return void tools.apply(o,[]);var d=$$(t,consts.id.UL,e),c=$$(t,consts.id.SWITCH,e),u=$$(t,consts.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&u.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,c,consts.folder.OPEN),view.replaceIcoClass(t,u,consts.folder.OPEN),0==i||""==e.view.expandSpeed?(d.show(),tools.apply(o,[])):t[s]&&t[s].length>0?d.slideDown(e.view.expandSpeed,o):(d.show(),tools.apply(o,[]))):(view.replaceSwitchClass(t,c,consts.folder.CLOSE),view.replaceIcoClass(t,u,consts.folder.CLOSE),0!=i&&""!=e.view.expandSpeed&&t[s]&&t[s].length>0?d.slideUp(e.view.expandSpeed,o):(d.hide(),tools.apply(o,[])))):tools.apply(o,[])},expandCollapseParentNode:function(e,t,n,i,o){if(t){if(!t.parentTId)return void view.expandCollapseNode(e,t,n,i,o);view.expandCollapseNode(e,t,n,i),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),n,i,o)}},expandCollapseSonNode:function(e,t,n,i,o){var a=data.getRoot(e),r=e.data.key.children,l=t?t[r]:a[r],s=!t&&i,d=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,l)for(var c=0,u=l.length;c<u;c++)l[c]&&view.expandCollapseSonNode(e,l[c],n,s);data.getRoot(e).expandTriggerFlag=d,view.expandCollapseNode(e,t,n,i,o)},isSelectedNode:function(e,t){if(!t)return!1;var n,i=data.getRoot(e).curSelectedList;for(n=i.length-1;n>=0;n--)if(t===i[n])return!0;return!1},makeDOMNodeIcon:function(e,t,n){var i=data.getNodeName(t,n),o=t.view.nameIsHTML?i:i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,n),"' style='",view.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,consts.id.SPAN,"' class='",consts.className.NAME,"'>",o,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,n),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e,t,n){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,n){e.push("<li id='",n.tId,"' class='",consts.className.LEVEL,n.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e,t,n){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var i=data.getNodeTitle(t,n),o=view.makeNodeUrl(t,n),a=view.makeNodeFontCss(t,n),r=[];for(var l in a)r.push(l,":",a[l],";");e.push("<a id='",n.tId,consts.id.A,"' class='",consts.className.LEVEL,n.level,"' treeNode",consts.id.A,' onclick="',n.click||"",'" ',null!=o&&o.length>0?"href='"+o+"'":""," target='",view.makeNodeTarget(n),"' style='",r.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&i&&e.push("title='",i.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var n=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return n&&"function"!=typeof n?n:{}},makeNodeIcoClass:function(e,t){var n=["ico"];return t.isAjaxing||(n[0]=(t.iconSkin?t.iconSkin+"_":"")+n[0],t.isParent?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU)),consts.className.BUTTON+" "+n.join("_")},makeNodeIcoStyle:function(e,t){var n=[];if(!t.isAjaxing){var i=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon];i&&n.push("background:url(",i,") 0 0 no-repeat;"),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||n.push("width:0px;height:0px;")}return n.join("")},makeNodeLineClass:function(e,t){var n=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?n.push(consts.line.ROOT):0==t.level&&t.isFirstNode?n.push(consts.line.ROOTS):t.isLastNode?n.push(consts.line.BOTTOM):n.push(consts.line.CENTER):n.push(consts.line.NOLINE),t.isParent?n.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):n.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var n=e.data.key.url;return t[n]?t[n]:null},makeUlHtml:function(e,t,n,i){n.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(i),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(t){var n=e.data.key.children,i=t[n];if(i){for(var o=0,a=i.length;o<a;o++)data.removeNodeCache(e,i[o]);if(data.removeSelectedNode(e),delete t[n],e.data.keep.parent)$$(t,consts.id.UL,e).empty();else{t.isParent=!1,t.open=!1;var r=$$(t,consts.id.SWITCH,e),l=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,r,consts.folder.DOCU),view.replaceIcoClass(t,l,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}}}},scrollIntoView:function(e){if(e)if(e.scrollIntoViewIfNeeded)e.scrollIntoViewIfNeeded();else if(e.scrollIntoView)e.scrollIntoView(!1);else try{e.focus().blur()}catch(t){}},setFirstNode:function(e,t){var n=e.data.key.children,i=t[n].length;i>0&&(t[n][0].isFirstNode=!0)},setLastNode:function(e,t){var n=e.data.key.children,i=t[n].length;i>0&&(t[n][i-1].isLastNode=!0)},removeNode:function(e,t){var n=data.getRoot(e),i=e.data.key.children,o=t.parentTId?t.getParentNode():n;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var a=0,r=o[i].length;a<r;a++)if(o[i][a].tId==t.tId){o[i].splice(a,1);break}view.setFirstNode(e,o),view.setLastNode(e,o);var l,s,d,c=o[i].length;if(e.data.keep.parent||0!=c){if(e.view.showLine&&c>0){var u=o[i][c-1];if(l=$$(u,consts.id.UL,e),s=$$(u,consts.id.SWITCH,e),d=$$(u,consts.id.ICON,e),o==n)if(1==o[i].length)view.replaceSwitchClass(u,s,consts.line.ROOT);else{var h=$$(o[i][0],consts.id.SWITCH,e);view.replaceSwitchClass(o[i][0],h,consts.line.ROOTS),view.replaceSwitchClass(u,s,consts.line.BOTTOM)}else view.replaceSwitchClass(u,s,consts.line.BOTTOM);l.removeClass(consts.line.LINE)}}else o.isParent=!1,o.open=!1,l=$$(o,consts.id.UL,e),s=$$(o,consts.id.SWITCH,e),d=$$(o,consts.id.ICON,e),view.replaceSwitchClass(o,s,consts.folder.DOCU),view.replaceIcoClass(o,d,consts.folder.DOCU),l.css("display","none")}},replaceIcoClass:function(e,t,n){if(t&&!e.isAjaxing){var i=t.attr("class");if(void 0!=i){var o=i.split("_");switch(n){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:o[o.length-1]=n}t.attr("class",o.join("_"))}}},replaceSwitchClass:function(e,t,n){if(t){var i=t.attr("class");if(void 0!=i){var o=i.split("_");switch(n){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:o[0]=view.makeNodeLineClassEx(e)+n;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:o[1]=n}t.attr("class",o.join("_")),n!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,n){n||view.cancelPreSelectedNode(e,null,t),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t),e.treeObj.trigger(consts.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var n=$$(t,consts.id.A,e),i=view.makeNodeFontCss(e,t);i&&n.css(i)},setNodeLineIcos:function(e,t){if(t){var n=$$(t,consts.id.SWITCH,e),i=$$(t,consts.id.UL,e),o=$$(t,consts.id.ICON,e),a=view.makeUlLineClass(e,t);0==a.length?i.removeClass(consts.line.LINE):i.addClass(a),n.attr("class",view.makeNodeLineClass(e,t)),t.isParent?n.removeAttr("disabled"):n.attr("disabled","disabled"),o.removeAttr("style"),o.attr("style",view.makeNodeIcoStyle(e,t)),o.attr("class",view.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var n=data.getNodeTitle(e,t),i=$$(t,consts.id.SPAN,e);if(i.empty(),e.view.nameIsHTML?i.html(data.getNodeName(e,t)):i.text(data.getNodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)){var o=$$(t,consts.id.A,e);o.attr("title",n?n:"")}},setNodeTarget:function(e,t){var n=$$(t,consts.id.A,e);n.attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=$$(t,consts.id.A,e),i=view.makeNodeUrl(e,t);null==i||0==i.length?n.removeAttr("href"):n.attr("href",i)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t?t:null},destroy:function(e){if(e&&e.length>0)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,n){var i=tools.clone(_setting);$.extend(!0,i,t),i.treeId=e.attr("id"),i.treeObj=e,i.treeObj.empty(),settings[i.treeId]=i,"undefined"==typeof document.body.style.maxHeight&&(i.view.expandSpeed=""),data.initRoot(i);var o=data.getRoot(i),a=i.data.key.children;n=n?tools.clone(tools.isArray(n)?n:[n]):[],i.data.simpleData.enable?o[a]=data.transformTozTreeFormat(i,n):o[a]=n,data.initCache(i),event.unbindTree(i),event.bindTree(i),event.unbindEvent(i),event.bindEvent(i);var r={setting:i,addNodes:function(e,t,n,o){function a(){view.addNodes(i,e,t,l,1==o)}if(e||(e=null),e&&!e.isParent&&i.data.keep.leaf)return null;var r=parseInt(t,10);if(isNaN(r)?(o=!!n,n=t,t=-1):t=r,!n)return null;var l=tools.clone(tools.isArray(n)?n:[n]);return tools.canAsync(i,e)?view.asyncNode(i,e,o,a):a(),l},cancelSelectedNode:function(e){view.cancelPreSelectedNode(i,e)},destroy:function(){view.destroy(i)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(i,null,e,!0),
e},expandNode:function(e,t,n,o,a){function r(){var t=$$(e,i).get(0);t&&o!==!1&&view.scrollIntoView(t)}return e&&e.isParent?(t!==!0&&t!==!1&&(t=!e.open),a=!!a,a&&t&&0==tools.apply(i.callback.beforeExpand,[i.treeId,e],!0)?null:a&&!t&&0==tools.apply(i.callback.beforeCollapse,[i.treeId,e],!0)?null:(t&&e.parentTId&&view.expandCollapseParentNode(i,e.getParentNode(),t,!1),t!==e.open||n?(data.getRoot(i).expandTriggerFlag=a,!tools.canAsync(i,e)&&n?view.expandCollapseSonNode(i,e,t,!0,r):(e.open=!t,view.switchNode(this.setting,e),r()),t):null)):null},getNodes:function(){return data.getNodes(i)},getNodeByParam:function(e,t,n){return e?data.getNodeByParam(i,n?n[i.data.key.children]:data.getNodes(i),e,t):null},getNodeByTId:function(e){return data.getNodeCache(i,e)},getNodesByParam:function(e,t,n){return e?data.getNodesByParam(i,n?n[i.data.key.children]:data.getNodes(i),e,t):null},getNodesByParamFuzzy:function(e,t,n){return e?data.getNodesByParamFuzzy(i,n?n[i.data.key.children]:data.getNodes(i),e,t):null},getNodesByFilter:function(e,t,n,o){return t=!!t,e&&"function"==typeof e?data.getNodesByFilter(i,n?n[i.data.key.children]:data.getNodes(i),e,t,o):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=i.data.key.children,n=e.parentTId?e.getParentNode():data.getRoot(i),o=0,a=n[t].length;o<a;o++)if(n[t][o]==e)return o;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(i).curSelectedList,n=0,o=t.length;n<o;n++)e.push(t[n]);return e},isSelectedNode:function(e){return data.isSelectedNode(i,e)},reAsyncChildNodes:function(e,t,n){if(this.setting.async.enable){var o=!e;if(o&&(e=data.getRoot(i)),"refresh"==t){for(var a=this.setting.data.key.children,r=0,l=e[a]?e[a].length:0;r<l;r++)data.removeNodeCache(i,e[a][r]);if(data.removeSelectedNode(i),e[a]=[],o)this.setting.treeObj.empty();else{var s=$$(e,consts.id.UL,i);s.empty()}}view.asyncNode(this.setting,o?null:e,!!n)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(i),t=e[i.data.key.children];data.initRoot(i),e[i.data.key.children]=t,data.initCache(i),view.createNodes(i,0,e[i.data.key.children],null,-1)},removeChildNodes:function(e){if(!e)return null;var t=i.data.key.children,n=e[t];return view.removeChildNodes(i,e),n?n:null},removeNode:function(e,t){e&&(t=!!t,t&&0==tools.apply(i.callback.beforeRemove,[i.treeId,e],!0)||(view.removeNode(i,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[i.treeId,e])))},selectNode:function(e,t,n){function o(){if(!n){var t=$$(e,i).get(0);view.scrollIntoView(t)}}if(e&&tools.uCanDo(i)){if(t=i.view.selectedMulti&&t,e.parentTId)view.expandCollapseParentNode(i,e.getParentNode(),!0,!1,o);else if(!n)try{$$(e,i).focus().blur()}catch(a){}view.selectNode(i,e,t)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(i,e)},transformToArray:function(e){return data.transformToArrayFormat(i,e)},updateNode:function(e,t){if(e){var n=$$(e,i);n.get(0)&&tools.uCanDo(i)&&(view.setNodeName(i,e),view.setNodeTarget(i,e),view.setNodeUrl(i,e),view.setNodeLineIcos(i,e),view.setNodeFontCss(i,e))}}};return o.treeTools=r,data.setZTreeTools(i,r),o[a]&&o[a].length>0?view.createNodes(i,0,o[a],null,-1):i.async.enable&&i.async.url&&""!==i.async.url&&view.asyncNode(i),r}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(e){var t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},n={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},i=function(e){var t=w.getRoot(e);t.radioCheckedList=[]},o=function(e){},a=function(e){var t=e.treeObj,n=x.event;t.bind(n.CHECK,function(t,n,i,o){t.srcEvent=n,y.apply(e.callback.onCheck,[t,i,o])})},r=function(e){var t=e.treeObj,n=x.event;t.unbind(n.CHECK)},l=function(e){var t=e.target,n=w.getSetting(e.data.treeId),i="",o=null,a="",r="",l=null,s=null;if(y.eqs(e.type,"mouseover")?n.check.enable&&y.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+x.id.CHECK)&&(i=y.getNodeMainDom(t).id,a="mouseoverCheck"):y.eqs(e.type,"mouseout")?n.check.enable&&y.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+x.id.CHECK)&&(i=y.getNodeMainDom(t).id,a="mouseoutCheck"):y.eqs(e.type,"click")&&n.check.enable&&y.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+x.id.CHECK)&&(i=y.getNodeMainDom(t).id,a="checkNode"),i.length>0)switch(o=w.getNodeCache(n,i),a){case"checkNode":l=p.onCheckNode;break;case"mouseoverCheck":l=p.onMouseoverCheck;break;case"mouseoutCheck":l=p.onMouseoutCheck}var d={stop:"checkNode"===a,node:o,nodeEventType:a,nodeEventCallback:l,treeEventType:r,treeEventCallback:s};return d},s=function(e,t,n,i,o,a,r){if(n){var l=e.data.key.checked;if("string"==typeof n[l]&&(n[l]=y.eqs(n[l],"true")),n[l]=!!n[l],n.checkedOld=n[l],"string"==typeof n.nocheck&&(n.nocheck=y.eqs(n.nocheck,"true")),n.nocheck=!!n.nocheck||e.check.nocheckInherit&&i&&!!i.nocheck,"string"==typeof n.chkDisabled&&(n.chkDisabled=y.eqs(n.chkDisabled,"true")),n.chkDisabled=!!n.chkDisabled||e.check.chkDisabledInherit&&i&&!!i.chkDisabled,"string"==typeof n.halfCheck&&(n.halfCheck=y.eqs(n.halfCheck,"true")),n.halfCheck=!!n.halfCheck,n.check_Child_State=-1,n.check_Focus=!1,n.getCheckStatus=function(){return w.getCheckStatus(e,n)},e.check.chkStyle==x.radio.STYLE&&e.check.radioType==x.radio.TYPE_ALL&&n[l]){var s=w.getRoot(e);s.radioCheckedList.push(n)}}},d=function(e,t,n){e.data.key.checked;e.check.enable&&(w.makeChkFlag(e,t),n.push("<span ID='",t.tId,x.id.CHECK,"' class='",b.makeChkClass(e,t),"' treeNode",x.id.CHECK,t.nocheck===!0?" style='display:none;'":"","></span>"))},c=function(e,t){t.checkNode=function(e,t,n,i){var o=this.setting.data.key.checked;if(e.chkDisabled!==!0&&(t!==!0&&t!==!1&&(t=!e[o]),i=!!i,(e[o]!==t||n)&&(!i||0!=y.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&y.uCanDo(this.setting)&&this.setting.check.enable&&e.nocheck!==!0)){e[o]=t;var a=k(e,x.id.CHECK,this.setting);(n||this.setting.check.chkStyle===x.radio.STYLE)&&b.checkNodeRelation(this.setting,e),b.setChkClass(this.setting,a,e),b.repairParentChkClassWithSelf(this.setting,e),i&&this.setting.treeObj.trigger(x.event.CHECK,[null,this.setting.treeId,e])}},t.checkAllNodes=function(e){b.repairAllChk(this.setting,!!e)},t.getCheckedNodes=function(e){var t=this.setting.data.key.children;return e=e!==!1,w.getTreeCheckedNodes(this.setting,w.getRoot(this.setting)[t],e)},t.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return w.getTreeChangeCheckedNodes(this.setting,w.getRoot(this.setting)[e])},t.setChkDisabled=function(e,t,n,i){t=!!t,n=!!n,i=!!i,b.repairSonChkDisabled(this.setting,e,t,i),b.repairParentChkDisabled(this.setting,e.getParentNode(),t,n)};var n=t.updateNode;t.updateNode=function(e,i){if(n&&n.apply(t,arguments),e&&this.setting.check.enable){var o=k(e,this.setting);if(o.get(0)&&y.uCanDo(this.setting)){var a=k(e,x.id.CHECK,this.setting);1!=i&&this.setting.check.chkStyle!==x.radio.STYLE||b.checkNodeRelation(this.setting,e),b.setChkClass(this.setting,a,e),b.repairParentChkClassWithSelf(this.setting,e)}}}},u={getRadioCheckedList:function(e){for(var t=w.getRoot(e).radioCheckedList,n=0,i=t.length;n<i;n++)w.getNodeCache(e,t[n].tId)||(t.splice(n,1),n--,i--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var n=e.data.key.checked,i={checked:t[n],half:t.halfCheck?t.halfCheck:e.check.chkStyle==x.radio.STYLE?2===t.check_Child_State:t[n]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0};return i},getTreeCheckedNodes:function(e,t,n,i){if(!t)return[];var o=e.data.key.children,a=e.data.key.checked,r=n&&e.check.chkStyle==x.radio.STYLE&&e.check.radioType==x.radio.TYPE_ALL;i=i?i:[];for(var l=0,s=t.length;l<s&&(t[l].nocheck===!0||t[l].chkDisabled===!0||t[l][a]!=n||(i.push(t[l]),!r))&&(w.getTreeCheckedNodes(e,t[l][o],n,i),!(r&&i.length>0));l++);return i},getTreeChangeCheckedNodes:function(e,t,n){if(!t)return[];var i=e.data.key.children,o=e.data.key.checked;n=n?n:[];for(var a=0,r=t.length;a<r;a++)t[a].nocheck!==!0&&t[a].chkDisabled!==!0&&t[a][o]!=t[a].checkedOld&&n.push(t[a]),w.getTreeChangeCheckedNodes(e,t[a][i],n);return n},makeChkFlag:function(e,t){if(t){var n=e.data.key.children,i=e.data.key.checked,o=-1;if(t[n])for(var a=0,r=t[n].length;a<r;a++){var l=t[n][a],s=-1;if(e.check.chkStyle==x.radio.STYLE){if(s=l.nocheck===!0||l.chkDisabled===!0?l.check_Child_State:l.halfCheck===!0?2:l[i]?2:l.check_Child_State>0?2:0,2==s){o=2;break}0==s&&(o=0)}else if(e.check.chkStyle==x.checkbox.STYLE){if(s=l.nocheck===!0||l.chkDisabled===!0?l.check_Child_State:l.halfCheck===!0?1:l[i]?l.check_Child_State===-1||2===l.check_Child_State?2:1:l.check_Child_State>0?1:0,1===s){o=1;break}if(2===s&&o>-1&&a>0&&s!==o){o=1;break}if(2===o&&s>-1&&s<2){o=1;break}s>-1&&(o=s)}}t.check_Child_State=o}}},h={},p={onCheckNode:function(e,t){if(t.chkDisabled===!0)return!1;var n=w.getSetting(e.data.treeId),i=n.data.key.checked;if(0==y.apply(n.callback.beforeCheck,[n.treeId,t],!0))return!0;t[i]=!t[i],b.checkNodeRelation(n,t);var o=k(t,x.id.CHECK,n);return b.setChkClass(n,o,t),b.repairParentChkClassWithSelf(n,t),n.treeObj.trigger(x.event.CHECK,[e,n.treeId,t]),!0},onMouseoverCheck:function(e,t){if(t.chkDisabled===!0)return!1;var n=w.getSetting(e.data.treeId),i=k(t,x.id.CHECK,n);return t.check_Focus=!0,b.setChkClass(n,i,t),!0},onMouseoutCheck:function(e,t){if(t.chkDisabled===!0)return!1;var n=w.getSetting(e.data.treeId),i=k(t,x.id.CHECK,n);return t.check_Focus=!1,b.setChkClass(n,i,t),!0}},f={},g={checkNodeRelation:function(e,t){var n,i,o,a=e.data.key.children,r=e.data.key.checked,l=x.radio;if(e.check.chkStyle==l.STYLE){var s=w.getRadioCheckedList(e);if(t[r])if(e.check.radioType==l.TYPE_ALL){for(i=s.length-1;i>=0;i--)n=s[i],n[r]&&n!=t&&(n[r]=!1,s.splice(i,1),b.setChkClass(e,k(n,x.id.CHECK,e),n),n.parentTId!=t.parentTId&&b.repairParentChkClassWithSelf(e,n));s.push(t)}else{var d=t.parentTId?t.getParentNode():w.getRoot(e);for(i=0,o=d[a].length;i<o;i++)n=d[a][i],n[r]&&n!=t&&(n[r]=!1,b.setChkClass(e,k(n,x.id.CHECK,e),n))}else if(e.check.radioType==l.TYPE_ALL)for(i=0,o=s.length;i<o;i++)if(t==s[i]){s.splice(i,1);break}}else t[r]&&(!t[a]||0==t[a].length||e.check.chkboxType.Y.indexOf("s")>-1)&&b.setSonNodeCheckBox(e,t,!0),t[r]||t[a]&&0!=t[a].length&&!(e.check.chkboxType.N.indexOf("s")>-1)||b.setSonNodeCheckBox(e,t,!1),t[r]&&e.check.chkboxType.Y.indexOf("p")>-1&&b.setParentNodeCheckBox(e,t,!0),!t[r]&&e.check.chkboxType.N.indexOf("p")>-1&&b.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var n=e.data.key.checked,i=x.checkbox,o=x.radio,a="";a=t.chkDisabled===!0?i.DISABLED:t.halfCheck?i.PART:e.check.chkStyle==o.STYLE?t.check_Child_State<1?i.FULL:i.PART:t[n]?2===t.check_Child_State||t.check_Child_State===-1?i.FULL:i.PART:t.check_Child_State<1?i.FULL:i.PART;var r=e.check.chkStyle+"_"+(t[n]?i.TRUE:i.FALSE)+"_"+a;return r=t.check_Focus&&t.chkDisabled!==!0?r+"_"+i.FOCUS:r,x.className.BUTTON+" "+i.DEFAULT+" "+r},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===x.checkbox.STYLE)for(var n=e.data.key.checked,i=e.data.key.children,o=w.getRoot(e),a=0,r=o[i].length;a<r;a++){var l=o[i][a];l.nocheck!==!0&&l.chkDisabled!==!0&&(l[n]=t),b.setSonNodeCheckBox(e,l,t)}},repairChkClass:function(e,t){if(t&&(w.makeChkFlag(e,t),t.nocheck!==!0)){var n=k(t,x.id.CHECK,e);b.setChkClass(e,n,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var n=t.getParentNode();b.repairChkClass(e,n),b.repairParentChkClass(e,n)}},repairParentChkClassWithSelf:function(e,t){if(t){var n=e.data.key.children;t[n]&&t[n].length>0?b.repairParentChkClass(e,t[n][0]):b.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,n,i){if(t){var o=e.data.key.children;if(t.chkDisabled!=n&&(t.chkDisabled=n),b.repairChkClass(e,t),t[o]&&i)for(var a=0,r=t[o].length;a<r;a++){var l=t[o][a];b.repairSonChkDisabled(e,l,n,i)}}},repairParentChkDisabled:function(e,t,n,i){t&&(t.chkDisabled!=n&&i&&(t.chkDisabled=n),b.repairChkClass(e,t),b.repairParentChkDisabled(e,t.getParentNode(),n,i))},setChkClass:function(e,t,n){t&&(n.nocheck===!0?t.hide():t.show(),t.attr("class",b.makeChkClass(e,n)))},setParentNodeCheckBox:function(e,t,n,i){var o=e.data.key.children,a=e.data.key.checked,r=k(t,x.id.CHECK,e);if(i||(i=t),w.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0&&(t[a]=n,b.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=i&&e.treeObj.trigger(x.event.CHECK,[null,e.treeId,t])),t.parentTId){var l=!0;if(!n)for(var s=t.getParentNode()[o],d=0,c=s.length;d<c;d++)if(s[d].nocheck!==!0&&s[d].chkDisabled!==!0&&s[d][a]||(s[d].nocheck===!0||s[d].chkDisabled===!0)&&s[d].check_Child_State>0){l=!1;break}l&&b.setParentNodeCheckBox(e,t.getParentNode(),n,i)}},setSonNodeCheckBox:function(e,t,n,i){if(t){var o=e.data.key.children,a=e.data.key.checked,r=k(t,x.id.CHECK,e);i||(i=t);var l=!1;if(t[o])for(var s=0,d=t[o].length;s<d;s++){var c=t[o][s];b.setSonNodeCheckBox(e,c,n,i),c.chkDisabled===!0&&(l=!0)}t!=w.getRoot(e)&&t.chkDisabled!==!0&&(l&&t.nocheck!==!0&&w.makeChkFlag(e,t),t.nocheck!==!0&&t.chkDisabled!==!0?(t[a]=n,l||(t.check_Child_State=t[o]&&t[o].length>0?n?2:0:-1)):t.check_Child_State=-1,b.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=i&&t.nocheck!==!0&&t.chkDisabled!==!0&&e.treeObj.trigger(x.event.CHECK,[null,e.treeId,t]))}}},m={tools:f,view:g,event:h,data:u};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,m);var v=e.fn.zTree,y=v._z.tools,x=v.consts,b=v._z.view,w=v._z.data,k=(v._z.event,y.$);w.exSetting(n),w.addInitBind(a),w.addInitUnBind(r),w.addInitCache(o),w.addInitNode(s),w.addInitProxy(l,!0),w.addInitRoot(i),w.addBeforeA(d),w.addZTreeTools(c);var C=b.createNodes;b.createNodes=function(e,t,n,i,o){C&&C.apply(b,arguments),n&&b.repairParentChkClassWithSelf(e,i)};var T=b.removeNode;b.removeNode=function(e,t){var n=t.getParentNode();T&&T.apply(b,arguments),t&&n&&(b.repairChkClass(e,n),b.repairParentChkClass(e,n))};var N=b.appendNodes;b.appendNodes=function(e,t,n,i,o,a,r){var l="";return N&&(l=N.apply(b,arguments)),i&&w.makeChkFlag(e,i),l}}(jQuery),function(e){var t={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},n={edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}},i=function(e){var t=b.getRoot(e),n=b.getRoots();t.curEditNode=null,t.curEditInput=null,t.curHoverNode=null,t.dragFlag=0,t.dragNodeShowBefore=[],t.dragMaskList=new Array,n.showHoverDom=!0},o=function(e){},a=function(e){var t=e.treeObj,n=y.event;t.bind(n.RENAME,function(t,n,i,o){v.apply(e.callback.onRename,[t,n,i,o])}),t.bind(n.DRAG,function(t,n,i,o){v.apply(e.callback.onDrag,[n,i,o])}),t.bind(n.DRAGMOVE,function(t,n,i,o){v.apply(e.callback.onDragMove,[n,i,o])}),t.bind(n.DROP,function(t,n,i,o,a,r,l){v.apply(e.callback.onDrop,[n,i,o,a,r,l])})},r=function(e){var t=e.treeObj,n=y.event;t.unbind(n.RENAME),t.unbind(n.DRAG),t.unbind(n.DRAGMOVE),t.unbind(n.DROP)},l=function(e){var t=e.target,n=b.getSetting(e.data.treeId),i=e.relatedTarget,o="",a=null,r="",l="",s=null,d=null,c=null;if(v.eqs(e.type,"mouseover")?(c=v.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+y.id.A}]),c&&(o=v.getNodeMainDom(c).id,r="hoverOverNode")):v.eqs(e.type,"mouseout")?(c=v.getMDom(n,i,[{tagName:"a",attrName:"treeNode"+y.id.A}]),c||(o="remove",r="hoverOutNode")):v.eqs(e.type,"mousedown")&&(c=v.getMDom(n,t,[{tagName:"a",attrName:"treeNode"+y.id.A}]),c&&(o=v.getNodeMainDom(c).id,r="mousedownNode")),o.length>0)switch(a=b.getNodeCache(n,o),r){case"mousedownNode":s=h.onMousedownNode;break;case"hoverOverNode":s=h.onHoverOverNode;break;case"hoverOutNode":s=h.onHoverOutNode}var u={stop:!1,node:a,nodeEventType:r,nodeEventCallback:s,treeEventType:l,treeEventCallback:d};return u},s=function(e,t,n,i,o,a,r){n&&(n.isHover=!1,n.editNameFlag=!1)},d=function(e,t){t.cancelEditName=function(e){var t=b.getRoot(this.setting);t.curEditNode&&x.cancelCurEditNode(this.setting,e?e:null,!0)},t.copyNode=function(e,t,n,i){function o(){x.addNodes(a.setting,e,-1,[r],i)}if(!t)return null;if(e&&!e.isParent&&this.setting.data.keep.leaf&&n===y.move.TYPE_INNER)return null;var a=this,r=v.clone(t);return e||(e=null,n=y.move.TYPE_INNER),n==y.move.TYPE_INNER?v.canAsync(this.setting,e)?x.asyncNode(this.setting,e,i,o):o():(x.addNodes(this.setting,e.parentNode,-1,[r],i),x.moveNode(this.setting,e,r,n,!1,i)),r},t.editName=function(e){e&&e.tId&&e===b.getNodeCache(this.setting,e.tId)&&(e.parentTId&&x.expandCollapseParentNode(this.setting,e.getParentNode(),!0),x.editNode(this.setting,e))},t.moveNode=function(e,t,n,i){function o(){x.moveNode(a.setting,e,t,n,!1,i)}if(!t)return t;if(e&&!e.isParent&&this.setting.data.keep.leaf&&n===y.move.TYPE_INNER)return null;if(e&&(t.parentTId==e.tId&&n==y.move.TYPE_INNER||w(t,this.setting).find("#"+e.tId).length>0))return null;e||(e=null);var a=this;return v.canAsync(this.setting,e)&&n===y.move.TYPE_INNER?x.asyncNode(this.setting,e,i,o):o(),t},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}},c={setSonNodeLevel:function(e,t,n){if(n){var i=e.data.key.children;if(n.level=t?t.level+1:0,n[i])for(var o=0,a=n[i].length;o<a;o++)n[i][o]&&b.setSonNodeLevel(e,n,n[i][o])}}},u={},h={onHoverOverNode:function(e,t){var n=b.getSetting(e.data.treeId),i=b.getRoot(n);i.curHoverNode!=t&&h.onHoverOutNode(e),i.curHoverNode=t,x.addHoverDom(n,t)},onHoverOutNode:function(e,t){var n=b.getSetting(e.data.treeId),i=b.getRoot(n);i.curHoverNode&&!b.isSelectedNode(n,i.curHoverNode)&&(x.removeTreeDom(n,i.curHoverNode),i.curHoverNode=null)},onMousedownNode:function(n,i){function o(n){function i(){k=null,P="",R=y.move.TYPE_INNER,m.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}if(0==c.dragFlag&&Math.abs(j-n.clientX)<d.edit.drag.minMoveSize&&Math.abs(A-n.clientY)<d.edit.drag.minMoveSize)return!0;var o,r,l,s,h,p=d.data.key.children;if(I.css("cursor","pointer"),0==c.dragFlag){if(0==v.apply(d.callback.beforeDrag,[d.treeId,f],!0))return a(n),!0;for(o=0,r=f.length;o<r;o++)0==o&&(c.dragNodeShowBefore=[]),l=f[o],l.isParent&&l.open?(x.expandCollapseNode(d,l,!l.open),c.dragNodeShowBefore[l.tId]=!0):c.dragNodeShowBefore[l.tId]=!1;c.dragFlag=1,u.showHoverDom=!1,v.showIfameMask(d,!0);var S=!0,L=-1;if(f.length>1){var M=f[0].parentTId?f[0].getParentNode()[p]:b.getNodes(d);for(h=[],o=0,r=M.length;o<r;o++)if(void 0!==c.dragNodeShowBefore[M[o].tId]&&(S&&L>-1&&L+1!==o&&(S=!1),h.push(M[o]),L=o),f.length===h.length){f=h;break}}for(S&&(C=f[0].getPreNode(),T=f[f.length-1].getNextNode()),g=w("<ul class='zTreeDragUL'></ul>",d),o=0,r=f.length;o<r;o++)l=f[o],l.editNameFlag=!1,x.selectNode(d,l,o>0),x.removeTreeDom(d,l),o>d.edit.drag.maxShowNodeNum-1||(s=w("<li id='"+l.tId+"_tmp'></li>",d),s.append(w(l,y.id.A,d).clone()),s.css("padding","0"),s.children("#"+l.tId+y.id.A).removeClass(y.node.CURSELECTED),g.append(s),o==d.edit.drag.maxShowNodeNum-1&&(s=w("<li id='"+l.tId+"_moretmp'><a>  ...  </a></li>",d),g.append(s)));g.attr("id",f[0].tId+y.id.UL+"_tmp"),g.addClass(d.treeObj.attr("class")),g.appendTo(I),m=w("<span class='tmpzTreeMove_arrow'></span>",d),m.attr("id","zTreeMove_arrow_tmp"),m.appendTo(I),console.log(g.get(0).outerHTML,m.get(0).outerHTML),d.treeObj.trigger(y.event.DRAG,[n,d.treeId,f])}if(1==c.dragFlag){if(k&&m.attr("id")==n.target.id&&P&&n.clientX+N.scrollLeft()+2>e("#"+P+y.id.A,k).offset().left){var z=e("#"+P+y.id.A,k);n.target=z.length>0?z.get(0):n.target}else k&&(k.removeClass(y.node.TMPTARGET_TREE),P&&e("#"+P+y.id.A,k).removeClass(y.node.TMPTARGET_NODE+"_"+y.move.TYPE_PREV).removeClass(y.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(y.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER));k=null,P=null,_=!1,E=d;var q=b.getSettings();for(var H in q)q[H].treeId&&q[H].edit.enable&&q[H].treeId!=d.treeId&&(n.target.id==q[H].treeId||e(n.target).parents("#"+q[H].treeId).length>0)&&(_=!0,E=q[H]);var K=N.scrollTop(),F=N.scrollLeft(),Q=E.treeObj.offset(),B=E.treeObj.get(0).scrollHeight,G=E.treeObj.get(0).scrollWidth,W=n.clientY+K-Q.top,V=E.treeObj.height()+Q.top-n.clientY-K,U=n.clientX+F-Q.left,Y=E.treeObj.width()+Q.left-n.clientX-F,X=W<d.edit.drag.borderMax&&W>d.edit.drag.borderMin,J=V<d.edit.drag.borderMax&&V>d.edit.drag.borderMin,Z=U<d.edit.drag.borderMax&&U>d.edit.drag.borderMin,ee=Y<d.edit.drag.borderMax&&Y>d.edit.drag.borderMin,te=W>d.edit.drag.borderMin&&V>d.edit.drag.borderMin&&U>d.edit.drag.borderMin&&Y>d.edit.drag.borderMin,ne=X&&E.treeObj.scrollTop()<=0,ie=J&&E.treeObj.scrollTop()+E.treeObj.height()+10>=B,oe=Z&&E.treeObj.scrollLeft()<=0,ae=ee&&E.treeObj.scrollLeft()+E.treeObj.width()+10>=G;if(n.target&&v.isChildOrSelf(n.target,E.treeId)){for(var re=n.target;re&&re.tagName&&!v.eqs(re.tagName,"li")&&re.id!=E.treeId;)re=re.parentNode;var le=!0;for(o=0,r=f.length;o<r;o++){if(l=f[o],re.id===l.tId){le=!1;break}if(w(l,d).find("#"+re.id).length>0){le=!1;break}}le&&n.target&&v.isChildOrSelf(n.target,re.id+y.id.A)&&(k=e(re),P=re.id)}l=f[0],te&&v.isChildOrSelf(n.target,E.treeId)&&(!k&&(n.target.id==E.treeId||ne||ie||oe||ae)&&(_||!_&&l.parentTId)&&(k=E.treeObj),X?E.treeObj.scrollTop(E.treeObj.scrollTop()-10):J&&E.treeObj.scrollTop(E.treeObj.scrollTop()+10),Z?E.treeObj.scrollLeft(E.treeObj.scrollLeft()-10):ee&&E.treeObj.scrollLeft(E.treeObj.scrollLeft()+10),k&&k!=E.treeObj&&k.offset().left<E.treeObj.offset().left&&E.treeObj.scrollLeft(E.treeObj.scrollLeft()+k.offset().left-E.treeObj.offset().left)),g.css({top:n.clientY+K+3+"px",left:n.clientX+F+3+"px"});var se=0,de=0;if(k&&k.attr("id")!=E.treeId){var ce=null==P?null:b.getNodeCache(E,P),ue=(n.ctrlKey||n.metaKey)&&d.edit.drag.isMove&&d.edit.drag.isCopy||!d.edit.drag.isMove&&d.edit.drag.isCopy,he=!(!C||P!==C.tId),pe=!(!T||P!==T.tId),fe=l.parentTId&&l.parentTId==P,ge=(ue||!pe)&&v.apply(E.edit.drag.prev,[E.treeId,f,ce],!!E.edit.drag.prev),me=(ue||!he)&&v.apply(E.edit.drag.next,[E.treeId,f,ce],!!E.edit.drag.next),ve=(ue||!fe)&&!(E.data.keep.leaf&&!ce.isParent)&&v.apply(E.edit.drag.inner,[E.treeId,f,ce],!!E.edit.drag.inner);if(ge||me||ve){var ye=e("#"+P+y.id.A,k),xe=ce.isLastNode?null:e("#"+ce.getNextNode().tId+y.id.A,k.next()),be=ye.offset().top,we=ye.offset().left,ke=ge?ve?.25:me?.5:1:-1,Ce=me?ve?.75:ge?.5:0:-1,Te=(n.clientY+K-be)/ye.height();if((1==ke||Te<=ke&&Te>=-.2)&&ge?(se=1-m.width(),de=be-m.height()/2,R=y.move.TYPE_PREV):(0==Ce||Te>=Ce&&Te<=1.2)&&me?(se=1-m.width(),de=null==xe||ce.isParent&&ce.open?be+ye.height()-m.height()/2:xe.offset().top-m.height()/2,R=y.move.TYPE_NEXT):ve?(se=5-m.width(),de=be,R=y.move.TYPE_INNER):i(),k&&(m.css({display:"block",top:de+"px",left:we+se+"px"}),ye.addClass(y.node.TMPTARGET_NODE+"_"+R),$==P&&D==R||(O=(new Date).getTime()),ce&&ce.isParent&&R==y.move.TYPE_INNER)){var Ne=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==ce.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===ce.tId&&(Ne=!1),Ne&&(window.zTreeMoveTimer=setTimeout(function(){R==y.move.TYPE_INNER&&ce&&ce.isParent&&!ce.open&&(new Date).getTime()-O>E.edit.drag.autoOpenTime&&v.apply(E.callback.beforeDragOpen,[E.treeId,ce],!0)&&(x.switchNode(E,ce),E.edit.drag.autoExpandTrigger&&E.treeObj.trigger(y.event.EXPAND,[E.treeId,ce]))},E.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=ce.tId)}}else i()}else R=y.move.TYPE_INNER,k&&v.apply(E.edit.drag.inner,[E.treeId,f,null],!!E.edit.drag.inner)?k.addClass(y.node.TMPTARGET_TREE):k=null,m.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);$=P,D=R,d.treeObj.trigger(y.event.DRAGMOVE,[n,d.treeId,f])}return!1}function a(n){function i(){if(_){if(!p)for(var e=0,t=f.length;e<t;e++)x.removeNode(d,f[e]);R==y.move.TYPE_INNER?x.addNodes(E,C,-1,T):x.addNodes(E,C.getParentNode(),R==y.move.TYPE_PREV?C.getIndex():C.getIndex()+1,T)}else if(p&&R==y.move.TYPE_INNER)x.addNodes(E,C,-1,T);else if(p)x.addNodes(E,C.getParentNode(),R==y.move.TYPE_PREV?C.getIndex():C.getIndex()+1,T);else if(R!=y.move.TYPE_NEXT)for(e=0,t=T.length;e<t;e++)x.moveNode(E,C,T[e],R,!1);else for(e=-1,t=T.length-1;e<t;t--)x.moveNode(E,C,T[t],R,!1);x.selectNodes(E,T);var i=w(T[0],d).get(0);x.scrollIntoView(i),d.treeObj.trigger(y.event.DROP,[n,E.treeId,T,C,R,p])}if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),$=null,D=null,N.unbind("mousemove",o),N.unbind("mouseup",a),N.unbind("selectstart",r),I.css("cursor","auto"),k&&(k.removeClass(y.node.TMPTARGET_TREE),P&&e("#"+P+y.id.A,k).removeClass(y.node.TMPTARGET_NODE+"_"+y.move.TYPE_PREV).removeClass(y.node.TMPTARGET_NODE+"_"+t.move.TYPE_NEXT).removeClass(y.node.TMPTARGET_NODE+"_"+t.move.TYPE_INNER)),v.showIfameMask(d,!1),u.showHoverDom=!0,0!=c.dragFlag){c.dragFlag=0;var l,s,h;for(l=0,s=f.length;l<s;l++)h=f[l],h.isParent&&c.dragNodeShowBefore[h.tId]&&!h.open&&(x.expandCollapseNode(d,h,!h.open),delete c.dragNodeShowBefore[h.tId]);g&&g.remove(),m&&m.remove();var p=(n.ctrlKey||n.metaKey)&&d.edit.drag.isMove&&d.edit.drag.isCopy||!d.edit.drag.isMove&&d.edit.drag.isCopy;if(!p&&k&&P&&f[0].parentTId&&P==f[0].parentTId&&R==y.move.TYPE_INNER&&(k=null),k){var C=null==P?null:b.getNodeCache(E,P);if(0==v.apply(d.callback.beforeDrop,[E.treeId,f,C,R,p],!0))return void x.selectNodes(S,f);var T=p?v.clone(f):f;R==y.move.TYPE_INNER&&v.canAsync(E,C)?x.asyncNode(E,C,!1,i):i()}else x.selectNodes(S,f),d.treeObj.trigger(y.event.DROP,[n,d.treeId,f,null,null,null])}}function r(){return!1}var l,s,d=b.getSetting(n.data.treeId),c=b.getRoot(d),u=b.getRoots();if(2==n.button||!d.edit.enable||!d.edit.drag.isCopy&&!d.edit.drag.isMove)return!0;var h=n.target,p=b.getRoot(d).curSelectedList,f=[];if(b.isSelectedNode(d,i))for(l=0,s=p.length;l<s;l++){if(p[l].editNameFlag&&v.eqs(h.tagName,"input")&&null!==h.getAttribute("treeNode"+y.id.INPUT))return!0;if(f.push(p[l]),f[0].parentTId!==p[l].parentTId){f=[i];break}}else f=[i];x.editNodeBlur=!0,x.cancelCurEditNode(d);var g,m,k,C,T,N=e(d.treeObj.get(0).ownerDocument),I=e(d.treeObj.get(0).ownerDocument.body),_=!1,E=d,S=d,$=null,D=null,P=null,R=y.move.TYPE_INNER,j=n.clientX,A=n.clientY,O=(new Date).getTime();return v.uCanDo(d)&&N.bind("mousemove",o),N.bind("mouseup",a),N.bind("selectstart",r),n.preventDefault&&n.preventDefault(),!0}},p={getAbs:function(e){var t=e.getBoundingClientRect(),n=document.body.scrollTop+document.documentElement.scrollTop,i=document.body.scrollLeft+document.documentElement.scrollLeft;return[t.left+i,t.top+n]},inputFocus:function(e){e.get(0)&&(e.focus(),v.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},showIfameMask:function(e,t){for(var n=b.getRoot(e);n.dragMaskList.length>0;)n.dragMaskList[0].remove(),n.dragMaskList.shift();if(t)for(var i=w("iframe",e),o=0,a=i.length;o<a;o++){var r=i.get(o),l=v.getAbs(r),s=w("<div id='zTreeMask_"+o+"' class='zTreeMask' style='top:"+l[1]+"px; left:"+l[0]+"px; width:"+r.offsetWidth+"px; height:"+r.offsetHeight+"px;'></div>",e);s.appendTo(w("body",e)),n.dragMaskList.push(s)}}},f={addEditBtn:function(e,t){if(!(t.editNameFlag||w(t,y.id.EDIT,e).length>0)&&v.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var n=w(t,y.id.A,e),i="<span class='"+y.className.BUTTON+" edit' id='"+t.tId+y.id.EDIT+"' title='"+v.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+y.id.EDIT+" style='display:none;'></span>";n.append(i),w(t,y.id.EDIT,e).bind("click",function(){return!(!v.uCanDo(e)||0==v.apply(e.callback.beforeEditName,[e.treeId,t],!0))&&(x.editNode(e,t),!1)}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||w(t,y.id.REMOVE,e).length>0)&&v.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var n=w(t,y.id.A,e),i="<span class='"+y.className.BUTTON+" remove' id='"+t.tId+y.id.REMOVE+"' title='"+v.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+y.id.REMOVE+" style='display:none;'></span>";n.append(i),w(t,y.id.REMOVE,e).bind("click",function(){return!(!v.uCanDo(e)||0==v.apply(e.callback.beforeRemove,[e.treeId,t],!0))&&(x.removeNode(e,t),e.treeObj.trigger(y.event.REMOVE,[e.treeId,t]),!1)}).bind("mousedown",function(e){return!0}).show()}},addHoverDom:function(e,t){b.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(x.addEditBtn(e,t),x.addRemoveBtn(e,t)),v.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,n){var i=b.getRoot(e),o=e.data.key.name,a=i.curEditNode;if(a){var r=i.curEditInput,l=t?t:n?a[o]:r.val();if(v.apply(e.callback.beforeRename,[e.treeId,a,l,n],!0)===!1)return!1;a[o]=l;var s=w(a,y.id.A,e);s.removeClass(y.node.CURSELECTED_EDIT),r.unbind(),x.setNodeName(e,a),a.editNameFlag=!1,i.curEditNode=null,i.curEditInput=null,x.selectNode(e,a,!1),e.treeObj.trigger(y.event.RENAME,[e.treeId,a,n])}return i.noSelection=!0,!0},editNode:function(e,t){var n=b.getRoot(e);if(x.editNodeBlur=!1,b.isSelectedNode(e,t)&&n.curEditNode==t&&t.editNameFlag)return void setTimeout(function(){v.inputFocus(n.curEditInput)},0);var i=e.data.key.name;t.editNameFlag=!0,x.removeTreeDom(e,t),x.cancelCurEditNode(e),x.selectNode(e,t,!1),w(t,y.id.SPAN,e).html("<input type=text class='rename' id='"+t.tId+y.id.INPUT+"' treeNode"+y.id.INPUT+" >");var o=w(t,y.id.INPUT,e);o.attr("value",t[i]),e.edit.editNameSelectAll?v.inputSelect(o):v.inputFocus(o),o.bind("blur",function(t){x.editNodeBlur||x.cancelCurEditNode(e)}).bind("keydown",function(t){"13"==t.keyCode?(x.editNodeBlur=!0,x.cancelCurEditNode(e)):"27"==t.keyCode&&x.cancelCurEditNode(e,null,!0)}).bind("click",function(e){return!1}).bind("dblclick",function(e){return!1}),w(t,y.id.A,e).addClass(y.node.CURSELECTED_EDIT),n.curEditInput=o,n.noSelection=!1,n.curEditNode=t},moveNode:function(e,t,n,i,o,a){var r=b.getRoot(e),l=e.data.key.children;if(t!=n&&(!e.data.keep.leaf||!t||t.isParent||i!=y.move.TYPE_INNER)){var s=n.parentTId?n.getParentNode():r,d=null===t||t==r;d&&null===t&&(t=r),d&&(i=y.move.TYPE_INNER);var c=t.parentTId?t.getParentNode():r;i!=y.move.TYPE_PREV&&i!=y.move.TYPE_NEXT&&(i=y.move.TYPE_INNER),i==y.move.TYPE_INNER&&(d?n.parentTId=null:(t.isParent||(t.isParent=!0,t.open=!!t.open,x.setNodeLineIcos(e,t)),n.parentTId=t.tId));var u,h;if(d)u=e.treeObj,h=u;else{if(a||i!=y.move.TYPE_INNER?a||x.expandCollapseNode(e,t.getParentNode(),!0,!1):x.expandCollapseNode(e,t,!0,!1),u=w(t,e),h=w(t,y.id.UL,e),u.get(0)&&!h.get(0)){var p=[];x.makeUlHtml(e,t,p,""),u.append(p.join(""))}h=w(t,y.id.UL,e)}var f=w(n,e);f.get(0)?u.get(0)||f.remove():f=x.appendNodes(e,n.level,[n],null,-1,!1,!0).join(""),h.get(0)&&i==y.move.TYPE_INNER?h.append(f):u.get(0)&&i==y.move.TYPE_PREV?u.before(f):u.get(0)&&i==y.move.TYPE_NEXT&&u.after(f);var g,m,v=-1,k=0,C=null,T=null,N=n.level;if(n.isFirstNode)v=0,s[l].length>1&&(C=s[l][1],C.isFirstNode=!0);else if(n.isLastNode)v=s[l].length-1,C=s[l][v-1],C.isLastNode=!0;else for(g=0,m=s[l].length;g<m;g++)if(s[l][g].tId==n.tId){v=g;break}if(v>=0&&s[l].splice(v,1),i!=y.move.TYPE_INNER)for(g=0,m=c[l].length;g<m;g++)c[l][g].tId==t.tId&&(k=g);if(i==y.move.TYPE_INNER?(t[l]||(t[l]=new Array),t[l].length>0&&(T=t[l][t[l].length-1],T.isLastNode=!1),t[l].splice(t[l].length,0,n),n.isLastNode=!0,
n.isFirstNode=1==t[l].length):t.isFirstNode&&i==y.move.TYPE_PREV?(c[l].splice(k,0,n),T=t,T.isFirstNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!0,n.isLastNode=!1):t.isLastNode&&i==y.move.TYPE_NEXT?(c[l].splice(k+1,0,n),T=t,T.isLastNode=!1,n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!0):(i==y.move.TYPE_PREV?c[l].splice(k,0,n):c[l].splice(k+1,0,n),n.parentTId=t.parentTId,n.isFirstNode=!1,n.isLastNode=!1),b.fixPIdKeyValue(e,n),b.setSonNodeLevel(e,n.getParentNode(),n),x.setNodeLineIcos(e,n),x.repairNodeLevelClass(e,n,N),!e.data.keep.parent&&s[l].length<1){s.isParent=!1,s.open=!1;var I=w(s,y.id.UL,e),_=w(s,y.id.SWITCH,e),E=w(s,y.id.ICON,e);x.replaceSwitchClass(s,_,y.folder.DOCU),x.replaceIcoClass(s,E,y.folder.DOCU),I.css("display","none")}else C&&x.setNodeLineIcos(e,C);T&&x.setNodeLineIcos(e,T),e.check&&e.check.enable&&x.repairChkClass&&(x.repairChkClass(e,s),x.repairParentChkClassWithSelf(e,s),s!=n.parent&&x.repairParentChkClassWithSelf(e,n)),a||x.expandCollapseParentNode(e,n.getParentNode(),!0,o)}},removeEditBtn:function(e,t){w(t,y.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){w(t,y.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,x.removeEditBtn(e,t),x.removeRemoveBtn(e,t),v.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,n){if(n!==t.level){var i=w(t,e),o=w(t,y.id.A,e),a=w(t,y.id.UL,e),r=y.className.LEVEL+n,l=y.className.LEVEL+t.level;i.removeClass(r),i.addClass(l),o.removeClass(r),o.addClass(l),a.removeClass(r),a.addClass(l)}},selectNodes:function(e,t){for(var n=0,i=t.length;n<i;n++)x.selectNode(e,t[n],n>0)}},g={tools:p,view:f,event:u,data:c};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,g);var m=e.fn.zTree,v=m._z.tools,y=m.consts,x=m._z.view,b=m._z.data,w=(m._z.event,v.$);b.exSetting(n),b.addInitBind(a),b.addInitUnBind(r),b.addInitCache(o),b.addInitNode(s),b.addInitProxy(l),b.addInitRoot(i),b.addZTreeTools(d);var k=x.cancelPreSelectedNode;x.cancelPreSelectedNode=function(e,t){for(var n=b.getRoot(e).curSelectedList,i=0,o=n.length;i<o&&(t&&t!==n[i]||(x.removeTreeDom(e,n[i]),!t));i++);k&&k.apply(x,arguments)};var C=x.createNodes;x.createNodes=function(e,t,n,i,o){C&&C.apply(x,arguments),n&&x.repairParentChkClassWithSelf&&x.repairParentChkClassWithSelf(e,i)};var T=x.makeNodeUrl;x.makeNodeUrl=function(e,t){return e.edit.enable?null:T.apply(x,arguments)};var N=x.removeNode;x.removeNode=function(e,t){var n=b.getRoot(e);n.curEditNode===t&&(n.curEditNode=null),N&&N.apply(x,arguments)};var I=x.selectNode;x.selectNode=function(e,t,n){var i=b.getRoot(e);return(!b.isSelectedNode(e,t)||i.curEditNode!=t||!t.editNameFlag)&&(I&&I.apply(x,arguments),x.addHoverDom(e,t),!0)};var _=v.uCanDo;v.uCanDo=function(e,t){var n=b.getRoot(e);return!(!t||!(v.eqs(t.type,"mouseover")||v.eqs(t.type,"mouseout")||v.eqs(t.type,"mousedown")||v.eqs(t.type,"mouseup")))||(n.curEditNode&&(x.editNodeBlur=!1,n.curEditInput.focus()),!n.curEditNode&&(!_||_.apply(x,arguments)))}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};(function(){"use strict";var e,t,n=this,i=this,o=i?i.document:null,a=(i?i.document.documentElement:null,/^(["'](\\.|[^"\\\n\r])*?["']|[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t])+?$/),r=/^-ms-/,l=/[\-_]([\da-z])/gi,s=/([A-Z])/g,d=/\./,c=/[-|+]?[\D]/gi,u=/\D/gi,h=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),p=/&/g,f=/=/,g=/[ ]+/g,m={};m.guid=1,m.getGuid=function(){return m.guid++},m.info=e=function(){function n(e,n){return e={href:i.location.href,param:i.location.search,referrer:o.referrer,pathname:i.location.pathname,hostname:i.location.hostname,port:i.location.port},n=e.href.split(/[\?#]/),e.param=e.param.replace("?",""),e.url=n[0],e.href.search("#")>-1&&(e.hashdata=t.last(n)),n=null,e.baseUrl=t.left(e.href,"?").replace(e.pathname,""),e}function a(t,n,i){return e.errorMsg&&e.errorMsg[t]?{className:t,errorCode:n,methodName:i,msg:e.errorMsg[t][n]}:{className:t,errorCode:n,methodName:i}}var r="0.0.1",l="",s=function(){console.error(t.toArray(arguments).join(":"))},d={BACKSPACE:8,TAB:9,RETURN:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,HOME:36,END:35,PAGEUP:33,PAGEDOWN:34,INSERT:45,SPACE:32},c=[{label:"SUN"},{label:"MON"},{label:"TUE"},{label:"WED"},{label:"THU"},{label:"FRI"},{label:"SAT"}],u=function(e,t,n,o,a,r){return i&&i.navigator?(e=navigator.userAgent.toLowerCase(),t=e.search(/mobile/g)!=-1,r,e.search(/iphone/g)!=-1?{name:"iphone",version:0,mobile:!0}:e.search(/ipad/g)!=-1?{name:"ipad",version:0,mobile:!0}:e.search(/android/g)!=-1?(o=/(android)[ \/]([\w.]+)/.exec(e)||[],r=o[2]||"0",{name:"android",version:r,mobile:t}):(n="",o=/(opr)[ \/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],a=o[1]||"",r=o[2]||"0","msie"==a&&(a="ie"),{name:a,version:r,mobile:t})):{}}(),h=!("undefined"==typeof window||"undefined"==typeof navigator||!i.document),p=i&&/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",f={},g=!!i&&("ontouchstart"in i||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0);return{errorMsg:f,version:r,baseUrl:l,onerror:s,eventKeys:d,weekNames:c,browser:u,isBrowser:h,supportTouch:g,wheelEnm:p,urlUtil:n,getError:a}}(),m.util=t=function(){function v(e,t){if(L(e))return[];var n,i=0,o=e.length,a=void 0===o||"function"==typeof e;if(a){for(n in e)if("undefined"!=typeof e[n]&&t.call(e[n],n,e[n])===!1)break}else for(;i<o&&("undefined"==typeof e[i]||t.call(e[i],i,e[i++])!==!1););return e}function y(e,t){if(L(e))return[];var n,i,o=0,a=e.length,r=[];if($(e)){for(n in e)if("undefined"!=typeof e[n]){if(i=void 0,(i=t.call(e[n],n,e[n]))===!1)break;r.push(i)}}else for(;o<a;)if("undefined"!=typeof e[o]){if(i=void 0,(i=t.call(e[o],o,e[o++]))===!1)break;r.push(i)}return r}function x(e,t){if(L(e))return-1;var n,i=0,o=e.length;if($(e))for(n in e){if("undefined"!=typeof e[n]&&P(t)&&t.call(e[n],n,e[n]))return n;if(e[n]==t)return n}else for(;i<o;){if("undefined"!=typeof e[i]&&P(t)&&t.call(e[i],i,e[i]))return i;if(e[i]==t)return i;i++}return-1}function b(e,t,n){var i,o,a;if(P(t)&&"undefined"==typeof n&&(n=t,t=0),"undefined"==typeof t&&(t=0),D(e)){for(i=0,o=e.length;i<o;i++)if("undefined"!=typeof e[i]){if((a=n.call(e[i],e[i]))===!1)break;"undefined"!=typeof a&&(t+=a)}return t}if($(e)){for(i in e)if("undefined"!=typeof e[i]){if((a=n.call(e[i],e[i]))===!1)break;"undefined"!=typeof a&&(t+=a)}return t}return console.error("argument error : ax5.util.sum - use Array or Object"),t}function w(e,t,n){var i,o,a;if(P(t)&&"undefined"==typeof n&&(n=t,t=0),"undefined"==typeof t&&(t=0),D(e)){for(i=0,o=e.length;i<o;i++)if("undefined"!=typeof e[i]){if((a=n.call(e[i],e[i]))===!1)break;"undefined"!=typeof a&&(t+=a)}return t/o}if($(e)){for(i in e)if("undefined"!=typeof e[i]){if((a=n.call(e[i],e[i]))===!1)break;"undefined"!=typeof a&&(t+=a)}return t/o}return console.error("argument error : ax5.util.sum - use Array or Object"),t}function k(e,t){var i,o,a;if(D(e)){for(i=0,o=e.length,a=e[i];i<o-1&&("undefined"==typeof e[i]||(a=t.call(n,a,e[++i]))!==!1););return a}if($(e)){for(i in e)if("undefined"!=typeof e[i]&&(a=t.call(n,a,e[i]))===!1)break;return a}return console.error("argument error : ax5.util.reduce - use Array or Object"),null}function C(e,t){for(var i=e.length-1,o=e[i];i>0&&("undefined"==typeof e[i]||(o=t.call(n,o,e[--i]))!==!1););return o}function T(e,t){if(L(e))return[];var n,i,o=0,a=e.length,r=[];if($(e))for(n in e)"undefined"!=typeof e[n]&&(i=t.call(e[n],n,e[n]))&&r.push(e[n]);else for(;o<a;)"undefined"!=typeof e[o]&&((i=t.call(e[o],o,e[o]))&&r.push(e[o]),o++);return r}function N(e){var t="";if(m.util.isArray(e)){var n=0,i=e.length;for(t+="[";n<i;n++)n>0&&(t+=","),t+=N(e[n]);t+="]"}else if(m.util.isObject(e)){t+="{";var o=[];v(e,function(e,t){o.push('"'+e+'": '+N(t))}),t+=o.join(", "),t+="}"}else t=m.util.isString(e)?'"'+e+'"':m.util.isNumber(e)?e:m.util.isUndefined(e)?"undefined":m.util.isFunction(e)?'"{Function}"':e;return t}function I(e,t){if(!t&&!a.test(e))return{error:500,msg:"syntax error"};try{return new Function("","return "+e)()}catch(n){return{error:500,msg:"syntax error"}}}function _(e){var t;return null!=e&&e==e.window?t="window":e&&1==e.nodeType?t="element":e&&11==e.nodeType?t="fragment":null===e?t="null":"undefined"==typeof e?t="undefined":"[object Object]"==he.call(e)?t="object":"[object Array]"==he.call(e)?t="array":"[object String]"==he.call(e)?t="string":"[object Number]"==he.call(e)?t="number":"[object NodeList]"==he.call(e)?t="nodelist":"function"==typeof e&&(t="function"),t}function E(e){return null!=e&&e==e.window}function S(e){return!(!e||1!=e.nodeType&&11!=e.nodeType)}function $(e){return"[object Object]"==he.call(e)}function D(e){return"[object Array]"==he.call(e)}function P(e){return"function"==typeof e}function R(e){return"[object String]"==he.call(e)}function j(e){return"[object Number]"==he.call(e)}function A(e){return!!("[object NodeList]"==he.call(e)||"undefined"!=typeof e&&e&&e[0]&&1==e[0].nodeType)}function O(e){return"undefined"==typeof e}function L(e){return"undefined"==typeof e||null===e||""===e}function M(e){return e instanceof Date&&!isNaN(e.valueOf())}function z(e){var t=!1;if(e)if(e instanceof Date&&!isNaN(e.valueOf()))t=!0;else{if(e.length>7&&te(e)instanceof Date)return!0;if(e=e.replace(/\D/g,""),e.length>7){var n=e.substr(4,2),i=e.substr(6,2);e=te(e),e.getMonth()==n-1&&e.getDate()==i&&(t=!0)}}else;return t}function q(e){if($(e)){var t=Object.keys(e),n={};return n[t[0]]=e[t[0]],n}return D(e)?e[0]:void console.error("ax5.util.object.first","argument type error")}function H(e){if($(e)){var t=Object.keys(e),n={};return n[t[t.length-1]]=e[t[t.length-1]],n}return D(e)?e[e.length-1]:void console.error("ax5.util.object.last","argument type error")}function K(e,t,n,i){var a;return"number"==typeof n&&(a=new Date,a.setDate(a.getDate()+n)),i=i||{},o.cookie=[escape(e),"=",escape(t),a?"; expires="+a.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}function F(e){for(var t=e+"=",n=o.cookie.split(";"),i=0,a=n.length;i<a;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1);if(r.indexOf(t)!=-1)return unescape(r.substring(t.length,r.length))}return""}function Q(e){return i.alert(N(e)),e}function B(e,t){return"undefined"==typeof e||"undefined"==typeof t?"":R(t)?e.indexOf(t)>-1?e.substr(0,e.indexOf(t)):"":j(t)?e.substr(0,t):""}function G(e,t){return"undefined"==typeof e||"undefined"==typeof t?"":(e=""+e,R(t)?e.lastIndexOf(t)>-1?e.substr(e.lastIndexOf(t)+1):"":j(t)?e.substr(e.length-t):"")}function W(e){return e.replace(r,"ms-").replace(l,function(e,t){return t.toUpperCase()})}function V(e){return W(e).replace(s,function(e,t){return"-"+t.toLowerCase()})}function U(e,t){var n,i=(""+e).split(d),o=Number(i[0])<0||"-0"==i[0],a=0;return i[0]=i[0].replace(c,""),i[1]?(i[1]=i[1].replace(u,""),a=Number(i[0]+"."+i[1])||0):a=Number(i[0])||0,n=o?-a:a,v(t,function(e,t){"round"==e&&(n=j(t)?t<0?+(Math.round(n+"e-"+Math.abs(t))+"e+"+Math.abs(t)):+(Math.round(n+"e+"+t)+"e-"+t):Math.round(n)),"floor"==e&&(n=Math.floor(n)),"ceil"==e?n=Math.ceil(n):"money"==e?n=function(e){var t=""+e;if(isNaN(t)||""==t)return"";var n=t.split(".");n[0]+=".";do n[0]=n[0].replace(h,"$1,$2");while(h.test(n[0]));return n.length>1?n.join(""):n[0].split(".")[0]}(n):"abs"==e?n=Math.abs(Number(n)):"byte"==e&&(n=function(e){e=Number(n);var t="KB",i=e/1024;return i/1024>1&&(t="MB",i/=1024),i/1024>1&&(t="GB",i/=1024),U(i,{round:1})+t}(n))}),n}function Y(e){return"undefined"!=typeof e.length?Array.prototype.slice.call(e):[]}function X(e,t){var n=t.length,i=e.length,o=0;if("number"==typeof n)for(;o<n;o++)e[i++]=t[o];else for(;void 0!==t[o];)e[i++]=t[o++];return e.length=i,e}function J(e,t){var n;return R(e)&&"undefined"!=typeof t&&"param"==t?e:R(e)&&"undefined"!=typeof t&&"object"==t||R(e)&&"undefined"==typeof t?(n={},v(e.split(p),function(){var e=this.split(f);n[e[0]]?(R(n[e[0]])&&(n[e[0]]=[n[e[0]]]),n[e[0]].push(e[1])):n[e[0]]=e[1]}),n):(n=[],v(e,function(e,t){n.push(e+"="+escape(t))}),n.join("&"))}function Z(){m.info.onerror.apply(this,arguments)}function ee(e,t,n,i,o,a){var r,l;return l=new Date,"undefined"==typeof i&&(i=23),"undefined"==typeof o&&(o=59),r=new Date(Date.UTC(e,t,n||1,i,o,a||0)),0==t&&1==n&&r.getUTCHours()+r.getTimezoneOffset()/60<0?r.setUTCHours(0):r.setUTCHours(r.getUTCHours()+r.getTimezoneOffset()/60),r}function te(t,n){var i,o,a,r,l,s,d,c,u,h,p=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,f=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i;if(R(t))if(0==t.length)t=new Date;else if(t.length>15)f.test(t)||p.test(t)?t=new Date(t):(s=t.split(/ /g),u=s[0].split(/\D/g),i=u[0],o=parseFloat(u[1]),a=parseFloat(u[2]),c=s[1]||"09:00",d=c.substring(0,5).split(":"),r=parseFloat(d[0]),l=parseFloat(d[1]),"AM"!==G(c,2)&&"PM"!==G(c,2)||(r+=12),t=ee(i,o-1,a,r,l));else if(14==t.length)h=t.replace(/\D/g,""),t=ee(h.substr(0,4),h.substr(4,2)-1,U(h.substr(6,2)),U(h.substr(8,2)),U(h.substr(10,2)),U(h.substr(12,2)));else if(t.length>7)h=t.replace(/\D/g,""),t=ee(h.substr(0,4),h.substr(4,2)-1,U(h.substr(6,2)));else if(t.length>4)h=t.replace(/\D/g,""),t=ee(h.substr(0,4),h.substr(4,2)-1,1);else{if(t.length>2)return h=t.replace(/\D/g,""),ee(h.substr(0,4),h.substr(4,2)-1,1);t=new Date}return"undefined"==typeof n?t:(n.add&&(t=function(e,t){var n,i,o,a,r=864e5;return"undefined"!=typeof t.d?e.setTime(e.getTime()+t.d*r):"undefined"!=typeof t.m?(n=e.getFullYear(),i=e.getMonth(),o=e.getDate(),n+=parseInt(t.m/12),i+=t.m%12,a=oe(n,i),a<o&&(o=a),e=new Date(n,i,o,12)):"undefined"!=typeof t.y?e.setTime(e.getTime()+365*t.y*r):e.setTime(e.getTime()+t.y*r),e}(new Date(t),n.add)),n["return"]?function(){var i,o,a,r,l,s,d,c=n["return"];i=t.getUTCFullYear(),o=ae(t.getMonth()+1,2),a=ae(t.getDate(),2),r=ae(t.getHours(),2),l=ae(t.getMinutes(),2),s=ae(t.getSeconds(),2),d=t.getDay();var u=/[^y]*(yyyy)[^y]*/gi;u.exec(c);var h=RegExp.$1,p=/[^m]*(MM)[^m]*/g;p.exec(c);var f=RegExp.$1,g=/[^d]*(dd)[^d]*/gi;g.exec(c);var m=RegExp.$1,v=/[^h]*(hh)[^h]*/gi;v.exec(c);var y=RegExp.$1,x=/[^m]*(mm)[^i]*/g;x.exec(c);var b=RegExp.$1,w=/[^s]*(ss)[^s]*/gi;w.exec(c);var k=RegExp.$1,C=/[^d]*(dw)[^w]*/gi;C.exec(c);var T=RegExp.$1;return"yyyy"===h&&(c=c.replace(h,G(i,h.length))),"MM"===f&&(1==f.length&&(o=t.getMonth()+1),c=c.replace(f,o)),"dd"===m&&(1==m.length&&(a=t.getDate()),c=c.replace(m,a)),"hh"===y&&(c=c.replace(y,r)),"mm"===b&&(c=c.replace(b,l)),"ss"===k&&(c=c.replace(k,s)),"dw"==T&&(c=c.replace(T,e.weekNames[d].label)),c}():t)}function ne(e,t){function n(e){return Math.floor(e.getTime()/r)*r}var i,o,a=te(e),r=864e5,l=new Date;return"undefined"==typeof t?i=U((n(a)-n(l))/r,{floor:!0}):(i=U((n(a)-n(l))/r,{floor:!0}),t.today&&(l=te(t.today),i=U((n(a)-n(l))/r,{floor:!0})),t.thisYear&&(o=new Date(l.getFullYear(),a.getMonth(),a.getDate()),i=U((n(o)-n(l))/r,{floor:!0}),i<0&&(o=new Date(l.getFullYear()+1,a.getMonth(),a.getDate()),i=U((n(o)-n(l))/r,{floor:!0}))),t.age&&(o=new Date(l.getFullYear(),a.getMonth(),a.getDate()),i=o.getFullYear()-a.getFullYear()),i)}function ie(e){var t=te(e);return{year:t.getFullYear(),month:t.getMonth()+1,count:parseInt(t.getDate()/7+1)}}function oe(e,t){return 3==t||5==t||8==t||10==t?30:1==t?e%4==0&&e%100!=0||e%400==0?29:28:31}function ae(e,t,n,i){var o=e.toString(i||10);return re(n||"0",t-o.length)+o}function re(e,t){return t<1?"":new Array(t+1).join(e)}function le(e,t){if(e)for(;function(){var n=!0;if("undefined"==typeof t)e=!!e.parentNode&&e.parentNode;else if(P(t))n=t(e);else if($(t))for(var i in t)if("tagname"===i){if(e.tagName.toLocaleLowerCase()!=t[i]){n=!1;break}}else if("clazz"===i||"class_name"===i){if(!("className"in e)){n=!1;break}for(var o=e.className.split(g),a=!1,r=0;r<o.length;r++)if(o[r]==t[i]){a=!0;break}n=a}else{if(!e.getAttribute){n=!1;break}if(e.getAttribute(i)!=t[i]){n=!1;break}}return!n}();){if(!e.parentNode||!e.parentNode.parentNode){e=!1;break}e=e.parentNode}return e}function se(e){var t=/\D?(\d+)([a-zA-Z%]*)/i,n=(""+e).match(t),i=n[2]||"px";return n[1]+i}function de(e){var t;if($(e)){t="";for(var n in e)t+=n+":"+e[n]+";";return t}if(R(e)){t={};var i=e.split(/[ ]*;[ ]*/g);return i.forEach(function(e){if(""!==(e=e.trim())){var n=e.split(/[ ]*:[ ]*/g);t[n[0]]=n[1]}}),t}}function ce(e){if(!e)var e=window.event;return e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}function ue(e){var n,i;if("object"==("undefined"==typeof e?"undefined":_typeof(e))){if(t.isArray(e)){i=e.length,n=new Array(i);for(var o=0;o<i;o++)n[o]=ue(e[o]);return n}return jQuery.extend({},e)}return e}var he=Object.prototype.toString,pe=function(){var e={textRange:{selectAll:function(e,t,n){},arr:function(e,t,n){t.moveStart("character",n[0]),t.collapse(),t.moveEnd("character",n[1])},start:function(e,t,n){t.moveStart("character",0),t.collapse()},end:function(e,t,n){t.moveStart("character",t.text.length),t.collapse()}},range:{selectAll:function(e,t,n){t.selectNodeContents(e)},arr:function(e,t,n){$(n[0])?(t.setStart(n[0].node,n[0].offset),t.setEnd(n[1].node,n[1].offset)):(t.setStart(e.firstChild,n[0]),t.setEnd(e.firstChild,n[1]))},start:function(e,t,n){t.selectNodeContents(e),t.collapse(!0)},end:function(e,t,n){t.selectNodeContents(e),t.collapse(!1)}}};return function(t,n){var i,a,r;if(t instanceof jQuery&&(t=t.get(0)),t){if(o.body.createTextRange?(i=document.body.createTextRange(),i.moveToElementText(t),a="textRange"):window.getSelection&&(r=window.getSelection(),i=document.createRange(),a="range"),"undefined"==typeof n)e[a].selectAll.call(this,t,i,n);else if(D(n))e[a].arr.call(this,t,i,n);else for(var l in e[a])if(n==l){e[a][l].call(this,t,i,n);break}o.body.createTextRange?(i.select(),t.focus()):window.getSelection&&(t.focus(),r.removeAllRanges(),r.addRange(i))}}}(),fe=function(e,t,n){var i,o,a=function(){var a=Y(arguments);o&&clearTimeout(o),i?(i&&clearTimeout(i),i=setTimeout(function(t){e.apply(this,t)}.bind(this,a),t)):i=setTimeout(function(t){e.apply(this,t)}.bind(this,a),n?0:t),o=setTimeout(function(){clearTimeout(i),i=null},t)};return a.cancel=function(){clearTimeout(i),clearTimeout(o),i=null},a};return{alert:Q,each:v,map:y,search:x,reduce:k,reduceRight:C,filter:T,sum:b,avg:w,toJson:N,parseJson:I,first:q,last:H,deepCopy:ue,left:B,right:G,getType:_,isWindow:E,isElement:S,isObject:$,isArray:D,isFunction:P,isString:R,isNumber:j,isNodelist:A,isUndefined:O,isNothing:L,setCookie:K,getCookie:F,camelCase:W,snakeCase:V,number:U,toArray:Y,merge:X,param:J,error:Z,date:te,dday:ne,daysOfMonth:oe,weeksOfMonth:ie,setDigit:ae,times:re,findParentNode:le,cssNumber:se,css:de,isDate:M,isDateFormat:z,stopEvent:ce,selectRange:pe,debounce:fe}}(),"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=m:n.ax5=function(){return m}()}).call("undefined"!=typeof window?window:void 0),ax5.def={},ax5.info.errorMsg.ax5dialog={501:"Duplicate call error"},ax5.info.errorMsg.ax5picker={401:"Can not find target element",402:"Can not find boundID",501:"Can not find content key"},ax5.info.errorMsg["single-uploader"]={460:"There are no files to be uploaded.",461:"There is no uploaded files."},ax5.info.errorMsg.ax5calendar={401:"Can not find target element"},ax5.info.errorMsg.ax5formatter={401:"Can not find target element",402:"Can not find boundID",501:"Can not find pattern"},ax5.info.errorMsg.ax5menu={501:"Can not find menu item"},ax5.info.errorMsg.ax5select={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},ax5.info.errorMsg.ax5combobox={401:"Can not find target element",402:"Can not find boundID",501:"Can not find option"},function(){"use strict";var e=/^\s*|\s*$/g;Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(o){if("object"!==("undefined"==typeof o?"undefined":_typeof(o))&&("function"!=typeof o||null===o))throw new TypeError("type err");var a,r,l=[];for(a in o)e.call(o,a)&&l.push(a);if(t)for(r=0;r<i;r++)e.call(o,n[r])&&l.push(n[r]);return l}}()),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw TypeError();var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError();var i,o=arguments[1];for(i=0;i<n;i++)i in t&&e.call(o,t[i],i,t)}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw TypeError("function");var n=[].slice,i=n.call(arguments,1),o=this,a=function(){return o.apply(this instanceof t?this:e,i.concat(n.call(arguments)))};return t.prototype=o.prototype,a.prototype=new t,a}),function(){if(!document.querySelectorAll&&!document.querySelector&&document.createStyleSheet){var e=document.createStyleSheet(),t=function(t,n){var i,o=document.all,a=o.length,r=[];for(e.addRule(t,"foo:bar"),i=0;i<a&&!("bar"===o[i].currentStyle.foo&&(r.push(o[i]),r.length>n));i+=1);return e.removeRule(0),r};document.querySelectorAll=function(e){return t(e,1/0)},document.querySelector=function(e){return t(e,1)[0]||null}}}(),String.prototype.trim||!function(){String.prototype.trim=function(){return this.replace(e,"")}}(),window.JSON||(window.JSON={parse:function(e){return new Function("","return "+e)()},stringify:function(){var e,t=/["]/g;return e=function(n){var i,o,a;switch(i="undefined"==typeof n?"undefined":_typeof(n)){case"string":return'"'+n.replace(t,'\\"')+'"';case"number":case"boolean":return n.toString();case"undefined":return"undefined";case"function":return'""';case"object":if(!n)return"null";if(i="",n.splice){for(o=0,a=n.length;o<a;o++)i+=","+e(n[o]);return"["+i.substr(1)+"]"}for(o in n)n.hasOwnProperty(o)&&void 0!==n[o]&&"function"!=typeof n[o]&&(i+=',"'+o+'":'+e(n[o]));return"{"+i.substr(1)+"}"}}}()}),function(){if(!document.documentMode||document.documentMode>=9)return!1;var e=Array.prototype.splice;Array.prototype.splice=function(){var t=Array.prototype.slice.call(arguments);return"undefined"==typeof t[1]&&(t[1]=this.length-t[0]),e.apply(this,t)}}(),function(){var e=Array.prototype.slice;try{e.call(document.documentElement)}catch(t){Array.prototype.slice=function(t,n){if(n="undefined"!=typeof n?n:this.length,"[object Array]"===Object.prototype.toString.call(this))return e.call(this,t,n);var i,o,a=[],r=this.length,l=t||0;l=l>=0?l:Math.max(0,r+l);var s="number"==typeof n?Math.min(n,r):r;if(n<0&&(s=r+n),o=s-l,o>0)if(a=new Array(o),this.charAt)for(i=0;i<o;i++)a[i]=this.charAt(l+i);else for(i=0;i<o;i++)a[i]=this[l+i];return a}}}(),function(e){for(var t,n,i={},o=function(){},a="memory".split(","),r="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=a.pop();)e[t]=e[t]||i;for(;n=r.pop();)e[n]=e[n]||o}(window.console||{});var t=document.getElementsByTagName("html")[0];document.getElementsByTagName("body")[0];window.innerWidth||(window.innerWidth=t.clientWidth),window.innerHeight||(window.innerHeight=t.clientHeight),window.scrollX||(window.scrollX=window.pageXOffset||t.scrollLeft),window.scrollY||(window.scrollY=window.pageYOffset||t.scrollTop)}.call(window),ax5.ui=function(){function e(){this.config={},this.name="root",this.setConfig=function(e,t){return jQuery.extend(!0,this.config,e),"undefined"!=typeof t&&t!==!0||this.init(),this},this.init=function(){console.log(this.config)},this.bindWindowResize=function(e){setTimeout(function(){jQuery(window).resize(function(){this.bindWindowResize__&&clearTimeout(this.bindWindowResize__),this.bindWindowResize__=setTimeout(function(){e.call(this)}.bind(this),10)}.bind(this))}.bind(this),100)},this.stopEvent=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1},this.toString=function(){return this.name+"@"+this.version},this.main=function(){}.apply(this,arguments)}function t(e,t){if(!e||!e.className)throw"invalid call";var n=e.classStore?e.classStore:ax5.ui;if(!n)throw"invalid classStore";ax5.def[e.className]={version:e.version};var i=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2])}},o=function(e,t,n){return n.name=e,n.version=t,n.instanceId=ax5.getGuid(),n},a=function(t){var n=e.superClass?e.superClass:ax5.ui.root;if(!ax5.util.isFunction(n))throw"invalid superClass";n.call(this),t.prototype=new n},r=function l(){if(!(this&&this instanceof l))throw"invalid call";var n=i(t,arguments);return o(e.className,e.version||"",n)};a.call(this,t),n[e.className]=r}return{root:e,addClass:t}}(),function(e,t){t(e.mustache={})}(window.ax5,function(e){function t(e){return"function"==typeof e}function n(e){return g(e)?"array":"undefined"==typeof e?"undefined":_typeof(e)}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t in e}function a(e,t){return m.call(e,t)}function r(e){return!a(v,e)}function l(e){return String(e).replace(/[&<>"'\/]/g,function(e){return y[e]})}function s(t,n){function o(){if(v&&!y)for(;m.length;)delete f[m.pop()];else m=[];v=!1,y=!1}function a(e){if("string"==typeof e&&(e=e.split(b,2)),!g(e)||2!==e.length)throw new Error("Invalid tags: "+e);l=new RegExp(i(e[0])+"\\s*"),s=new RegExp("\\s*"+i(e[1])),h=new RegExp("\\s*"+i("}"+e[1]))}if(!t)return[];var l,s,h,p=[],f=[],m=[],v=!1,y=!1;a(n||e.tags);for(var T,N,I,_,E,S,$=new u(t);!$.eos();){if(T=$.pos,I=$.scanUntil(l))for(var D=0,P=I.length;D<P;++D)_=I.charAt(D),r(_)?m.push(f.length):y=!0,f.push(["text",_,T,T+1]),T+=1,"\n"===_&&o();if(!$.scan(l))break;if(v=!0,N=$.scan(C)||"name",$.scan(x),"="===N?(I=$.scanUntil(w),$.scan(w),$.scanUntil(s)):"{"===N?(I=$.scanUntil(h),$.scan(k),$.scanUntil(s),N="&"):I=$.scanUntil(s),!$.scan(s))throw new Error("Unclosed tag at "+$.pos);if(E=[N,I,T,$.pos],f.push(E),"#"===N||"^"===N)p.push(E);else if("/"===N){if(S=p.pop(),!S)throw new Error('Unopened section "'+I+'" at '+T);if(S[1]!==I)throw new Error('Unclosed section "'+S[1]+'" at '+T)}else"name"===N||"{"===N||"&"===N?y=!0:"="===N&&a(I)}if(S=p.pop())throw new Error('Unclosed section "'+S[1]+'" at '+$.pos);return c(d(f))}function d(e){for(var t,n,i=[],o=0,a=e.length;o<a;++o)t=e[o],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}function c(e){for(var t,n,i=[],o=i,a=[],r=0,l=e.length;r<l;++r)switch(t=e[r],t[0]){case"#":case"^":o.push(t),a.push(t),o=t[4]=[];break;case"/":n=a.pop(),n[5]=t[2],o=a.length>0?a[a.length-1][4]:i;break;default:o.push(t)}return i}function u(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view,"@each":function(){var e=[];for(var t in this)e.push({"@key":t,"@value":this[t]});return e}},this.parent=t}function p(){this.cache={}}var f=Object.prototype.toString,g=Array.isArray||function(e){return"[object Array]"===f.call(e)},m=RegExp.prototype.test,v=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},x=/\s*/,b=/\s+/,w=/\s*=/,k=/\s*\}/,C=/#|\^|\/|>|\{|&|=|!/;u.prototype.eos=function(){return""===this.tail},u.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},u.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},h.prototype.push=function(e){return new h(e,this)},h.prototype.lookup=function(e){var n,i=this.cache;if(i.hasOwnProperty(e))n=i[e];else{for(var a,r,l=this,s=!1;l;){if(e.indexOf(".")>0)for(n=l.view,a=e.split("."),r=0;null!=n&&r<a.length;)r===a.length-1&&(s=o(n,a[r])),n=n[a[r++]];else n=l.view[e],s=o(l.view,e);if(s)break;l=l.parent}i[e]=n}return t(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(e,t){var n=this.cache,i=n[e];return null==i&&(i=n[e]=s(e,t)),i},p.prototype.render=function(e,t,n){var i=this.parse(e),o=t instanceof h?t:new h(t);return this.renderTokens(i,o,n,e)},p.prototype.renderTokens=function(e,t,n,i){for(var o,a,r,l="",s=0,d=e.length;s<d;++s)r=void 0,o=e[s],a=o[0],"#"===a?r=this.renderSection(o,t,n,i):"^"===a?r=this.renderInverted(o,t,n,i):">"===a?r=this.renderPartial(o,t,n,i):"&"===a?r=this.unescapedValue(o,t):"name"===a?r=this.escapedValue(o,t):"text"===a&&(r=this.rawValue(o)),void 0!==r&&(l+=r);return l},p.prototype.renderSection=function(e,n,i,o){function a(e){return r.render(e,n,i)}var r=this,l="",s=n.lookup(e[1]);if(s){if(g(s))for(var d=0,c=s.length;d<c;++d)s[d]&&(s[d]["@i"]=d,s[d]["@first"]=0===d,l+=this.renderTokens(e[4],n.push(s[d]),i,o));else if("object"===("undefined"==typeof s?"undefined":_typeof(s))||"string"==typeof s||"number"==typeof s)l+=this.renderTokens(e[4],n.push(s),i,o);else if(t(s)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");s=s.call(n.view,o.slice(e[3],e[5]),a),null!=s&&(l+=s)}else l+=this.renderTokens(e[4],n,i,o);return l}},p.prototype.renderInverted=function(e,t,n,i){var o=t.lookup(e[1]);if(!o||g(o)&&0===o.length)return this.renderTokens(e[4],t,n,i)},p.prototype.renderPartial=function(e,n,i){if(i){var o=t(i)?i(e[1]):i[e[1]];return null!=o?this.renderTokens(this.parse(o),n,i,o):void 0}},p.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},p.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},p.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.1.3",e.tags=["{{","}}"];var T=new p;e.clearCache=function(){return T.clearCache()},e.parse=function(e,t){return T.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,t,i)},e.to_html=function(n,i,o,a){var r=e.render(n,i,o);return t(a)?void a(r):r},e.escape=l,e.Scanner=u,e.Context=h,e.Writer=p}),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"dialog",version:"0.8.8"},function(){var i=function(){var i,o=this;this.instanceId=ax5.getGuid(),this.config={id:"ax5-dialog-"+this.instanceId,clickEventName:"click",theme:"default",width:300,title:"",msg:"",lang:{ok:"ok",cancel:"cancel"},animateTime:150},this.activeDialog=null,i=this.config;var a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),t=null,!0},r=function(t,n){var o={dialogId:t,title:n.title||i.title||"",msg:(n.msg||i.msg||"").replace(/\n/g,"<br/>"),input:n.input,btns:n.btns,_crlf:function(){return this.replace(/\n/g,"<br/>")}};try{return e.tmpl.get.call(this,"dialogDisplay",o)}finally{o=null}},l=function(e,t){var n,o={};e.id=e.id||i.id,n={width:e.width},jQuery(document.body).append(r.call(this,e.id,e)),this.activeDialog=jQuery("#"+e.id),this.activeDialog.css({width:n.width}),e.height=n.height=this.activeDialog.height(),"undefined"==typeof e.position||"center"===e.position?(o.top=jQuery(window).height()/2-n.height/2,o.left=jQuery(window).width()/2-n.width/2):(o.left=e.position.left||0,o.top=e.position.top||0),i.zIndex&&(o["z-index"]=i.zIndex),this.activeDialog.css(o),"prompt"===e.dialogType?this.activeDialog.find("[data-dialog-prompt]").get(0).focus():this.activeDialog.find("[data-dialog-btn]").get(0).focus(),this.activeDialog.find("[data-dialog-btn]").on(i.clickEventName,function(n){d.call(this,n||window.event,e,t)}.bind(this)),jQuery(window).bind("keydown.ax5dialog",function(n){
c.call(this,n||window.event,e,t)}.bind(this)),jQuery(window).bind("resize.ax5dialog",function(e){s.call(this,e||window.event)}.bind(this)),a.call(this,e,{self:this,state:"open"}),o=null,n=null},s=function(e){if(!this.activeDialog)return this;var t=o.dialogConfig,n={width:t.width,height:t.height};return"undefined"==typeof t.position||"center"===t.position?(n.top=window.innerHeight/2-n.height/2,n.left=window.innerWidth/2-n.width/2):(n.left=t.position.left||0,n.top=t.position.top||0),n.left<0&&(n.left=0),n.top<0&&(n.top=0),this.activeDialog.css(n),t=null,n=null,this},d=function(e,t,i,o,a){var r;if(e.srcElement&&(e.target=e.srcElement),o=n.findParentNode(e.target,function(e){if(e.getAttribute("data-dialog-btn"))return!0})){if(a=o.getAttribute("data-dialog-btn"),r={self:this,key:a,value:t.btns[a],dialogId:t.id,btnTarget:o},"prompt"===t.dialogType){var l=null;for(var s in t.input)if(r[s]=this.activeDialog.find("[data-dialog-prompt="+s+"]").val(),""==r[s]||null==r[s]){l=s;break}}if(t.btns[a].onClick)t.btns[a].onClick.call(r,a);else if("alert"===t.dialogType)i&&i.call(r,a),this.close({doNotCallback:!0});else if("confirm"===t.dialogType)i&&i.call(r,a),this.close({doNotCallback:!0});else if("prompt"===t.dialogType){if("ok"===a&&l)return this.activeDialog.find('[data-dialog-prompt="'+l+'"]').get(0).focus(),!1;i&&i.call(r,a),this.close({doNotCallback:!0})}}r=null,t=null,i=null,o=null,a=null},c=function(e,t,n,i,o){var a,r=null;if(e.keyCode==ax5.info.eventKeys.ESC&&this.close(),"prompt"===t.dialogType&&e.keyCode==ax5.info.eventKeys.RETURN){a={self:this,key:o,value:t.btns[o],dialogId:t.id,btnTarget:i};for(var l in t.input)if(a[l]=this.activeDialog.find("[data-dialog-prompt="+l+"]").val(),""==a[l]||null==a[l]){r=l;break}if(r)return a=null,r=null,!1;n&&n.call(a,o),this.close({doNotCallback:!0})}a=null,r=null,t=null,n=null,i=null,o=null};this.init=function(){this.onStateChanged=i.onStateChanged},this.alert=function(e,t,a){return n.isString(e)&&(e={title:i.title,msg:e}),this.activeDialog?(a?console.log(ax5.info.getError("ax5dialog","501","alert")):setTimeout(function(){this.alert(e,t,1)}.bind(this),Number(i.animateTime)+100),this):(o.dialogConfig={},jQuery.extend(!0,o.dialogConfig,i,e),e=o.dialogConfig,e.dialogType="alert",e.theme=e.theme||i.theme||"",e.callback=t,"undefined"==typeof e.btns&&(e.btns={ok:{label:i.lang.ok,theme:e.theme}}),l.call(this,e,t),this)},this.confirm=function(e,t,a){return n.isString(e)&&(e={title:i.title,msg:e}),this.activeDialog?(a?console.log(ax5.info.getError("ax5dialog","501","confirm")):setTimeout(function(){this.confirm(e,t,1)}.bind(this),Number(i.animateTime)+100),this):(o.dialogConfig={},jQuery.extend(!0,o.dialogConfig,i,e),e=o.dialogConfig,e.dialogType="confirm",e.theme=e.theme||i.theme||"",e.callback=t,"undefined"==typeof e.btns&&(e.btns={ok:{label:i.lang.ok,theme:e.theme},cancel:{label:i.lang.cancel}}),l.call(this,e,t),this)},this.prompt=function(e,t,a){return n.isString(e)&&(e={title:i.title,msg:e}),this.activeDialog?(a?console.log(ax5.info.getError("ax5dialog","501","prompt")):setTimeout(function(){this.prompt(e,t,1)}.bind(this),Number(i.animateTime)+100),this):(o.dialogConfig={},jQuery.extend(!0,o.dialogConfig,i,e),e=o.dialogConfig,e.dialogType="prompt",e.theme=e.theme||i.theme||"",e.callback=t,"undefined"==typeof e.input&&(e.input={value:{label:""}}),"undefined"==typeof e.btns&&(e.btns={ok:{label:i.lang.ok,theme:e.theme},cancel:{label:i.lang.cancel}}),l.call(this,e,t),this)},this.close=function(e){var t,n;return this.activeDialog&&(t=o.dialogConfig,this.activeDialog.addClass("destroy"),jQuery(window).unbind("keydown.ax5dialog"),jQuery(window).unbind("resize.ax5dialog"),setTimeout(function(){this.activeDialog&&(this.activeDialog.remove(),this.activeDialog=null),n={self:this,state:"close",dialogId:t.id},!t.callback||e&&e.doNotCallback||t.callback.call(n),t&&t.onStateChanged?t.onStateChanged.call(n,n):this.onStateChanged&&this.onStateChanged.call(n,n),t=null,n=null}.bind(this),i.animateTime)),this},this.main=function(){t.dialog_instance=t.dialog_instance||[],t.dialog_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.dialog}(),function(){var e=ax5.ui.dialog,t=function(e){return' \n        <div id="{{dialogId}}" data-ax5-ui="dialog" class="ax5-ui-dialog {{theme}}">\n            <div class="ax-dialog-header">\n                {{{title}}}\n            </div>\n            <div class="ax-dialog-body">\n                <div class="ax-dialog-msg">{{{msg}}}</div>\n                \n                {{#input}}\n                <div class="ax-dialog-prompt">\n                    {{#@each}}\n                    <div class="form-group">\n                    {{#@value.label}}\n                    <label>{{#_crlf}}{{{.}}}{{/_crlf}}</label>\n                    {{/@value.label}}\n                    <input type="{{@value.type}}" placeholder="{{@value.placeholder}}" class="form-control {{@value.theme}}" data-dialog-prompt="{{@key}}" style="width:100%;" value="{{@value.value}}" />\n                    {{#@value.help}}\n                    <p class="help-block">{{#_crlf}}{{.}}{{/_crlf}}</p>\n                    {{/@value.help}}\n                    </div>\n                    {{/@each}}\n                </div>\n                {{/input}}\n                \n                <div class="ax-dialog-buttons">\n                    <div class="ax-button-wrap">\n                    {{#btns}}\n                        {{#@each}}\n                        <button type="button" data-dialog-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{@value.label}}</button>\n                        {{/@each}}\n                    {{/btns}}\n                    </div>\n                </div>\n            </div>\n        </div>  \n        '};e.tmpl={dialogDisplay:t,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"mask",version:"0.7.6"},function(){var i=function(){var i,o=this;this.instanceId=ax5.getGuid(),this.config={theme:"",target:jQuery(document.body).get(0)},this.maskContent="",this.status="off",i=this.config;var a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),e=null,t=null,!0},r=function(t){return"undefined"==typeof t.templateName&&(t.templateName="defaultMask"),e.tmpl.get.call(this,t.templateName,t)},l=function(e){this.maskContent=e};this.init=function(){this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.config.content&&l.call(this,this.config.content)},this.open=function(e){"on"===this.status&&this.close(),e&&e.content&&l.call(this,e.content),e&&"undefined"==typeof e.templateName&&(e.templateName="defaultMask"),o.maskConfig={},jQuery.extend(!0,o.maskConfig,this.config,e);var t,n=o.maskConfig,i=n.target,s=jQuery(i),d="ax-mask-"+ax5.getGuid(),c={},u={},h=n.templateName,p=r({theme:n.theme,maskId:d,body:this.maskContent,templateName:h});return jQuery(document.body).append(p),i&&i!==jQuery(document.body).get(0)&&(c={position:n.position||"absolute",left:s.offset().left,top:s.offset().top,width:s.outerWidth(),height:s.outerHeight()},"undefined"!=typeof o.maskConfig.zIndex&&(c["z-index"]=o.maskConfig.zIndex),s.addClass("ax-masking")),this.$mask=t=jQuery("#"+d),this.$target=s,this.status="on",t.css(c),n.onClick&&t.on("click",function(e){u={self:o,state:"open",type:"click"},o.maskConfig.onClick.call(u,u)}),a.call(this,null,{self:this,state:"open"}),e=null,n=null,i=null,s=null,d=null,t=null,c=null,u=null,h=null,p=null,this},this.close=function(e){if(this.$mask){var t=function(){this.status="off",this.$mask.remove(),this.$target.removeClass("ax-masking"),a.call(this,null,{self:this,state:"close"})};e?setTimeout(function(){t.call(this)}.bind(this),e):t.call(this)}return this},this.pullRequest=function(){console.log("test pullRequest01"),console.log("test pullRequest02")},this.main=function(){t.mask_instance=t.mask_instance||[],t.mask_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.mask}(),function(){var e=ax5.ui.mask,t=function(e){return'\n            <div class="ax-mask {{theme}}" id="{{maskId}}">\n                <div class="ax-mask-bg"></div>\n                <div class="ax-mask-content">\n                    <div class="ax-mask-body">\n                    {{{body}}}\n                    </div>\n                </div>\n            </div>\n        '};e.tmpl={defaultMask:t,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"toast",version:"0.4.1"},function(){var i=function(){var i,o=this,a=0,r=null;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",width:300,icon:"",closeIcon:"",msg:"",lang:{ok:"ok",cancel:"cancel"},displayTime:3e3,animateTime:250,containerPosition:"bottom-left"},this.toastContainer=null,this.queue=[],i=this.config;var l=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),e=null,t=null,!0},s=function(t,n){var i={toastId:t,theme:n.theme,icon:n.icon,msg:(n.msg||"").replace(/\n/g,"<br/>"),btns:n.btns,closeIcon:n.closeIcon};try{return e.tmpl.get.call(this,"toastDisplay",i)}finally{t=null,i=null}},d=function(e,t){r&&clearTimeout(r);var d,u={width:e.width};return e.id="ax5-toast-"+o.containerId+"-"+ ++a,jQuery("#"+e.id).get(0)?this:("bottom"==n.left(i.containerPosition,"-")?this.toastContainer.append(s(e.id,e)):this.toastContainer.prepend(s(e.id,e)),d=jQuery("#"+e.id),d.css({width:u.width}),e.toastBox=d,this.queue.push(e),l.call(this,e,{self:this,state:"open",toastId:e.id}),"push"===e.toastType?(setTimeout(function(){this.close(e,t)}.bind(this),i.displayTime),d.find("[data-ax-toast-btn]").on(i.clickEventName,function(n){c.call(this,n||window.event,e,d,t)}.bind(this))):"confirm"===e.toastType&&d.find("[data-ax-toast-btn]").on(i.clickEventName,function(n){c.call(this,n||window.event,e,d,t)}.bind(this)),void(u=null))},c=function(e,t,i,o,a,r){if(a=n.findParentNode(e.target,function(e){if(e.getAttribute("data-ax-toast-btn"))return!0})){r=a.getAttribute("data-ax-toast-btn");var l={key:r,value:t.btns?t.btns[r]:r,toastId:t.id,btn_target:a};t.btns&&t.btns[r].onClick?t.btns[r].onClick.call(l,r):"push"===t.toastType?(o&&o.call(l,r),this.close(t,o)):"confirm"===t.toastType&&(o&&o.call(l,r),this.close(t,o))}e=null,t=null,i=null,o=null,a=null,r=null};this.init=function(){this.onStateChanged=i.onStateChanged,o.containerId=ax5.getGuid();var e=[];i.zIndex&&e.push("z-index:"+i.zIndex),jQuery(document.body).append('<div class="ax5-ui-toast-container '+i.containerPosition+'" data-toast-container="'+o.containerId+'" style="'+e.join(";")+'"></div>'),this.toastContainer=jQuery('[data-toast-container="'+o.containerId+'"]')},this.push=function(e,t){return o.containerId||this.init(),n.isString(e)&&(e={title:i.title,msg:e}),e.toastType="push",o.dialogConfig={},jQuery.extend(!0,o.dialogConfig,i,e),e=o.dialogConfig,d.call(this,e,t),e=null,t=null,this},this.confirm=function(e,t){return o.containerId||this.init(),n.isString(e)&&(e={title:i.title,msg:e}),e.toastType="confirm",o.dialogConfig={},jQuery.extend(!0,o.dialogConfig,i,e),e=o.dialogConfig,"undefined"==typeof e.btns&&(e.btns={ok:{label:i.lang.ok,theme:e.theme}}),d.call(this,e,t),e=null,t=null,this},this.close=function(e,t){"undefined"==typeof e&&(e=n.last(this.queue));var o=e.toastBox;return o.addClass("push"==e.toastType?"removed":"destroy"),this.queue=n.filter(this.queue,function(){return e.id!=this.id}),setTimeout(function(){var n={toastId:e.id};o.remove(),t&&t.call(n),n={self:this,state:"close",toastId:e.id},l.call(this,e,n),0===this.queue.length&&(r&&clearTimeout(r),r=setTimeout(function(){0===this.queue.length&&(a=0)}.bind(this),3e3)),n=null,e=null,t=null,o=null}.bind(this),i.animateTime),this},this.main=function(){t.toast_instance=t.toast_instance||[],t.toast_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.toast}(),function(){var e=ax5.ui.toast,t=function(e){return'\n        <div id="{{toastId}}" data-ax5-ui="toast" class="ax5-ui-toast {{theme}}">\n            {{#icon}}\n            <div class="ax-toast-icon">{{{.}}}</div>\n            {{/icon}}\n            <div class="ax-toast-body">{{{msg}}}</div>\n            {{#btns}}\n            <div class="ax-toast-buttons">\n                <div class="ax-button-wrap">\n                    {{#@each}}\n                    <button type="button" data-ax-toast-btn="{{@key}}" class="btn btn-{{@value.theme}}">{{{@value.label}}}</button>\n                    {{/@each}}\n                </div>\n            </div>\n            {{/btns}}\n            {{^btns}}\n                <a class="ax-toast-close" data-ax-toast-btn="ok">{{{closeIcon}}}</a>\n            {{/btns}}\n            <div style="clear:both;"></div>\n        </div>'};e.tmpl={toastDisplay:t,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"modal",version:"0.8.3"},function(){var i=function(){var i,o=this,a={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},r=function(e){var t=e;return"changedTouches"in e&&(t=e.changedTouches[0]),{clientX:t.clientX,clientY:t.clientY}};this.instanceId=ax5.getGuid(),this.config={id:"ax5-modal-"+this.instanceId,position:{left:"center",top:"middle",margin:10},minimizePosition:"bottom-right",clickEventName:"click",theme:"default",width:300,height:400,closeToEsc:!0,animateTime:250},this.activeModal=null,this.$={},i=this.config;var l=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),!0},s=function(t,n){var i={modalId:t,theme:n.theme,header:n.header,fullScreen:n.fullScreen?"fullscreen":"",styles:"",iframe:n.iframe,iframeLoadingMsg:n.iframeLoadingMsg};return n.zIndex&&(i.styles+="z-index:"+n.zIndex+";"),n.absolute&&(i.styles+="position:absolute;"),i.iframe&&"string"==typeof i.iframe.param&&(i.iframe.param=ax5.util.param(i.iframe.param)),e.tmpl.get.call(this,"content",i,{})},d=function(e,t){var d;jQuery(document.body).append(s.call(this,e.id,e)),this.activeModal=jQuery("#"+e.id),this.$={root:this.activeModal.find('[data-modal-els="root"]'),header:this.activeModal.find('[data-modal-els="header"]'),body:this.activeModal.find('[data-modal-els="body"]')},e.iframe&&(this.$["iframe-wrap"]=this.activeModal.find('[data-modal-els="iframe-wrap"]'),this.$.iframe=this.activeModal.find('[data-modal-els="iframe"]'),this.$["iframe-form"]=this.activeModal.find('[data-modal-els="iframe-form"]'),this.$["iframe-loading"]=this.activeModal.find('[data-modal-els="iframe-loading"]')),this.align(),d={self:this,id:e.id,theme:e.theme,width:e.width,height:e.height,state:"open",$:this.$},e.iframe&&(this.$["iframe-wrap"].css({height:e.height}),this.$.iframe.css({height:e.height}),this.$["iframe-form"].attr({method:e.iframe.method}),this.$["iframe-form"].attr({target:e.id+"-frame"}),this.$["iframe-form"].attr({action:e.iframe.url}),this.$.iframe.on("load",function(){d.state="load",e.iframeLoadingMsg&&this.$["iframe-loading"].hide(),l.call(this,e,d)}.bind(this)),e.iframeLoadingMsg||this.$.iframe.show(),this.$["iframe-form"].submit()),t&&t.call(d),l.call(this,e,d),e.closeToEsc&&jQuery(window).bind("keydown.ax-modal",function(e){u.call(this,e||window.event)}.bind(this)),jQuery(window).bind("resize.ax-modal",function(e){this.align(null,e||window.event)}.bind(this)),this.activeModal.find("[data-modal-header-btn]").on(i.clickEventName,function(t){c.call(this,t||window.event,e)}.bind(this)),this.$.header.bind(a.mousedown,function(e){var t=n.findParentNode(e.target,function(e){if(e.getAttribute("data-modal-header-btn"))return!0});t||(o.mousePosition=r(e),p.on.call(o))}).bind("dragstart",function(e){return n.stopEvent(e),!1})},c=function(e,t,i,o,a){var r;e.srcElement&&(e.target=e.srcElement),o=n.findParentNode(e.target,function(e){if(e.getAttribute("data-modal-header-btn"))return!0}),o&&(a=o.getAttribute("data-modal-header-btn"),r={self:this,key:a,value:t.header.btns[a],dialogId:t.id,btnTarget:o},t.header.btns[a].onClick&&t.header.btns[a].onClick.call(r,a)),r=null,t=null,i=null,o=null,a=null},u=function(e){e.keyCode==ax5.info.eventKeys.ESC&&this.close()},h={"top-left":function(){this.align({left:"left",top:"top"})},"top-right":function(){this.align({left:"right",top:"top"})},"bottom-left":function(){this.align({left:"left",top:"bottom"})},"bottom-right":function(){this.align({left:"right",top:"bottom"})},"center-middle":function(){this.align({left:"center",top:"middle"})}},p={on:function(){var e=this.activeModal.css("z-index"),t=this.activeModal.position(),n={width:this.activeModal.outerWidth(),height:this.activeModal.outerHeight()},r={width:jQuery(window).width(),height:jQuery(window).height()},l=function(e){o.__dx=e.clientX-o.mousePosition.clientX,o.__dy=e.clientY-o.mousePosition.clientY;var i=0,a=r.width-n.width,l=0,s=r.height-n.height;return i>t.left+o.__dx?o.__dx=-t.left:a<t.left+o.__dx&&(o.__dx=a-t.left),l>t.top+o.__dy?o.__dy=-t.top:s<t.top+o.__dy&&(o.__dy=s-t.top),{left:t.left+o.__dx+$(document).scrollLeft(),top:t.top+o.__dy+$(document).scrollTop()}};o.__dx=0,o.__dy=0,jQuery(document.body).bind(a.mousemove+".ax5modal-"+i.id,function(i){o.resizer||(o.resizerBg=jQuery('<div class="ax5modal-resizer-background" ondragstart="return false;"></div>'),o.resizer=jQuery('<div class="ax5modal-resizer" ondragstart="return false;"></div>'),o.resizerBg.css({zIndex:e}),o.resizer.css({left:t.left,top:t.top,width:n.width,height:n.height,zIndex:e+1}),jQuery(document.body).append(o.resizerBg).append(o.resizer),o.activeModal.addClass("draged")),o.resizer.css(l(i))}).bind(a.mouseup+".ax5layout-"+this.instanceId,function(e){p.off.call(o)}).bind("mouseleave.ax5layout-"+this.instanceId,function(e){p.off.call(o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){var e=function(){var e=this.activeModal.offset();e.left+=this.__dx-$(document).scrollLeft(),e.top+=this.__dy-$(document).scrollTop(),this.activeModal.css(e)};this.resizer&&(this.activeModal.removeClass("draged"),this.resizer.remove(),this.resizer=null,this.resizerBg.remove(),this.resizerBg=null,e.call(this)),jQuery(document.body).unbind(a.mousemove+".ax5modal-"+i.id).unbind(a.mouseup+".ax5modal-"+i.id).unbind("mouseleave.ax5modal-"+i.id),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}};this.init=function(){this.onStateChanged=i.onStateChanged},this.open=function(e,t){return this.activeModal||(e=o.modalConfig=jQuery.extend(!0,{},i,e),d.call(this,e,t)),this},this.close=function(e){return this.activeModal&&(e=o.modalConfig,this.activeModal.addClass("destroy"),jQuery(window).unbind("keydown.ax-modal"),jQuery(window).unbind("resize.ax-modal"),setTimeout(function(){this.activeModal&&(this.activeModal.remove(),this.activeModal=null),l.call(this,e,{self:this,state:"close"})}.bind(this),i.animateTime)),this.minimized=!1,this},this.minimize=function(){return function(e){if(this.minimized!==!0){var t=o.modalConfig;"undefined"==typeof e&&(e=i.minimizePosition),this.minimized=!0,this.$.body.hide(),o.modalConfig.originalHeight=t.height,o.modalConfig.height=0,h[e].call(this),l.call(this,t,{self:this,state:"minimize"})}return this}}(),this.maximize=function(){var e=o.modalConfig;return this.minimized&&(this.minimized=!1,this.$.body.show(),o.modalConfig.height=o.modalConfig.originalHeight,o.modalConfig.originalHeight=void 0,this.align({left:"center",top:"middle"}),l.call(this,e,{self:this,state:"restore"})),this},this.css=function(e){return this.activeModal&&!o.fullScreen&&(this.activeModal.css(e),e.width&&(o.modalConfig.width=this.activeModal.width()),e.height&&(o.modalConfig.height=this.activeModal.height(),this.$.iframe&&(this.$["iframe-wrap"].css({height:o.modalConfig.height}),this.$.iframe.css({height:o.modalConfig.height})))),this},this.setModalConfig=function(e){return o.modalConfig=jQuery.extend({},o.modalConfig,e),this.align(),this},this.align=function(){return function(e,t){if(!this.activeModal)return this;var i=o.modalConfig,a={width:i.width,height:i.height},r=function(e){return"undefined"!=typeof e&&(n.isFunction(e)?e():void 0)}(i.fullScreen);return r?(i.header&&this.$.header.hide(),a.width=jQuery(window).width(),a.height=i.height,a.left=0,a.top=0):(i.header&&this.$.header.show(),e&&jQuery.extend(!0,i.position,e),i.header?(i.headerHeight=this.$.header.outerHeight(),a.height+=i.headerHeight):i.headerHeight=0,"left"==i.position.left?a.left=i.position.margin||0:"right"==i.position.left?a.left=jQuery(window).width()-a.width-(i.position.margin||0):"center"==i.position.left?a.left=jQuery(window).width()/2-a.width/2:a.left=i.position.left||0,"top"==i.position.top?a.top=i.position.margin||0:"bottom"==i.position.top?a.top=jQuery(window).height()-a.height-(i.position.margin||0):"middle"==i.position.top?a.top=jQuery(window).height()/2-a.height/2:a.top=i.position.top||0,a.left<0&&(a.left=0),a.top<0&&(a.top=0)),this.activeModal.css(a),i.iframe&&(this.$["iframe-wrap"].css({height:a.height-i.headerHeight}),this.$.iframe.css({height:a.height-i.headerHeight})),this}}(),this.main=function(){t.modal_instance=t.modal_instance||[],t.modal_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.modal}(),function(){var e=ax5.ui.modal,t=function(){return' \n        <div id="{{modalId}}" data-modal-els="root" class="ax5modal {{theme}} {{fullscreen}}" style="{{styles}}">\n            {{#header}}\n            <div class="ax-modal-header" data-modal-els="header">\n                {{{title}}}\n                {{#btns}}\n                    <div class="ax-modal-header-addon">\n                    {{#@each}}\n                    <button tabindex="-1" data-modal-header-btn="{{@key}}" class="{{@value.theme}}">{{{@value.label}}}</button>\n                    {{/@each}}\n                    </div>\n                {{/btns}}\n            </div>\n            {{/header}}\n            <div class="ax-modal-body" data-modal-els="body">\n            {{#iframe}}\n            \n                <div data-modal-els="iframe-wrap" style="-webkit-overflow-scrolling: touch; overflow: auto;position: relative;">\n                    <table data-modal-els="iframe-loading" style="width:100%;height:100%;"><tr><td style="text-align: center;vertical-align: middle">{{{iframeLoadingMsg}}}</td></tr></table>\n                    <iframe name="{{modalId}}-frame" src="" width="100%" height="100%" frameborder="0" data-modal-els="iframe" style="position: absolute;left:0;top:0;"></iframe>\n                </div>\n                <form name="{{modalId}}-form" data-modal-els="iframe-form">\n                <input type="hidden" name="modalId" value="{{modalId}}" />\n                {{#param}}\n                {{#@each}}\n                <input type="hidden" name="{{@key}}" value="{{@value}}" />\n                {{/@each}}\n                {{/param}}\n                </form>\n            {{/iframe}}\n            </div>\n            <div class="ax-modal-body-mask"></div>\n        </div>\n        '};e.tmpl={content:t,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"calendar",version:"0.9.0"},function(){var i=function(){var i,o=this,a=1;this.instanceId=ax5.getGuid(),this.target=null,this.selection=[],this.selectionMap={},this.selectableMap={},this.markerMap={},this.printedDay={start:"",end:""},this.config={clickEventName:"click",theme:"default",mode:"day",dateFormat:"yyyy-MM-dd",displayDate:new Date,animateTime:250,dimensions:{controlHeight:"40",controlButtonWidth:"40",colHeadHeight:"30",itemPadding:2},lang:{yearHeading:"Choose the year",monthHeading:"Choose the month",yearTmpl:"%s",months:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],dayTmpl:"%s"},multipleSelect:!1,selectMode:"day",defaultMarkerTheme:"holiday",defaultPeriodTheme:"period"},i=this.config;var r=function(e,t){e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),t=null},l=function(){var t=jQuery.extend(!0,{},i,{controlCSS:{},controlButtonCSS:{}});t.controlButtonCSS.height=t.controlCSS.height=n.cssNumber(i.dimensions.controlHeight),t.controlButtonCSS["line-height"]=t.controlCSS["line-height"]=n.cssNumber(i.dimensions.controlHeight),t.controlButtonCSS.width=n.cssNumber(i.dimensions.controlHeight),t.controlCSS=n.css(t.controlCSS),t.controlButtonCSS=n.css(t.controlButtonCSS);try{return e.tmpl.get.call(this,"frameTmpl",t)}finally{t=null}},s=function(){var e,t,o=n.date(i.displayDate),a="",r="";return i.control&&("day"==i.mode||"d"==i.mode?(a=i.control.yearTmpl?i.control.yearTmpl.replace("%s",o.getFullYear()):o.getFullYear(),r=i.control.monthTmpl?i.control.monthTmpl.replace("%s",i.lang.months[o.getMonth()]):i.lang.months[o.getMonth()],this.$["control-display"].html(function(){return i.control.yearFirst?'<span data-calendar-display="year">'+a+'</span><span data-calendar-display="month">'+r+"</span>":'<span data-calendar-display="month">'+r+'</span><span data-calendar-display="year">'+a+"</span>"}())):"month"==i.mode||"m"==i.mode?(a=i.control.yearTmpl?i.control.yearTmpl.replace("%s",o.getFullYear()):o.getFullYear(),this.$["control-display"].html('<span data-calendar-display="year">'+a+"</span>")):"year"!=i.mode&&"y"!=i.mode||(e=i.control.yearTmpl?i.control.yearTmpl.replace("%s",o.getFullYear()-10):o.getFullYear()-10,t=i.control.yearTmpl?i.control.yearTmpl.replace("%s",Number(o.getFullYear())+9):Number(o.getFullYear())+9,this.$["control-display"].html(e+" ~ "+t)),this.$["control-display"].find("[data-calendar-display]").on(i.clickEventName,function(e){var t,i=n.findParentNode(e.target,function(e){if(e.getAttribute("data-calendar-display"))return!0});i&&(t=i.getAttribute("data-calendar-display"),this.changeMode(t)),i=null,t=null}.bind(this))),o=null,a=null,r=null,e=null,t=null,this},d=function(t){var a,l,d,c,u,p=n.date(t),f=new Date(p.getFullYear(),p.getMonth(),1,12),g=i.displayDate,m=function(){var e=f.getDay();0==e&&(e=7);try{return n.date(f,{add:{d:-e}})}finally{e=null}}(),v=p.getMonth(),y={},x=this.$.body.width(),b=Math.floor(x*(6/7));for(i.dimensions.height&&(b=n.number(i.dimensions.height)-n.number(i.dimensions.colHeadHeight)),y.height=Math.floor(b/6)-2*n.number(i.dimensions.itemPadding)+"px",y["line-height"]=y.height,y.padding=n.cssNumber(i.dimensions.itemPadding),c={weekNames:[].concat(ax5.info.weekNames),list:[]},c.weekNames.forEach(function(e){e.colHeadHeight=n.cssNumber(i.dimensions.colHeadHeight)}),a=m,l=0;l<6;){for(d=0;d<7;){var w=""+n.date(a,{"return":i.dateFormat}),k={row:l,col:d,isStartOfWeek:0==d,thisDate:""+w,thisDataLabel:i.lang.dayTmpl.replace("%s",a.getDate()),itemStyles:n.css(y),addClass:function(){return i.selectable?o.selectableMap[w]?a.getMonth()==v?"live":"":"disable":a.getMonth()==v?w==n.date(g,{"return":"yyyyMMdd"})?"focus":"live":""}()+" "+function(){return o.markerMap[w]?o.markerMap[w].theme||i.defaultMarkerTheme:""}()+" "+function(){return o.selectionMap[w]?"selected-day":""}()};c.list.push(k),d++,a=n.date(a,{add:{d:1}}),w=null,k=null}l++}u=e.tmpl.get.call(this,"dayTmpl",c),this.$.body.html(u),this.$.body.find("[data-calendar-item-date]").on(i.clickEventName,function(e){e=e||window.event,h.call(o,e,"date"),n.stopEvent(e)}),this.printedDay={start:m,end:a},r.call(this,null,{self:this,action:"printDay",printedDay:this.printedDay}),s.call(this),p=null,f=null,g=null,m=null,a=null,v=null,y=null,l=null,d=null,x=null,b=null,c=null,u=null},c=function(t){var a,l,d,c,u,p,f=n.date(t),g=f.getMonth(),m={},v=this.$.body.width(),y=Math.floor(v*(6/7));for(i.dimensions.height&&(y=n.number(i.dimensions.height)-n.number(i.dimensions.colHeadHeight)),m.height=Math.floor(y/4)-2*n.number(i.dimensions.itemPadding)+"px",m["line-height"]=m.height,m.padding=n.cssNumber(i.dimensions.itemPadding),u={colHeadHeight:n.cssNumber(i.dimensions.colHeadHeight),colHeadLabel:i.lang.monthHeading,list:[]},c=0,d=0,a=0;a<4;){for(l=0;l<3;){var x={row:a,col:l,isStartOfRow:0==l,thisMonth:f.getFullYear()+"-"+n.setDigit(d+1,2)+"-"+n.setDigit(f.getDate(),2),thisMonthLabel:i.lang.months[d],itemStyles:n.css(m),addClass:function(){return i.selectable?o.selectableMap[d]?"live":"disable":"live"}()+" "+function(){return d==g?"focus":""}()+" "+function(){return o.markerMap[d]?o.markerMap[d].theme||i.defaultMarkerTheme:""}()};u.list.push(x),d++,l++,x=null}a++}p=e.tmpl.get.call(this,"monthTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-month]").on(i.clickEventName,function(e){e=e||window.event,h.call(o,e,"month"),n.stopEvent(e)}),this.printedDay={start:f.getFullYear()+"-"+n.setDigit(c+1,2),end:f.getFullYear()+"-"+n.setDigit(d,2)},r.call(this,null,{self:this,action:"printMonth",printedDay:this.printedDay}),s.call(this),f=null,g=null,m=null,a=null,l=null,d=null,c=null,v=null,y=null,u=null,p=null},u=function(t){var a,l,d,c,u,p,f=n.date(t),g=f.getFullYear(),m={},v=this.$.body.width(),y=Math.floor(v*(6/7));for(i.dimensions.height&&(y=n.number(i.dimensions.height)-n.number(i.dimensions.colHeadHeight)),m.height=Math.floor(y/5)-2*n.number(i.dimensions.itemPadding)+"px",m["line-height"]=m.height,m.padding=n.cssNumber(i.dimensions.itemPadding),u={colHeadHeight:n.cssNumber(i.dimensions.colHeadHeight),colHeadLabel:i.lang.yearHeading,list:[]},c=g-10,d=g-10,a=0;a<5;){for(l=0;l<4;){var x={row:a,col:l,isStartOfRow:0==l,thisYear:d+"-"+n.setDigit(f.getMonth()+1,2)+"-"+n.setDigit(f.getDate(),2),thisYearLabel:i.lang.yearTmpl.replace("%s",d),itemStyles:n.css(m),addClass:function(){return i.selectable?o.selectableMap[d]?"live":"disable":"live"}()+" "+function(){return d==g?"focus":""}()+" "+function(){return o.selectableMap[d]?o.selectableMap[d].theme||i.defaultMarkerTheme:""}()};u.list.push(x),d++,l++,x=null}a++}p=e.tmpl.get.call(this,"yearTmpl",u),this.$.body.html(p),this.$.body.find("[data-calendar-item-year]").on(i.clickEventName,function(e){e=e||window.event,h.call(this,e,"year"),n.stopEvent(e)}),this.printedDay={start:c,end:d-1},r.call(this,null,{self:this,action:"printYear",printedDay:this.printedDay}),s.call(this),f=null,g=null,m=null,a=null,l=null,d=null,c=null,v=null,y=null,u=null,p=null},h=function(e,t,r,l){var s,d,c;t=t||"date",r=n.findParentNode(e.target,function(e){if(e.getAttribute("data-calendar-item-"+t))return!0}),r&&(l=r.getAttribute("data-calendar-item-"+t),d=n.date(l,{"return":i.dateFormat}),c=!0,a=i.multipleSelect?n.isNumber(i.multipleSelect)?i.multipleSelect:2:1,i.selectable&&(o.selectableMap[d]||(c=!1)),"date"==t?c&&(o.selection.length>=a&&(s=o.selection.splice(0,o.selection.length-(a-1)),s.forEach(function(e){o.$.body.find('[data-calendar-item-date="'+n.date(e,{"return":i.dateFormat})+'"]').removeClass("selected-day")})),jQuery(r).addClass("selected-day"),o.selection.push(l),o.onClick&&o.onClick.call({self:this,date:l,target:this.target,dateElement:r})):"month"==t?"month"==i.selectMode?c&&(o.selection.length>=a&&(s=o.selection.splice(0,o.selection.length-(a-1)),s.forEach(function(e){o.$.body.find('[data-calendar-item-month="'+n.date(e,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-month")})),jQuery(r).addClass("selected-month"),o.selection.push(l),o.onClick&&o.onClick.call({self:this,date:l,target:this.target,dateElement:r})):o.changeMode("day",l):"year"==t&&("year"==i.selectMode?c&&(o.selection.length>=a&&(s=o.selection.splice(0,o.selection.length-(a-1)),s.forEach(function(e){o.$.body.find('[data-calendar-item-year="'+n.date(e,{"return":"yyyy-MM-dd"})+'"]').removeClass("selected-year")})),jQuery(r).addClass("selected-year"),o.selection.push(l),o.onClick&&o.onClick.call({self:this,
date:l,target:this.target,dateElement:r})):o.changeMode("month",l))),t=null,r=null,l=null,s=null,d=null,c=null},p=function(e,t,o){t=n.findParentNode(e.target,function(e){if(e.getAttribute("data-calendar-move"))return!0}),t&&(o=t.getAttribute("data-calendar-move"),"day"==i.mode?("left"==o?i.displayDate=n.date(i.displayDate,{add:{m:-1}}):i.displayDate=n.date(i.displayDate,{add:{m:1}}),d.call(this,i.displayDate)):"month"==i.mode?("left"==o?i.displayDate=n.date(i.displayDate,{add:{y:-1}}):i.displayDate=n.date(i.displayDate,{add:{y:1}}),c.call(this,i.displayDate)):"year"==i.mode&&("left"==o?i.displayDate=n.date(i.displayDate,{add:{y:-10}}):i.displayDate=n.date(i.displayDate,{add:{y:10}}),u.call(this,i.displayDate))),t=null,o=null},f=function(){setTimeout(function(){if("day"===i.mode||"d"===i.mode)for(var e in this.markerMap)this.$.body.find('[data-calendar-item-date="'+e+'"]').addClass(this.markerMap[e].theme||i.defaultMarkerTheme)}.bind(this))},g=function(){setTimeout(function(){for(var e in this.selectionMap)this.$.body.find('[data-calendar-item-date="'+e+'"]').addClass("selected-day")}.bind(this))},m=function(){setTimeout(function(){if("day"===i.mode||"d"===i.mode)for(var e in this.periodMap)this.periodMap[e].label&&this.$.body.find('[data-calendar-item-date="'+e+'"]').find(".addon-footer").html(this.periodMap[e].label),this.$.body.find('[data-calendar-item-date="'+e+'"]').addClass(this.periodMap[e].theme)}.bind(this))},v=function(){if("day"===i.mode||"d"===i.mode)for(var e in this.periodMap)this.$.body.find('[data-calendar-item-date="'+e+'"]').find(".addon-footer").empty(),this.$.body.find('[data-calendar-item-date="'+e+'"]').removeClass(this.periodMap[e].theme)};this.init=function(){this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,i.target||console.log(ax5.info.getError("ax5calendar","401","setConfig")),this.target=jQuery(i.target),i.displayDate=n.date(i.displayDate),this.target.html(l.call(this)),this.$={root:this.target.find('[data-calendar-els="root"]'),control:this.target.find('[data-calendar-els="control"]'),"control-display":this.target.find('[data-calendar-els="control-display"]'),body:this.target.find('[data-calendar-els="body"]')},i.control&&this.$.control.find("[data-calendar-move]").on(i.clickEventName,function(e){p.call(this,e||window.event)}.bind(this)),i.selection&&this.setSelection(i.selection,!1),i.selectable&&this.setSelectable(i.selectable,!1),i.marker&&this.setMarker(i.marker,!1),setTimeout(function(){"day"===i.mode||"d"===i.mode?d.call(this,i.displayDate):"month"===i.mode||"m"===i.mode?c.call(this,i.displayDate):"year"!==i.mode&&"y"!==i.mode||u.call(this,i.displayDate)}.bind(this))},this.changeMode=function(e,t){return"undefined"!=typeof t&&(i.displayDate=t),e&&(i.mode=e),this.$.body.removeClass("fadein").addClass("fadeout"),setTimeout(function(){"day"==i.mode||"d"==i.mode?d.call(this,i.displayDate):"month"==i.mode||"m"==i.mode?c.call(this,i.displayDate):"year"!=i.mode&&"y"!=i.mode||u.call(this,i.displayDate),this.$.body.removeClass("fadeout").addClass("fadein")}.bind(this),i.animateTime),this},this.setSelection=function(){o.selectionMap={};var e={arr:function(e,t,a){return t={},n.isArray(e)?(o.selection=e=e.splice(0,a),e.forEach(function(e){n.isDate(e)&&(e=n.date(e,{"return":i.dateFormat})),t[e]=!0}),t):t}};return function(t,o){var r={};if(a=i.multipleSelect?n.isNumber(i.multipleSelect)?i.multipleSelect:2:1,i.selection=t){if(!n.isArray(t))return this;r=e.arr(t,{},a)}return this.selectionMap=jQuery.extend({},r),o!==!1&&g.call(this),r=null,this}}(),this.getSelection=function(){return this.selection},this.setSelectable=function(){o.selectableMap={};var e={arr:function(e,t){return t={},n.isArray(e)?(e.forEach(function(e){n.isDate(e)&&(e=n.date(e,{"return":i.dateFormat})),t[e]=!0}),t):t},obj:function(e,t){if(t={},n.isArray(e))return t;if(e.range)return t;for(var i in e)t[i]=e[i];return t},range:function(e,t){return t={},n.isArray(e)?t:e.range?(e.range.forEach(function(e){if(n.isDateFormat(e.from)&&n.isDateFormat(e.to))for(var o=n.date(e.from);o<=n.date(e.to);o.setDate(o.getDate()+1))t[n.date(o,{"return":i.dateFormat})]=!0;else for(var a=e.from;a<=e.to;a++)t[a]=!0}),t):t}};return function(t,o){var a,r={};if(i.selectable=t)if(n.isArray(t))r=e.arr(t);else{for(a in e)if(t[a]){r=e[a](t);break}0===Object.keys(r).length&&(r=e.obj(t))}return this.selectableMap=r,o!==!1&&this.changeMode(),this}}(),this.setMarker=function(){o.markerMap={};var e={obj:function(e,t){if(t={},n.isArray(e))return t;if(e.range)return t;for(var i in e)t[i]=e[i];return e=null,t},range:function(e,t){return t={},n.isArray(e)?t:e.range?(e.range.forEach(function(e){if(n.isDateFormat(e.from)&&n.isDateFormat(e.to))for(var o=n.date(e.from);o<=n.date(e.to);o.setDate(o.getDate()+1))t[n.date(o,{"return":i.dateFormat})]={theme:e.theme,label:e.label};else for(var a=e.from;a<=e.to;a++)t[a]={theme:e.theme,label:e.label}}),e=null,t):t}};return function(t,n){var o,a={};if(i.marker=t){for(o in e)if(t[o]){a=e[o](t);break}0===Object.keys(a).length&&(a=e.obj(t))}return this.markerMap=a,n!==!1&&f.call(this),this}}(),this.setPeriod=function(){o.periodMap={};var e={range:function(e,t){return t={},n.isArray(e)?t:e.range?(e.range.forEach(function(e){if(n.isDateFormat(e.from)&&n.isDateFormat(e.to))for(var o=new Date(n.date(e.from));o<=n.date(e.to);o.setDate(o.getDate()+1))o.getTime()==n.date(e.from).getTime()?t[n.date(o,{"return":i.dateFormat})]={theme:e.theme||i.defaultPeriodTheme,label:e.fromLabel}:o.getTime()==n.date(e.to).getTime()?t[n.date(o,{"return":i.dateFormat})]={theme:e.theme||i.defaultPeriodTheme,label:e.toLabel}:t[n.date(o,{"return":i.dateFormat})]={theme:e.theme||i.defaultPeriodTheme}}),e=null,t):t}};return function(t,n){var o={};return n!==!1&&v.call(this),(i.period=t)&&(o=e.range(t)),this.periodMap=o,n!==!1&&m.call(this),this}}(),this.main=function(){t.calendar_instance=t.calendar_instance||[],t.calendar_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.calendar}(),function(){var e=ax5.ui.calendar,t=function(e){return'\n                <div class="ax5-ui-calendar {{theme}}" data-calendar-els="root" onselectstart="return false;">\n                    {{#control}}\n                    <div class="calendar-control" data-calendar-els="control" style="{{controlCSS}}">\n                        <a class="date-move-left" data-calendar-move="left" style="{{controlButtonCSS}}">{{{left}}}</a>\n                        <div class="date-display" data-calendar-els="control-display" style="{{controlCSS}}"></div>\n                        <a class="date-move-right" data-calendar-move="right" style="{{controlButtonCSS}}">{{{right}}}</a>\n                    </div>\n                    {{/control}}\n                    <div class="calendar-body" data-calendar-els="body"></div>\n                </div>\n                '},n=function(e){return'\n                <table data-calendar-table="day" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                        {{#weekNames}}\n                            <td class="calendar-col-{{col}}" style="height: {{colHeadHeight}}">\n                            {{label}}\n                            </td>\n                        {{/weekNames}}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfWeek}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfWeek}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-day {{addClass}}" data-calendar-item-date="{{thisDate}}">\n                                    <span class="addon addon-header"></span>\n                                    {{thisDataLabel}}\n                                    <span class="addon addon-footer"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},i=function(e){return'\n                <table data-calendar-table="month" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="3" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-month {{addClass}}" data-calendar-item-month="{{thisMonth}}">\n                                    <span class="addon"></span>\n                                    {{thisMonthLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '},o=function(e){return'\n                <table data-calendar-table="year" cellpadding="0" cellspacing="0" style="width:100%;">\n                    <thead>\n                        <tr>\n                            <td class="calendar-col-0" colspan="4" style="height: {{colHeadHeight}}">\n                            {{colHeadLabel}}\n                            </td>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            {{#list}}    \n                            {{#isStartOfRow}}\n                            {{^@first}}\n                        </tr>\n                        <tr>\n                            {{/@first}}\n                            {{/isStartOfRow}}\n                            <td class="calendar-col-{{col}}" style="{{itemStyles}}">\n                                <a class="calendar-item-year {{addClass}}" data-calendar-item-year="{{thisYear}}">\n                                    <span class="addon"></span>\n                                    {{thisYearLabel}}\n                                    <span class="lunar"></span>\n                                </a>\n                            </td>\n                            {{/list}}\n                        </tr>\n                    </tbody>\n                </table>\n                '};e.tmpl={frameTmpl:t,dayTmpl:n,monthTmpl:i,yearTmpl:o,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"picker",version:"0.8.1"},function(){var t=function(){var t,i=this;this.instanceId=ax5.getGuid(),this.config={clickEventName:"click",theme:"default",title:"",lang:{ok:"ok",cancel:"cancel"},animateTime:100,calendar:{control:{left:ax5.def.picker.date_leftArrow||"&#x02190",yearTmpl:ax5.def.picker.date_yearTmpl||"%s",monthTmpl:ax5.def.picker.date_monthTmpl||"%s",right:ax5.def.picker.date_rightArrow||"&#x02192",yearFirst:!0}}},this.queue=[],this.activePicker=null,this.activePickerQueueIndex=-1,this.openTimer=null,this.closeTimer=null,t=this.config;var o=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),!0},a=function(){var e={focus:function(e,t){this.open(e)},click:function(e,t){this.open(e)}},i={"@fn":function(e,n){var i=this.queue[e],o=n.length,a={inputLength:o||1};o>1&&(a.btns={ok:{label:t.lang.ok,theme:t.theme}}),this.queue[e]=jQuery.extend(!0,a,i),a=null,o=null},date:function(e,n){var i=this.queue[e],o=i.content?i.content.width||270:270,a=i.content?i.content.margin||5:5,r=n.length,l={contentWidth:o*r+(r-1)*a,content:{width:o,margin:a},inputLength:r||1};r>1&&!i.btns&&(l.btns={ok:{label:t.lang.ok,theme:t.theme}}),this.queue[e]=jQuery.extend(!0,l,i),o=null,a=null,l=null,r=null},"secure-num":function(e,t){var n=this.queue[e],i=t.length,o={inputLength:i||1};this.queue[e]=jQuery.extend(!0,o,n),o=null,i=null},keyboard:function(e,t){var n=this.queue[e],i=t.length,o={inputLength:i||1};this.queue[e]=jQuery.extend(!0,o,n),o=null,i=null},numpad:function(e,t){var n=this.queue[e],i=t.length,o={inputLength:i||1};this.queue[e]=jQuery.extend(!0,o,n),o=null,i=null}};return function(t){var o,a=this.queue[t];if(!a.content)return console.log(ax5.info.getError("ax5picker","501","bind")),this;if(o="INPUT"==a.$target.get(0).tagName.toUpperCase()?a.$target:a.$target.find("input[type]"),n.isFunction(a.content))i["@fn"].call(this,t,o);else for(var r in i)if(a.content.type==r){i[r].call(this,t,o);break}return o.unbind("focus.ax5picker").unbind("click.ax5picker").bind("focus.ax5picker",e.focus.bind(this,t)).bind("click.ax5picker",e.click.bind(this,t)),a.$target.find(".input-group-addon").unbind("click.ax5picker").bind("click.ax5picker",e.click.bind(this,t)),a.content.formatter&&ax5.ui.formatter&&o.ax5formatter(a.content.formatter),o=null,a=null,t=null,this}}(),r=function(e){if(!this.activePicker)return this;var t=function(t){var n,i=jQuery(window),o=jQuery(document.body),a={},r=12,l={},s={};a=t.$target.offset(),l={width:t.$target.outerWidth(),height:t.$target.outerHeight()},s={winWidth:Math.max(i.width(),o.width()),winHeight:Math.max(i.height(),o.height()),width:this.activePicker.outerWidth(),height:this.activePicker.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction?n=t.direction:(n="top",a.top-s.height-r<0?n="top":a.top+l.height+s.height+r>s.winHeight&&(n="bottom")),e&&this.activePicker.addClass("direction-"+n);var d=function(){var e={left:0,top:0};switch(n){case"top":e.left=a.left+l.width/2-s.width/2,e.top=a.top+l.height+r;break;case"bottom":e.left=a.left+l.width/2-s.width/2,e.top=a.top-s.height-r;break;case"left":e.left=a.left+l.width+r,e.top=a.top-s.height/2+l.height/2;break;case"right":e.left=a.left-s.width-r,e.top=a.top-s.height/2+l.height/2}return e}();(function(){"top"!=n&&"bottom"!=n||(d.left<0?(d.left=r,this.activePickerArrow.css({left:a.left+l.width/2-d.left})):d.left+s.width>s.winWidth&&(d.left=s.winWidth-s.width-r,this.activePickerArrow.css({left:a.left+l.width/2-d.left})))}).call(this),this.activePicker.css(d)},n=this.queue[this.activePickerQueueIndex];e&&jQuery(document.body).append(this.activePicker),setTimeout(function(){t.call(this,n)}.bind(this))},l=function(e,t){if(!this.activePicker)return this;var i=this.queue[this.activePickerQueueIndex];return t=n.findParentNode(e.target,function(e){return!!e.getAttribute("data-picker-els")||(i.$target.get(0)==e||void 0)}),t?this:(this.close(),this)},s=function(e,t){if(e.srcElement&&(e.target=e.srcElement),t=n.findParentNode(e.target,function(e){if(e.getAttribute("data-picker-btn"))return!0})){var i=this.queue[this.activePickerQueueIndex],o=t.getAttribute("data-picker-btn");if(i.btns&&i.btns[o].onClick){var a={key:o,value:i.btns[o],self:this,item:i};i.btns[o].onClick.call(a,o)}else this.close()}},d=function(e){e.keyCode==ax5.info.eventKeys.ESC&&this.close()},c=function(e){return n.isString(e)||(e=jQuery(e).data("data-axpicker-id")),n.isString(e)?n.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5picker","402","getQueIdx"))};this.init=function(){this.onStateChanged=t.onStateChanged},this.bind=function(e){var i,o={};return e=jQuery.extend(!0,o,t,e),e.target?(e.$target=jQuery(e.target),e.$target.get(0)?(e.id||(e.id=e.$target.data("data-axpicker-id")),e.id||(e.id="ax5-picker-"+ax5.getGuid(),e.$target.data("data-axpicker-id",e.id)),i=n.search(this.queue,function(){return this.id==e.id}),i===-1?(this.queue.push(e),a.call(this,this.queue.length-1)):(this.queue[i]=jQuery.extend(!0,{},this.queue[i],e),a.call(this,i)),o=null,i=null,this):(console.log(ax5.info.getError("ax5picker","401","bind")),this)):(console.log(ax5.info.getError("ax5picker","401","bind")),this)},this.setContentValue=function(e,t,a){var r,l=n.isNumber(e)?e:c.call(this,e),s=this.queue[l];return s&&(r="INPUT"==s.$target.get(0).tagName.toUpperCase()?s.$target:jQuery(s.$target.find("input[type]").get(t)),r.val(a),s.disableChangeTrigger||r.trigger("change"),o.call(this,s,{self:i,state:"changeValue",item:s,value:a}),1==s.inputLength&&this.close()),s=null,e=null,t=null,a=null,this},this.open=function(){var a={"@fn":function(e,t){var n=this.queue[e];return n.content.call(n,function(e){t(e)}),!0},date:function(e){for(var o=this.queue[e],a=[],r=0;r<o.inputLength;r++)a.push('<div style="width:'+n.cssNumber(o.content.width)+';float:left;" class="ax-picker-content-box" data-calendar-target="'+r+'"></div>'),r<o.inputLength-1&&a.push('<div style="width:'+o.content.margin+'px;float:left;height: 5px;"></div>');a.push('<div style="clear:both;"></div>'),o.pickerContent.html(a.join(""));var l=jQuery.extend({},t.calendar,{displayDate:new Date}),s="INPUT"==o.$target.get(0).tagName.toUpperCase()?o.$target:o.$target.find("input[type]");o.pickerContent.find("[data-calendar-target]").each(function(){var e=this.getAttribute("data-calendar-target"),t=s.get(e).value,n=ax5.util.date(t);l.displayDate=n,t&&(l.selection=[n]),l=jQuery.extend(!0,l,o.content.config||{}),l.target=this,l.onClick=function(){i.setContentValue(o.id,e,this.date)},new ax5.ui.calendar(l)})},"secure-num":function(e){for(var t=this.queue[e],a=[],r=0;r<t.inputLength;r++)a.push('<div style="width:'+n.cssNumber(t.content.width)+';float:left;" class="ax-picker-content-box" data-secure-num-target="'+r+'"></div>'),r<t.inputLength-1&&a.push('<div style="width:'+t.content.margin+'px;float:left;height: 5px;"></div>');a.push('<div style="clear:both;"></div>'),t.pickerContent.html(a.join("")),t.pickerContent.find("[data-secure-num-target]").each(function(){var e=this.getAttribute("data-secure-num-target"),n=[],a=function(e){var t,n,i;for(i=e.length;i;i-=1)t=Math.floor(Math.random()*i),n=e[i-1],e[i-1]=e[t],e[t]=n;return e}([0,1,2,3,4,5,6,7,8,9]),r=[{label:"&#x02190",fn:"back"},{label:"C",fn:"clear"}];a.forEach(function(e){n.push('<div style="float:left;'+t.content.config.btnWrapStyle+'">'),n.push('<button class="btn btn-default btn-'+t.content.config.btnTheme+'" style="'+t.content.config.btnStyle+'" data-secure-num-value="'+e+'">'+e+"</button>"),n.push("</div>")}),r.forEach(function(e){n.push('<div style="float:left;'+t.content.config.btnWrapStyle+'">'),n.push('<button class="btn btn-default btn-'+t.content.config.specialBtnTheme+'" style="'+t.content.config.btnStyle+'" data-secure-num-value="'+e.fn+'">'+e.label+"</button>"),n.push("</div>")}),n.push('<div style="clear:both;"></div>'),$(this).html(n.join("")).on("click","[data-secure-num-value]",function(){var n=this.getAttribute("data-secure-num-value"),a="INPUT"==t.$target.get(0).tagName.toUpperCase()?t.$target:jQuery(t.$target.find("input[type]").get(e)),r=a.val();"back"==n?a.val(r.substring(0,r.length-1)):"clear"==n?a.val(""):a.val(r+n),o.call(this,t,{self:i,state:"changeValue",item:t,value:a.val()})})})},keyboard:function(e){for(var t=this.queue[e],a=[],r=0;r<t.inputLength;r++)a.push('<div style="width:'+n.cssNumber(t.content.width)+';float:left;" class="ax-picker-content-box" data-keyboard-target="'+r+'"></div>'),r<t.inputLength-1&&a.push('<div style="width:'+t.content.margin+'px;float:left;height: 5px;"></div>');a.push('<div style="clear:both;"></div>'),t.pickerContent.html(a.join(""));var l=[[{value:"`",shiftValue:"~"},{value:"1",shiftValue:"!"},{value:"2",shiftValue:"@"},{value:"3",shiftValue:"#"},{value:"4",shiftValue:"$"},{value:"5",shiftValue:"%"},{value:"6",shiftValue:"^"},{value:"7",shiftValue:"&"},{value:"8",shiftValue:"*"},{value:"9",shiftValue:"("},{value:"0",shiftValue:")"},{value:"-",shiftValue:"_"},{value:"=",shiftValue:"+"},{label:"&#x02190",fn:"back"}],[{value:"q",shiftValue:"Q"},{value:"w",shiftValue:"W"},{value:"e",shiftValue:"E"},{value:"r",shiftValue:"R"},{value:"t",shiftValue:"T"},{value:"y",shiftValue:"Y"},{value:"u",shiftValue:"U"},{value:"i",shiftValue:"I"},{value:"o",shiftValue:"O"},{value:"p",shiftValue:"P"},{value:"[",shiftValue:"{"},{value:"]",shiftValue:"}"},{value:"\\",shiftValue:"|"}],[{label:"Clear",fn:"clear"},{value:"a",shiftValue:"A"},{value:"s",shiftValue:"S"},{value:"d",shiftValue:"D"},{value:"f",shiftValue:"F"},{value:"g",shiftValue:"G"},{value:"h",shiftValue:"H"},{value:"j",shiftValue:"J"},{value:"k",shiftValue:"K"},{value:"l",shiftValue:"L"},{value:";",shiftValue:":"},{value:"'",shiftValue:'"'}],[{label:"Shift",fn:"shift"},{value:"z",shiftValue:"Z"},{value:"x",shiftValue:"X"},{value:"c",shiftValue:"C"},{value:"v",shiftValue:"V"},{value:"b",shiftValue:"B"},{value:"n",shiftValue:"N"},{value:"m",shiftValue:"M"},{value:",",shiftValue:"<"},{value:".",shiftValue:">"},{value:"/",shiftValue:"?"},{label:"Close",fn:"close"}]],s=function(e){var n=[];return l.forEach(function(i){n.push('<div style="display: table;margin:0 auto;">'),i.forEach(function(i){var o,a,r,l,s;i.fn?(o=i.fn,a=i.label,r=t.content.config.specialBtnWrapStyle,l=t.content.config.specialBtnTheme,s=t.content.config.specialBtnStyle):(a=o=e?i.shiftValue:i.value,r=t.content.config.btnWrapStyle,l=t.content.config.btnTheme,s=t.content.config.btnStyle),n.push('<div style="display: table-cell;'+r+'">'),n.push('<button class="btn btn-default btn-'+l+'" style="'+s+'" data-keyboard-value="'+o+'">'+a+"</button>"),n.push("</div>")}),n.push("</div>")}),n.join("")};t.pickerContent.find("[data-keyboard-target]").each(function(){var e=this.getAttribute("data-keyboard-target"),n=$(this),a=!1,r=function(){a=!a,n.html(s(a))};n.html(s(a)).on("mousedown","[data-keyboard-value]",function(){var n=this.getAttribute("data-keyboard-value"),a="INPUT"==t.$target.get(0).tagName.toUpperCase()?t.$target:jQuery(t.$target.find("input[type]").get(e)),l=a.val();switch(n){case"back":a.val(l.substring(0,l.length-1));break;case"clear":a.val("");break;case"shift":return r(),!1;case"close":return i.close(),!1;default:a.val(l+n)}o.call(this,t,{self:i,state:"changeValue",item:t,value:a.val()})})})},numpad:function(e){for(var t=this.queue[e],a=[],r=0;r<t.inputLength;r++)a.push('<div style="width:'+n.cssNumber(t.content.width)+';float:left;" class="ax-picker-content-box" data-numpad-target="'+r+'"></div>'),r<t.inputLength-1&&a.push('<div style="width:'+t.content.margin+'px;float:left;height: 5px;"></div>');a.push('<div style="clear:both;"></div>'),t.pickerContent.html(a.join("")),t.pickerContent.find("[data-numpad-target]").each(function(){var e=this.getAttribute("data-numpad-target"),n=[],a=t.content.config.keyArray||[{value:"7"},{value:"8"},{value:"9"},{label:"BS",fn:"back"},{value:"4"},{value:"5"},{value:"6"},{label:"CLS",fn:"clear"},{value:"1"},{value:"2"},{value:"3"},{value:""},{value:"."},{value:"0"},{value:""},{label:"OK",fn:"enter"}];a.forEach(function(e){var i,o,a,r,l;e.fn?(i=e.fn,o=e.label,r=t.content.config.specialBtnTheme,a=t.content.config.specialBtnWrapStyle,l=t.content.config.specialBtnStyle):(o=i=e.value,r=i?t.content.config.btnTheme:"",a=t.content.config.btnWrapStyle,l=t.content.config.btnStyle),n.push('<div style="float:left;'+a+'">'),n.push('<button class="btn btn-default btn-'+r+'" style="'+l+'" data-numpad-value="'+i+'">'+(o||"&nbsp;")+"</button>"),n.push("</div>")}),n.push('<div style="clear:both;"></div>'),$(this).html(n.join("")).on("mousedown","[data-numpad-value]",function(){var n=this.getAttribute("data-numpad-value"),a="INPUT"==t.$target.get(0).tagName.toUpperCase()?t.$target:jQuery(t.$target.find("input[type]").get(e)),r=a.val(),l="";switch(n){case"back":l="changeValue",a.val(r.substring(0,r.length-1));break;case"clear":l="changeValue",a.val("");break;case"enter":return i.close(t,"enter"),!1;case"close":return i.close(),!1;default:l="changeValue",a.val(r+n)}o.call(this,t,{self:i,state:l,item:t,value:a.val()})})})}};return function(i,u){var h=n.isNumber(i)?i:c.call(this,i),p=this.queue[h];return this.openTimer&&clearTimeout(this.openTimer),this.activePicker?this.activePickerQueueIndex==h?this:u>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(u||0)+1)}.bind(this),t.animateTime),this):(this.activePicker=jQuery(e.tmpl.get.call(this,"pickerTmpl",p)),this.activePickerArrow=this.activePicker.find(".ax-picker-arrow"),this.activePickerQueueIndex=h,p.pickerContent=this.activePicker.find('[data-picker-els="content"]'),n.isFunction(p.content)?(p.pickerContent.html("Loading.."),a["@fn"].call(this,h,function(e){p.pickerContent.html(e)})):p.content.type in a&&a[p.content.type].call(this,h),this.activePicker.find("[data-picker-btn]").on(t.clickEventName,function(e){s.call(this,e||window.event,h)}.bind(this)),r.call(this,"append"),jQuery(window).bind("resize.ax5picker",function(){r.call(this)}.bind(this)),jQuery(window).bind("keyup.ax5picker",function(e){e=e||window.event,d.call(this,e),n.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5picker",function(e){e=e||window.event,l.call(this,e),n.stopEvent(e)}.bind(this)),o.call(this,p,{self:this,state:"open",item:p}),this)}}(),this.close=function(e,n){return this.closeTimer&&clearTimeout(this.closeTimer),this.activePicker?(e=this.queue[this.activePickerQueueIndex],this.activePicker.addClass("destroy"),jQuery(window).unbind("resize.ax5picker"),jQuery(window).unbind("click.ax5picker"),jQuery(window).unbind("keyup.ax5picker"),this.closeTimer=setTimeout(function(){this.activePicker&&this.activePicker.remove(),this.activePicker=null,this.activePickerQueueIndex=-1,o.call(this,e,{self:this,state:n||"close"})}.bind(this),t.animateTime),this):this},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return t}()),e=ax5.ui.picker}(),ax5.ui.picker_instance=new ax5.ui.picker,jQuery.fn.ax5picker=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.picker_instance.open(this);case"close":return ax5.ui.picker_instance.close(this);case"setValue":return ax5.ui.picker_instance.setContentValue(this,arguments[1],arguments[2]);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend(!0,e,t),ax5.ui.picker_instance.bind(e)});return this}}(),function(){var e=ax5.ui.picker,t=(ax5.util,function(){return'\n<div class="ax5-ui-picker {{theme}}" id="{{id}}" data-picker-els="root">\n    {{#title}}\n        <div class="ax-picker-heading">{{title}}</div>\n    {{/title}}\n    <div class="ax-picker-body">\n        <div class="ax-picker-content" data-picker-els="content" style="width:{{contentWidth}}px;"></div>\n        {{#btns}}\n            <div class="ax-picker-buttons">\n            {{#btns}}\n                {{#@each}}\n                <button data-picker-btn="{{@key}}" class="btn btn-default {{@value.theme}}">{{@value.label}}</button>\n                {{/@each}}\n            {{/btns}}\n            </div>\n        {{/btns}}\n    </div>\n    <div class="ax-picker-arrow"></div>\n</div>\n'});e.tmpl={pickerTmpl:t,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"formatter",version:"0.6.1"},function(){var t=(new Date,function(e,t){if("undefined"==typeof t&&(t=e.value.length),e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}else e.selectionStart&&(e.focus(),e.selectionStart=t,e.selectionEnd=t)}),i=function(){var i,o=this;this.instanceId=ax5.getGuid(),this.config={animateTime:250},this.queue=[],this.openTimer=null,this.closeTimer=null,i=this.config;var a={focus:function(e,t,n){e.$input.data("__originValue__")||e.$input.data("__originValue__",e.$input.val())},keydown:function(e,t,n){var i=!1;e.enterableKeyCodes&&(n.which&&e.enterableKeyCodes[n.which]||n.metaKey||n.ctrlKey||n.shiftKey||(i=!0)),i&&ax5.util.stopEvent(n)},keyup:function(n,i,o){var a,r,l,s,d,c=n.$input.get(0);"selectionStart"in c?a=c.selectionStart:document.selection&&(s=document.selection.createRange(),d=document.selection.createRange().text.length,s.moveStart("character",-c.value.length),a=s.text.length-d),r=c.value,l=n.pattern in e.formatter?e.formatter[n.pattern].getPatternValue.call(this,n,i,o,c.value):r,l!=r&&(n.$input.val(l).trigger("change"),t(c,a+l.length-r.length))},blur:function(t,n,i,o){var a,r,l=t.$input.get(0);t.$input.removeData("__originValue__"),a=l.value,r=t.pattern in e.formatter?e.formatter[t.pattern].getPatternValue.call(this,t,n,i,l.value,"blur"):a,o?t.$input.val(r):r!=a&&t.$input.val(r).trigger("change")}},r=function(t,n){if(!t.pattern&&("INPUT"==t.$target.get(0).tagName?t.pattern=t.$target.attr("data-ax5formatter"):t.pattern=t.$target.find('input[type="text"]').attr("data-ax5formatter"),!t.pattern))return console.log(ax5.info.getError("ax5formatter","501","bind")),console.log(t.target),this;var i=/[^\(^\))]+/gi,o=t.pattern.match(i);return t.pattern=o[0],t.patternArgument=o[1]||"",t.pattern in e.formatter&&(t.enterableKeyCodes=e.formatter[t.pattern].getEnterableKeyCodes.call(this,t,n)),t.$input.unbind("focus.ax5formatter").bind("focus.ax5formatter",a.focus.bind(this,this.queue[n],n)),t.$input.unbind("keydown.ax5formatter").bind("keydown.ax5formatter",a.keydown.bind(this,this.queue[n],n)),t.$input.unbind("keyup.ax5formatter").bind("keyup.ax5formatter",a.keyup.bind(this,this.queue[n],n)),t.$input.unbind("blur.ax5formatter").bind("blur.ax5formatter",a.blur.bind(this,this.queue[n],n)),a.blur.call(this,this.queue[n],n),this},l=function(e){return n.isString(e)||(e=jQuery(e).data("data-formatter")),n.search(this.queue,function(){return this.id==e})};this.init=function(){},this.bind=function(e){var t,a={};if(jQuery.extend(!0,a,i),e&&jQuery.extend(!0,a,e),e=a,!e.target)return console.log(ax5.info.getError("ax5formatter","401","bind")),this;if(e.$target=jQuery(e.target),"INPUT"==e.$target.get(0).tagName)e.$input=e.$target;else if(e.$input=e.$target.find('input[type="text"]'),e.$input.length>1)return e.$input.each(function(){e.target=this,o.bind(e)}),this;return e.$input="INPUT"==e.$target.get(0).tagName?e.$target:e.$target.find('input[type="text"]'),e.id||(e.id=e.$input.data("ax5-formatter")),e.id||(e.id="ax5-formatter-"+ax5.getGuid(),e.$input.data("ax5-formatter",e.id)),t=n.search(this.queue,function(){return this.id==e.id}),t===-1?(this.queue.push(e),r.call(this,this.queue[this.queue.length-1],this.queue.length-1)):(this.queue[t]=e,r.call(this,this.queue[t],t)),this},this.formatting=function(e){var t=n.isNumber(e)?e:l.call(this,e);if(t===-1)for(var i=this.queue.length;i--;)a.blur.call(this,this.queue[i],i,null,!0);else a.blur.call(this,this.queue[t],t,null,!0);return this},this.unbind=function(){},this.main=function(){arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.formatter}(),ax5.ui.formatter_instance=new ax5.ui.formatter,jQuery.fn.ax5formatter=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"formatting":return ax5.ui.formatter_instance.formatting(this);case"unbind":return ax5.ui.formatter_instance.unbind(this);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.formatter_instance.bind(e)});return this}}(),function(){var e=ax5.ui.formatter,t=ax5.util,n={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",
35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},i={48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1},o={getEnterableKeyCodes:function(t){var n={188:","};return"int"==t.patternArgument||(n[190]="."),jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,n,i,o,a){o=o.replace(/[^0-9^\.^\-]/g,"");var r,l=new RegExp("([0-9])([0-9][0-9][0-9][,.])"),s=o.split(".");s[0]+=".";do s[0]=s[0].replace(l,"$1,$2");while(l.test(s[0]));return r=s.length>1?t.isNumber(e.maxRound)?s[0]+t.left(s[1],e.maxRound):s.join(""):s[0].split(".")[0]}},a={getEnterableKeyCodes:function(t){var n={190:"."};return jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,n,i,o,a){o=o.replace(/[^0-9^\.^\-]/g,"");var r,l=o.split(".");return r=l.length>1?t.isNumber(e.maxRound)?l[0]+t.left(l[1],e.maxRound):l.join(""):l[0].split(".")[0]}},r={getEnterableKeyCodes:function(t){var n={189:"-",191:"/"};return jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,n,i,o,a){if(o=o.replace(/\D/g,""),""==o)return o;var r=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})?.*$/;"time"==e.patternArgument&&(r=/^([0-9]{4})\-?([0-9]{1,2})?\-?([0-9]{1,2})? ?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/);var l=o.match(r),s="",d=function(e,n,i,o){var a={Y:function(e){return"undefined"==typeof e&&(e=TODAY.getFullYear()),""!=e&&"0000"!=e||(e=TODAY.getFullYear()),e.length<4?t.setDigit(e,4):e},M:function(e){return"undefined"==typeof e&&(e=TODAY.getMonth()+1),e>12?12:0==e?"01":t.setDigit(e,2)},D:function(e){"undefined"==typeof e&&(e=TODAY.getDate()+1);var n=t.daysOfMonth(o[1],o[2]-1);return e>n?n:0==e?"01":t.setDigit(e,2)},h:function(e){return e||(e=0),e>23?23:t.setDigit(e,2)},m:function(e){return e||(e=0),e>59?59:t.setDigit(e,2)},s:function(e){return e||(e=0),e>59?59:t.setDigit(e,2)}};return i?a[n](e):e};return s=o.replace(r,function(t,n){var i=[d(arguments[1],"Y",a)];return(arguments[2]||a)&&i.push("-"+d(arguments[2],"M",a)),(arguments[3]||a)&&i.push("-"+d(arguments[3],"D",a,arguments)),"time"==e.patternArgument&&((arguments[4]||a)&&i.push(" "+d(arguments[4],"h",a)),(arguments[5]||a)&&i.push(":"+d(arguments[5],"m",a)),(arguments[6]||a)&&i.push(":"+d(arguments[6],"s",a))),i.join("")}),"blur"!=a||l?l||(s=s.length>4?t.left(s,4):s):s=function(){var t=[d(s,"Y",a)];return t.push("-"+d(0,"M",a)),t.push("-"+d(0,"D",a,arguments)),"time"==e.patternArgument&&(t.push(" "+d(0,"h",a)),t.push(":"+d(0,"m",a)),t.push(":"+d(0,"s",a))),t.join("")}(),s}},l={getEnterableKeyCodes:function(t){var n={186:":"};return jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,n,i,o,a){o=o.replace(/\D/g,"");var r=/^([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?.*$/,l=o.match(r),s=o.replace(r,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(":"+arguments[2]),arguments[3]&&n.push(":"+arguments[3]),n.join("")});return l||(s=s.length>2?t.left(s,2):s),s}},s={getEnterableKeyCodes:function(t){var n={189:"-"};return jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,t,n,i,o){i=i.replace(/\D/g,"");var a=/^([0-9]{3})\-?([0-9]{1,2})?\-?([0-9]{1,5})?.*$/,r=i.replace(a,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),n.join("-")});return r}},d={getEnterableKeyCodes:function(t){var n={189:"-",188:","};return jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,t,n,i,o){i=i.replace(/\D/g,"");var a=/^([0-9]{3})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/;"02"==i.substr(0,2)&&(a=/^([0-9]{2})\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?\-?([0-9]{1,4})?/);var r=i.replace(a,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),arguments[4]&&n.push(arguments[4]),arguments[5]&&n.push(arguments[5]),n.join("-")});return r}},c={getEnterableKeyCodes:function(t){var n={189:"-"};return jQuery.extend(n,e.formatter.ctrlKeys,e.formatter.numKeys)},getPatternValue:function(e,t,n,i,o){i=i.replace(/\D/g,"").substring(0,16);var a=/^([0-9]{4})\-?([0-9]{4})?\-?([0-9]{4})?\-?([0-9]{4})?/,r=i.replace(a,function(e,t){var n=[arguments[1]];return arguments[2]&&n.push(arguments[2]),arguments[3]&&n.push(arguments[3]),arguments[4]&&n.push(arguments[4]),n.join("-")});return r}},u={getEnterableKeyCodes:function(e){return e.getEnterableKeyCodes?e.getEnterableKeyCodes.call(e,{$input:e.$input}):null},getPatternValue:function(e,t,n,i,o){if(e.getPatternValue)return e.getPatternValue.call(e,{event:n,$input:e.$input,value:i})}};e.formatter={ctrlKeys:n,numKeys:i,money:o,number:a,date:r,time:l,bizno:s,phone:d,credit:c,custom:u}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"menu",version:"0.7.0"},function(){var i=function(){var i,o=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",iconWidth:22,acceleratorWidth:100,menuBodyPadding:5,offset:{left:0,top:0},position:"fixed",animateTime:250,items:[],itemClickAndClose:!0,columnKeys:{label:"label",items:"items"}},this.openTimer=null,this.closeTimer=null,this.queue=[],this.menuBar={},this.state=void 0,i=this.config;var a=function(e){e?(jQuery(document).unbind("click.ax5menu-"+this.menuId).bind("click.ax5menu-"+this.menuId,d.bind(this)),jQuery(window).unbind("keydown.ax5menu-"+this.menuId).bind("keydown.ax5menu-"+this.menuId,function(e){e.which==ax5.info.eventKeys.ESC&&o.close()}),jQuery(window).unbind("resize.ax5menu-"+this.menuId).bind("resize.ax5menu-"+this.menuId,function(e){o.close()})):(jQuery(document).unbind("click.ax5menu-"+this.menuId),jQuery(window).unbind("keydown.ax5menu-"+this.menuId),jQuery(window).unbind("resize.ax5menu-"+this.menuId))},r=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),o.state=t.state,e=null,t=null,!0},l=function(e){return this.onLoad&&this.onLoad.call(e,e),e=null,!0},s=function u(t,n,a,s){var d,h,p=t;return p.theme=t.theme||i.theme,p.cfg={icons:jQuery.extend({},i.icons),iconWidth:t.iconWidth||i.iconWidth,acceleratorWidth:t.acceleratorWidth||i.acceleratorWidth},n.forEach(function(e){e.html||e.divide?(e["@isMenu"]=!1,e.html&&(e["@html"]=e.html.call({item:e,config:i,opt:t}))):e["@isMenu"]=!0}),p[i.columnKeys.items]=n,p["@depth"]=a,p["@path"]=s||"root",p["@hasChild"]=function(){return this[i.columnKeys.items]&&this[i.columnKeys.items].length>0},d=jQuery(e.tmpl.get.call(this,"tmpl",p,i.columnKeys)),jQuery(document.body).append(d),h=this.queue.splice(a),h.forEach(function(e){e.$target.remove()}),this.queue.push({$target:d,data:jQuery.extend({},p)}),d.find("[data-menu-item-index]").bind("mouseover",function(){var e,n,a,r,l,s,d=this.getAttribute("data-menu-item-depth"),c=this.getAttribute("data-menu-item-index"),h=this.getAttribute("data-menu-item-path");null!=d&&"undefined"!=typeof d&&(l=o.queue[d].data[i.columnKeys.items][c][i.columnKeys.items],s=o.queue[d].$target,s.find("[data-menu-item-index]").removeClass("hover"),jQuery(this).addClass("hover"),s.attr("data-selected-menu-item-index")!=c&&(s.attr("data-selected-menu-item-index",c),l&&l.length>0?(e=jQuery(this),n=e.offset(),a="fixed"==i.position?jQuery(document).scrollTop():0,r={"@parent":{left:n.left,top:n.top,width:e.outerWidth(),height:e.outerHeight()},left:n.left+e.outerWidth()-i.menuBodyPadding,top:n.top-i.menuBodyPadding-1-a},r=jQuery.extend(!0,t,r),u.call(o,r,l,Number(d)+1,h)):o.queue.splice(Number(d)+1).forEach(function(e){e.$target.remove()}))),d=null,c=null,h=null,e=null,n=null,a=null,r=null,l=null,s=null}),0==a&&(p.direction&&d.addClass("direction-"+p.direction),r.call(this,null,{self:this,items:n,parent:function(e){if(!e)return!1;var t=null;try{t=Function("","return this.config.items["+e.substring(5).replace(/\./g,"].items[")+"];").call(o)}catch(n){}return t}(p["@path"]),state:"popup"})),c.call(this,d,p),l.call(this,{self:this,items:n,element:d.get(0)}),p=null,d=null,h=null,t=null,n=null,a=null,s=null,this},d=function(e,t,a){if(t=n.findParentNode(e.target,function(e){if(e.getAttribute("data-menu-item-index"))return!0})){if(a=function(e){if(!e)return!1;var t;try{t=Function("","return this.config.items["+e.substring(5).replace(/\./g,"]."+i.columnKeys.items+"[")+"];").call(o)}catch(n){console.log(ax5.info.getError("ax5menu","501","menuItemClick"))}try{return t}finally{t=null}}(t.getAttribute("data-menu-item-path")),!a)return this;a.check&&(function(e){var t={checkbox:function(e){this.checked=!e},radio:function(t){var n=this.name;e.forEach(function(e){e.check&&"radio"===e.check.type&&e.check.name==n&&(e.check.checked=!1)}),this.checked=!t}};t[this.type]&&t[this.type].call(this,this.checked),t=null}.call(a.check,i.items),i.itemClickAndClose||o.queue.forEach(function(e){e.$target.find("[data-menu-item-index]").each(function(){var t=e.data[i.columnKeys.items][this.getAttribute("data-menu-item-index")];t.check&&jQuery(this).find(".item-checkbox-wrap").attr("data-item-checked",t.check.checked)})})),o.onClick&&o.onClick.call(a,a),a[i.columnKeys.items]&&0!=a[i.columnKeys.items].length||!i.itemClickAndClose||o.close()}else o.close();return t=null,a=null,this},c=function(e,t){var n=jQuery(window),o=jQuery(document),a="fixed"==i.position?n.height():o.height(),r=n.width(),l=e.outerHeight(),s=e.outerWidth(),d=t.left,c=t.top,u=i.position||"fixed";return d+s>r&&(d=t["@parent"]?t["@parent"].left-s+i.menuBodyPadding:r-s),c+l>a&&(c=a-l),e.css({left:d,top:c,position:u}),e=null,t=null,n=null,o=null,a=null,r=null,l=null,s=null,d=null,c=null,u=null,this};this.init=function(){o.menuId=ax5.getGuid(),this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.onLoad=i.onLoad,r.call(this,null,{self:this,state:"init"})},this.popup=function(){var e={event:function(e,t){e={left:e.clientX,top:"fixed"==i.position?e.clientY:e.pageY,width:i.width,theme:i.theme},i.offset&&(i.offset.left&&(e.left+=i.offset.left),i.offset.top&&(e.top+=i.offset.top)),t=jQuery.extend(!0,e,t);try{return t}finally{e=null}},object:function(e,t){e={left:e.left,top:e.top,width:e.width||i.width,theme:e.theme||i.theme},i.offset&&(i.offset.left&&(e.left+=i.offset.left),i.offset.top&&(e.top+=i.offset.top)),t=jQuery.extend(!0,e,t);try{return t}finally{e=null}}},t=function(e){e&&(i.theme=e)};return function(n,o){if(!n)return this;o=e["undefined"==typeof n.clientX?"object":"event"].call(this,n,o),t(o.theme);var r=[].concat(i.items);if(o.filter){var l=function d(e){var t=[];return e.forEach(function(e){e.items&&e.items.length>0&&(e.items=d(e.items)),o.filter.call(e)&&t.push(e)}),t};r=l(r)}return s.call(this,o,r,0),a.call(this,!0),n=null,this}}(),this.attach=function(){var t={object:function(e,t){e={left:e.left,top:e.top,width:e.width||i.width,theme:e.theme||i.theme,direction:e.direction||i.direction},t=jQuery.extend(!0,t,e);try{return t}finally{e=null,t=null}}},r=function(e,n,r){var l=jQuery(e),d=l.offset(),c=l.outerHeight(),u=Number(e.getAttribute("data-menu-item-index")),h="fixed"==i.position?jQuery(document).scrollTop():0;return o.menuBar.openedIndex==u?("click"==r&&o.close(),!1):(o.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),o.menuBar.opened=!0,o.menuBar.openedIndex=u,l.attr("data-menu-item-opened","true"),l.addClass("hover"),i.offset&&(i.offset.left&&(d.left+=i.offset.left),i.offset.top&&(d.top+=i.offset.top)),n=t.object.call(this,{left:d.left,top:d.top+c-h},n),i.items&&i.items[u][i.columnKeys.items]&&i.items[u][i.columnKeys.items].length&&(s.call(o,n,i.items[u][i.columnKeys.items],0,"root."+e.getAttribute("data-menu-item-index")),a.call(o,!0)),e=null,n=null,l=null,d=null,c=null,u=null,void(h=null))};return function(t,a){var l,s={},d=i.items;return"undefined"==typeof a&&(a={}),s.theme=a.theme||i.theme,s.cfg={icons:jQuery.extend({},i.icons),iconWidth:a.iconWidth||i.iconWidth,acceleratorWidth:a.acceleratorWidth||i.acceleratorWidth},d.forEach(function(e){e.html||e.divide?(e["@isMenu"]=!1,e.html&&(e["@html"]=e.html.call({item:e,config:i,opt:a}))):e["@isMenu"]=!0}),s[i.columnKeys.items]=d,l=jQuery(e.tmpl.get.call(this,"tmplMenubar",s,i.columnKeys)),o.menuBar={target:jQuery(t),opened:!1},o.menuBar.target.html(l),o.menuBar.target.bind("click",function(e){if(!e)return this;var t=n.findParentNode(e.target,function(e){if(e.getAttribute("data-menu-item-index"))return!0});t&&r(t,a,"click"),t=null}),o.menuBar.target.bind("mouseover",function(e){if(!o.menuBar.opened)return!1;var t=n.findParentNode(e.target,function(e){if(e.getAttribute("data-menu-item-index"))return!0});t&&r(t,a,"mouseover"),t=null}),t=null,a=null,s=null,d=null,l=null,this}}(),this.close=function(){return o.menuBar&&o.menuBar.target&&(o.menuBar.target.find("[data-menu-item-index]").removeClass("hover"),o.menuBar.opened=!1,o.menuBar.openedIndex=null),a.call(this,!1),this.queue.forEach(function(e){e.$target.remove()}),this.queue=[],r.call(this,null,{self:this,state:"close"}),this},this.getCheckValue=function(){var e={},t=function(i){for(var o=i.length;o--;)i[o].check&&i[o].check.checked&&(e[i[o].check.name]?(n.isString(e[i[o].check.name])&&(e[i[o].check.name]=[e[i[o].check.name]]),e[i[o].check.name].push(i[o].check.value)):e[i[o].check.name]=i[o].check.value),i[o].items&&i[o].items.length>0&&t(i[o].items)};t(i.items);try{return e}finally{e=null,t=null}},this.main=function(){t.menu_instance=t.menu_instance||[],t.menu_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.menu}(),function(){var e=ax5.ui.menu,t=function(e){return'\n        <div class="ax5-ui-menu {{theme}}" {{#width}}style="width:{{width}}px;"{{/width}}>\n            <div class="ax-menu-body">\n                {{#'+e.items+'}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class="ax-menu-item" data-menu-item-depth="{{@depth}}" data-menu-item-index="{{@i}}" data-menu-item-path="{{@path}}.{{@i}}">\n                        <span class="ax-menu-item-cell ax-menu-item-checkbox">\n                            {{#check}}\n                            <span class="item-checkbox-wrap useCheckBox" {{#checked}}data-item-checked="true"{{/checked}}></span>\n                            {{/check}}\n                            {{^check}}\n                            <span class="item-checkbox-wrap"></span>\n                            {{/check}}\n                        </span>\n                        {{#icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                        {{/icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{'+e.label+'}}}</span>\n                        {{#accelerator}}\n                        <span class="ax-menu-item-cell ax-menu-item-accelerator" style="width:{{cfg.acceleratorWidth}}px;"><span class="item-wrap">{{.}}</span></span>\n                        {{/accelerator}}\n                        {{#@hasChild}}\n                        <span class="ax-menu-item-cell ax-menu-item-handle">{{{cfg.icons.arrow}}}</span>\n                        {{/@hasChild}}\n                    </div>\n                    {{/@isMenu}}\n\n                {{/'+e.items+'}}\n            </div>\n            <div class="ax-menu-arrow"></div>\n        </div>\n        '},n=function(e){return'\n        <div class="ax5-ui-menubar {{theme}}">\n            <div class="ax-menu-body">\n                {{#'+e.items+'}}\n                    {{^@isMenu}}\n                        {{#divide}}\n                        <div class="ax-menu-item-divide" data-menu-item-index="{{@i}}"></div>\n                        {{/divide}}\n                        {{#html}}\n                        <div class="ax-menu-item-html" data-menu-item-index="{{@i}}">{{{@html}}}</div>\n                        {{/html}}\n                    {{/@isMenu}}\n                    {{#@isMenu}}\n                    <div class="ax-menu-item" data-menu-item-index="{{@i}}">\n                        {{#icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-icon" style="width:{{cfg.iconWidth}}px;">{{{.}}}</span>\n                        {{/icon}}\n                        <span class="ax-menu-item-cell ax-menu-item-label">{{{'+e.label+"}}}</span>\n                    </div>\n                    {{/@isMenu}}\n                {{/"+e.items+"}}\n            </div>\n        </div>\n        "};e.tmpl={tmpl:t,tmplMenubar:n,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"select",version:"0.4.6"},function(){var t=function(){var t,i=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:100,lang:{noSelected:"",noOptions:"no options",loading:"now loading..",multipleLabel:'"{{label}}"외 {{length}}건'},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,this.xvar={},t=this.config;var o={18:"KEY_ALT",8:"KEY_BACKSPACE",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",27:"KEY_ESC",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",13:"KEY_RETURN",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),"changeValue"==t.state&&(e&&e.onChange?e.onChange.call(t,t):this.onChange&&this.onChange.call(t,t)),e=null,t=null,!0},r=function(){for(var e,t=this.queue.length;t--;)this.queue[t].$display&&(e=Math.max(this.queue[t].$select.outerWidth(),n.number(this.queue[t].minWidth)),this.queue[t].$display.css({"min-width":e}),this.queue[t].reset&&this.queue[t].$display.find(".addon-icon-reset").css({"line-height":this.queue[t].$display.height()+"px"}));return t=null,e=null,this},l=function(e){if(!this.activeSelectOptionGroup)return this;var t=this.queue[this.activeSelectQueueIndex],n={},i={};e&&jQuery(document.body).append(this.activeSelectOptionGroup),n=t.$target.offset(),i={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activeSelectOptionGroup.addClass("direction-"+t.direction),this.activeSelectOptionGroup.css(function(){return"top"==t.direction?{left:n.left,top:n.top+i.height+1,width:i.width}:"bottom"==t.direction?{left:n.left,top:n.top-this.activeSelectOptionGroup.outerHeight()-1,width:i.width}:void 0}.call(this))},s=function(e,t){if(!this.activeSelectOptionGroup)return this;var i=this.queue[this.activeSelectQueueIndex],o="display";return(t=n.findParentNode(e.target,function(e){return e.getAttribute("data-option-value")?(o="optionItem",!0):i.$target.get(0)==e?(o="display",!0):void 0}))?("optionItem"===o&&(this.val(i.id,{index:{gindex:t.getAttribute("data-option-group-index"),index:t.getAttribute("data-option-index")}},void 0,"internal"),i.$select.trigger("change"),i.$display.focus(),i.multiple||this.close()),this):(this.close(),this)},d=function(e){if(e.keyCode==ax5.info.eventKeys.ESC)this.close();else if(e.which==ax5.info.eventKeys.RETURN)if(this.queue[this.activeSelectQueueIndex].optionFocusIndex>-1){var t=this.activeSelectOptionGroup.find('[data-option-focus-index="'+this.queue[this.activeSelectQueueIndex].optionFocusIndex+'"]');this.val(this.queue[this.activeSelectQueueIndex].id,{index:{gindex:t.attr("data-option-group-index"),index:t.attr("data-option-index")}},void 0,"internal"),this.queue[this.activeSelectQueueIndex].$select.trigger("change"),this.queue[this.activeSelectQueueIndex].multiple||this.close()}else this.close()},c=function(e){var t=this.queue[e],i=[];return n.isArray(t.selected)&&t.selected.length>0?t.selected.forEach(function(e){e.selected&&i.push(e[t.columnKeys.optionText])}):!t.multiple&&t.options&&t.options[0]?t.options[0].optgroup?i[0]=t.options[0].options[0][t.columnKeys.optionText]:i[0]=t.options[0][t.columnKeys.optionText]:i[0]=t.lang.noSelected,function(){if(t.multiple&&i.length>1){var e={label:i[0],length:i.length-1};return ax5.mustache.render(t.lang.multipleLabel,e)}return i[0]}()},u=function(e){this.queue[e].$displayLabel.html(c.call(this,e))},h=function(e,t){var n,i=[],o=-1,a=this.queue[e].indexedOptions.length-1;if(t){for(;a-o++;){if(n=this.queue[e].indexedOptions[o],(""+n.value).toLowerCase()==t.toLowerCase()){i=[{"@findex":n["@findex"],optionsSort:0}];break}var r=(""+n.value).toLowerCase().search(t.toLowerCase());if(r>-1&&(i.push({"@findex":n["@findex"],optionsSort:r}),i.length>2))break;r=null}i.sort(function(e,t){return e.optionsSort-t.optionsSort})}i&&i.length>0&&p.call(this,e,void 0,i[0]["@findex"]);try{return i}finally{i=null,o=null,a=null,n=null}},p=function(e,t,n){var i,o,a,r;if(this.activeSelectOptionGroup&&this.queue[e].options&&this.queue[e].options.length>0){"undefined"!=typeof n?i=n:(o=this.queue[e].optionFocusIndex==-1?this.queue[e].optionSelectedIndex||-1:this.queue[e].optionFocusIndex,o==-1?i=t>0?0:this.queue[e].optionItemLength-1:(i=o+t,i<0?i=0:i>this.queue[e].optionItemLength-1&&(i=this.queue[e].optionItemLength-1))),this.queue[e].optionFocusIndex=i,this.activeSelectOptionGroup.find("[data-option-focus-index]").removeClass("hover"),a=this.activeSelectOptionGroup.find('[data-option-focus-index="'+i+'"]').addClass("hover"),r=this.activeSelectOptionGroup.find('[data-els="content"]');var l=a.outerHeight(),s=r.innerHeight(),d=r.scrollTop(),c=a.position().top+r.scrollTop();s+d<c+l?r.scrollTop(c+l-s):d>c&&r.scrollTop(c)}},f=function(){var t=n.debounce(function(e,t){h.call(i,t,e),i.queue[t].$displayInput.val("")},300),a={click:function(e,t){var o=n.findParentNode(t.target,function(e){if(e.getAttribute("data-selected-clear"))return!0});o?this.val(e,{clear:!0}):i.activeSelectQueueIndex==e?this.queue[e].optionFocusIndex==-1&&i.close():(i.open(e),n.stopEvent(t))},keyUp:function(e,n){n.which==ax5.info.eventKeys.SPACE?a.click.call(this,e,n):o[n.which]||t(this.queue[e].$displayInput.val(),e)},keyDown:function(e,t){t.which==ax5.info.eventKeys.DOWN?(p.call(this,e,1),n.stopEvent(t)):t.which==ax5.info.eventKeys.UP&&(p.call(this,e,-1),n.stopEvent(t))},blur:function(e,t){},selectChange:function(e,t){this.val(e,this.queue[e].$select.val(),!0)}};return function(t){var n=this.queue[t],i={};return n.selected=[],n.$display?(n.$displayLabel.html(c.call(this,t)),n.options=g.call(this,t,n.options),r.call(this)):(i.instanceId=this.instanceId,i.id=n.id,i.name=n.name,i.theme=n.theme,i.tabIndex=n.tabIndex,i.multiple=n.multiple,i.reset=n.reset,i.label=c.call(this,t),i.formSize=function(){return n.size?"input-"+n.size:""}(),n.$display=e.tmpl.get.call(this,"tmpl",i),n.$displayLabel=n.$display.find('[data-ax5select-display="label"]'),n.$target.find("select").get(0)?(n.$select=n.$target.find("select"),n.$select.attr("tabindex","-1").attr("class","form-control "+i.formSize),i.name&&n.$select.attr("name","name"),i.multiple&&n.$select.attr("multiple","multiple")):(n.$select=e.tmpl.get.call(this,"selectTmpl",i),n.$target.append(n.$select)),n.$target.append(n.$display),n.$displayInput=n.$display.find('[data-ax5select-display="input"]'),n.options=g.call(this,t,n.options),r.call(this),n.$displayInput.unbind("blur.ax5select").bind("blur.ax5select",a.blur.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",a.keyUp.bind(this,t)).unbind("keydown.ax5select").bind("keydown.ax5select",a.keyDown.bind(this,t))),n.$display.unbind("click.ax5select").bind("click.ax5select",a.click.bind(this,t)).unbind("keyup.ax5select").bind("keyup.ax5select",a.keyUp.bind(this,t)),n.$select.unbind("change.ax5select").bind("change.ax5select",a.selectChange.bind(this,t)),i=null,n=null,t=null,this}}(),g=function(){var e=function(e,t){t?this.queue[e].multiple?this.queue[e].selected.push(jQuery.extend({},t)):this.queue[e].selected[0]=jQuery.extend({},t):this.queue[e].selected=[]};return function(t,o){var a,r,l,s=this.queue[t],d=0;return e.call(this,t,!1),o?(s.options=o,s.indexedOptions=[],a=[],s.options.forEach(function(n,o){n.optgroup?(n["@gindex"]=o,n.options.forEach(function(n,o){n["@index"]=o,n["@findex"]=d,a.push('<option value="'+n[s.columnKeys.optionValue]+'" '+(n[s.columnKeys.optionSelected]?' selected="selected"':"")+">"+n[s.columnKeys.optionText]+"</option>"),n[s.columnKeys.optionSelected]&&e.call(i,t,n),s.indexedOptions.push({"@findex":d,value:n[s.columnKeys.optionValue],text:n[s.columnKeys.optionText]}),d++})):(n["@index"]=o,n["@findex"]=d,a.push('<option value="'+n[s.columnKeys.optionValue]+'" '+(n[s.columnKeys.optionSelected]?' selected="selected"':"")+">"+n[s.columnKeys.optionText]+"</option>"),n[s.columnKeys.optionSelected]&&e.call(i,t,n),s.indexedOptions.push({"@findex":d,value:n[s.columnKeys.optionValue],text:n[s.columnKeys.optionText]}),d++)}),s.optionItemLength=d,s.$select.html(a.join(""))):(r=n.toArray(s.$select.get(0).options),l=[],r.forEach(function(n,o){var a={};a[s.columnKeys.optionValue]=n.value,a[s.columnKeys.optionText]=n.text,a[s.columnKeys.optionSelected]=n.selected,a["@index"]=o,a["@findex"]=o,n.selected&&e.call(i,t,a),l.push(a),a=null}),s.options=l,s.indexedOptions=l),!s.multiple&&0==s.selected.length&&s.options&&s.options[0]&&(s.options[0].optgroup?(s.options[0].options[0][s.columnKeys.optionSelected]=!0,s.selected.push(jQuery.extend({},s.options[0].options[0]))):(s.options[0][s.columnKeys.optionSelected]=!0,s.selected.push(jQuery.extend({},s.options[0])))),a=null,r=null,l=null,s.options}}(),m=function(e){return n.isString(e)||(e=jQuery(e).data("data-ax5select-id")),n.isString(e)?n.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5select","402","getQueIdx"))};this.init=function(){this.onStateChanged=t.onStateChanged,this.onChange=t.onChange,jQuery(window).bind("resize.ax5select-display-"+this.instanceId,function(){r.call(this)}.bind(this))},this.bind=function(e){var i,o={};return e=jQuery.extend(!0,o,t,e),e.target?(e.$target=jQuery(e.target),e.id||(e.id=e.$target.data("data-ax5select-id")),e.id||(e.id="ax5select-"+ax5.getGuid(),e.$target.data("data-ax5select-id",e.id)),e.name=e.$target.attr("data-ax5select"),e.options&&(e.options=JSON.parse(JSON.stringify(e.options))),function(t){n.isObject(t)&&!t.error&&(e=jQuery.extend(!0,e,t))}(n.parseJson(e.$target.attr("data-ax5select-config"),!0)),i=n.search(this.queue,function(){return this.id==e.id}),i===-1?(this.queue.push(e),f.call(this,this.queue.length-1)):(this.queue[i].selected=[],this.queue[i].options=e.options,this.queue[i]=jQuery.extend(!0,{},this.queue[i],e),f.call(this,i)),o=null,i=null,this):(console.log(ax5.info.getError("ax5select","401","bind")),this)},this.open=function(){var i=function(t){t.onExpand.call({self:this,item:t},function(t){if(this.waitOptionsCallback){var i={},o=this.queue[this.activeSelectQueueIndex];!function(e,t){var i={};t.options.forEach(function(t,n){t["@index"]=n,i[t[e.columnKeys.optionValue]]=t}),n.isArray(e.selected)&&e.selected.forEach(function(n){i[n[e.columnKeys.optionValue]]&&(t.options[i[n[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(o,t),o.$displayLabel.html(c.call(this,this.activeSelectQueueIndex)),o.options=g.call(this,this.activeSelectQueueIndex,t.options),r.call(this),i.id=o.id,i.theme=o.theme,i.size="ax5select-option-group-"+o.size,i.multiple=o.multiple,i.lang=o.lang,i.options=o.options,this.activeSelectOptionGroup.find('[data-els="content"]').html(e.tmpl.get.call(this,"optionsTmpl",i,o.columnKeys))}}.bind(this))};return function(o,r){this.waitOptionsCallback=null;var c,u,h=n.isNumber(o)?o:m.call(this,o),p=this.queue[h],f={};return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeSelectOptionGroup?this.activeSelectQueueIndex==h?this:r>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(r||0)+1)}.bind(this),t.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),f.id=p.id,f.theme=p.theme,f.size="ax5select-option-group-"+p.size,f.multiple=p.multiple,f.lang=p.lang,p.$display.attr("data-select-option-group-opened","true"),p.onExpand&&(f.waitOptions=!0),f.options=p.options,this.activeSelectOptionGroup=e.tmpl.get.call(this,"optionGroupTmpl",f),this.activeSelectOptionGroup.find('[data-els="content"]').html(e.tmpl.get.call(this,"optionsTmpl",f,p.columnKeys)),this.activeSelectQueueIndex=h,l.call(this,"append"),jQuery(window).bind("resize.ax5select-"+this.instanceId,function(){l.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(u=this.activeSelectOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),u.get(0)&&(c=u.position().top-this.activeSelectOptionGroup.height()/3,this.activeSelectOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:c},p.animateTime,"swing",function(){}))),p.$displayInput.val(""),setTimeout(function(){p.$displayInput.trigger("focus"),jQuery(window).bind("keyup.ax5select-"+this.instanceId,function(e){e=e||window.event,d.call(this,e),n.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5select-"+this.instanceId,function(e){e=e||window.event,s.call(this,e),n.stopEvent(e)}.bind(this))}.bind(this),300),a.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,i.call(this,p)),f=null,c=null,u=null,this))}}(),this.update=function(e){return this.bind(e),this},this.val=function(){var e=function(e,t,n){return"undefined"==typeof n?!e.multiple||!t:n},t=function(e){this.queue[e].options.forEach(function(e){e.optgroup?e.options.forEach(function(e){e.selected=!1}):e.selected=!1})},o={index:function(t,o,a){var r=this.queue[t];n.isString(o.index.gindex)?(r.options[o.index.gindex].options[o.index.index][r.columnKeys.optionSelected]=e(r,r.options[o.index.gindex].options[o.index.index][r.columnKeys.optionSelected],a),i.activeSelectOptionGroup.find('[data-option-group-index="'+o.index.gindex+'"][data-option-index="'+o.index.index+'"]').attr("data-option-selected",r.options[o.index.gindex].options[o.index.index][r.columnKeys.optionSelected].toString())):(r.options[o.index.index][r.columnKeys.optionSelected]=e(r,r.options[o.index.index][r.columnKeys.optionSelected],a),i.activeSelectOptionGroup.find('[data-option-index="'+o.index.index+'"]').attr("data-option-selected",r.options[o.index.index][r.columnKeys.optionSelected].toString())),g.call(this,t,r.options),u.call(this,t),l.call(this)},arr:function(e,t,a){t.forEach(function(t){if(n.isString(t)||n.isNumber(t))o.value.call(i,e,t,a);else for(var r in o)if(t[r]){o[r].call(i,e,t,a);break}})},value:function(t,i,o){var a=this.queue[t],r=n.search(a.options,function(){return this[a.columnKeys.optionValue]==i});return r>-1?(a.options[r][a.columnKeys.optionSelected]=e(a,a.options[r][a.columnKeys.optionSelected],o),g.call(this,t,a.options),void u.call(this,t)):void console.log(ax5.info.getError("ax5select","501","val"))},text:function(t,i,o){var a=this.queue[t],r=n.search(a.options,function(){return this[a.columnKeys.optionText]==i});return r>-1?(a.options[r][a.columnKeys.optionSelected]=e(a,a.options[r][a.columnKeys.optionSelected],o),g.call(this,t,a.options),void u.call(this,t)):void console.log(ax5.info.getError("ax5select","501","val"))},clear:function(e){t.call(this,e),g.call(this,e,this.queue[e].options),u.call(this,e),this.activeSelectOptionGroup&&this.activeSelectOptionGroup.find("[data-option-index]").attr("data-option-selected","false");
}};return function(e,i,r,l){var s=n.isNumber(e)?e:m.call(this,e);if(s===-1)return void console.log(ax5.info.getError("ax5select","402","val"));if("undefined"==typeof i||this.queue[s].multiple||t.call(this,s),"undefined"==typeof i)return this.queue[s].selected;if(n.isArray(i))o.arr.call(this,s,i,r);else if(n.isString(i)||n.isNumber(i))o.value.call(this,s,i,r);else if(null===i)o.clear.call(this,s);else for(var d in o)if(i[d]){o[d].call(this,s,i,r);break}return"undefined"!=typeof i&&a.call(this,this.queue[s],{self:this,item:this.queue[s],state:l?"changeValue":"setValue",value:this.queue[s].selected,internal:l}),e=null,this}}(),this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeSelectOptionGroup?(e=this.queue[this.activeSelectQueueIndex],e.optionFocusIndex=-1,e.$displayInput.val("").trigger("blur"),e.$display.removeAttr("data-select-option-group-opened").trigger("focus"),this.activeSelectOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5select-"+this.instanceId).unbind("click.ax5select-"+this.instanceId).unbind("keyup.ax5select-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeSelectOptionGroup&&this.activeSelectOptionGroup.remove(),this.activeSelectOptionGroup=null,this.activeSelectQueueIndex=-1;var t={self:this,item:e,value:e.selected,state:"close"};a.call(this,e,t),e.onClose&&e.onClose.call(t)}.bind(this),t.animateTime),this.waitOptionsCallback=null,this):this},this.enable=function(e){var t=m.call(this,e);return this.queue[t].$display.removeAttr("disabled"),this.queue[t].$select.removeAttr("disabled"),a.call(this,this.queue[t],{self:this,state:"enable"}),this},this.disable=function(e){var t=m.call(this,e);return this.queue[t].$display.attr("disabled","disabled"),this.queue[t].$select.attr("disabled","disabled"),a.call(this,this.queue[t],{self:this,state:"disable"}),this},this.main=function(){arguments&&n.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}()),e=ax5.ui.select}(),ax5.ui.select_instance=new ax5.ui.select,jQuery.fn.ax5select=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.select_instance.open(this);case"close":return ax5.ui.select_instance.close(this);case"setValue":return ax5.ui.select_instance.val(this,arguments[1],arguments[2]);case"getValue":return ax5.ui.select_instance.val(this);case"enable":return ax5.ui.select_instance.enable(this);case"disable":return ax5.ui.select_instance.disable(this);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.select_instance.bind(e)});return this}}(),function(){var e=ax5.ui.select,t=function(e){return'\n<div class="ax5select-option-group {{theme}} {{size}}" data-ax5select-option-group="{{id}}">\n    <div class="ax-select-body">\n        <div class="ax-select-option-group-content" data-els="content"></div>\n    </div>\n    <div class="ax-select-arrow"></div> \n</div>\n'},n=function(e){return'\n<a {{^tabIndex}}href="#ax5select-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}class="form-control {{formSize}} ax5select-display {{theme}}" \ndata-ax5select-display="{{id}}" data-ax5select-instance="{{instanceId}}">\n    <div class="ax5select-display-table" data-els="display-table">\n        <div data-ax5select-display="label">{{label}}</div>\n        <div data-ax5select-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n            {{#icons}}\n            <span class="addon-icon-closed">{{clesed}}</span>\n            <span class="addon-icon-opened">{{opened}}</span>\n            {{/icons}}\n            {{^icons}}\n            <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n            <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n            {{/icons}}\n        </div>\n    </div>\n    <input type="text" tabindex="-1" data-ax5select-display="input" \n    style="position:absolute;z-index:0;left:0px;top:0px;font-size:1px;opacity: 0;width:1px;border: 0px none;color : transparent;text-indent: -9999em;" />\n</a>\n'},i=function(e){return'\n<select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n'},o=function(e){return'\n{{#waitOptions}}\n    <div class="ax-select-option-item">\n            <div class="ax-select-option-item-holder">\n                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                    {{{lang.loading}}}\n                </span>\n            </div>\n        </div>\n{{/waitOptions}}\n{{^waitOptions}}\n    {{#options}}\n        {{#optgroup}}\n            <div class="ax-select-option-group">\n                <div class="ax-select-option-item-holder">\n                    <span class="ax-select-option-group-label">\n                        {{{.}}}\n                    </span>\n                </div>\n                {{#options}}\n                <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                data-option-value="{{'+e.optionValue+'}}" \n                {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                    <div class="ax-select-option-item-holder">\n                        {{#multiple}}\n                        <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                            <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                        </span>\n                        {{/multiple}}\n                        <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+e.optionText+'}}</span>\n                    </div>\n                </div>\n                {{/options}}\n            </div>                            \n        {{/optgroup}}\n        {{^optgroup}}\n        <div class="ax-select-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+e.optionValue+'}}" {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n            <div class="ax-select-option-item-holder">\n                {{#multiple}}\n                <span class="ax-select-option-item-cell ax-select-option-item-checkbox">\n                    <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                </span>\n                {{/multiple}}\n                <span class="ax-select-option-item-cell ax-select-option-item-label">{{'+e.optionText+'}}</span>\n            </div>\n        </div>\n        {{/optgroup}}\n    {{/options}}\n    {{^options}}\n        <div class="ax-select-option-item">\n            <div class="ax-select-option-item-holder">\n                <span class="ax-select-option-item-cell ax-select-option-item-label">\n                    {{{lang.noOptions}}}\n                </span>\n            </div>\n        </div>\n    {{/options}}\n{{/waitOptions}}\n'};e.tmpl={optionGroupTmpl:t,tmpl:n,selectTmpl:i,optionsTmpl:o,get:function(t,n,i){return jQuery(ax5.mustache.render(e.tmpl[t].call(this,i),n))}}}();var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"grid",version:"0.3.7"},function(){var i=function(){var i,o=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,frozenColumnIndex:0,frozenRowIndex:0,showLineNumber:!1,showRowSelector:!1,multipleSelect:!0,height:0,columnMinWidth:100,lineNumberColumnWidth:30,rowSelectorColumnWidth:26,sortable:void 0,remoteSort:!1,header:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1},body:{align:!1,columnHeight:26,columnPadding:3,columnBorderWidth:1,grouping:!1},rightSum:!1,footSum:!1,page:{height:25,display:!0,navigationItemCount:5},scroller:{size:15,barMinSize:15,trackPadding:4},columnKeys:{selected:"__selected__",modified:"__modified__",deleted:"__deleted__"}},this.xvar={bodyTrHeight:0,scrollContentWidth:0,scrollContentHeight:0},this.columns=[],this.colGroup=[],this.footSumColumns=[],this.bodyGrouping={},this.list=[],this.page={},this.selectedDataIndexs=[],this.deletedList=[],this.sortInfo={},this.focusedColumn={},this.selectedColumn={},this.isInlineEditing=!1,this.inlineEditing={},this.headerTable={},this.leftHeaderData={},this.headerData={},this.rightHeaderData={},this.bodyRowTable={},this.leftBodyRowData={},this.bodyRowData={},this.rightBodyRowData={},this.bodyRowMap={},this.bodyGroupingTable={},this.leftBodyGroupingData={},this.bodyGroupingData={},this.rightBodyGroupingData={},this.footSumTable={},this.leftFootSumData={},this.footSumData={},this.needToPaintSum=!0,i=this.config;var a=function(){var t={instanceId:this.id};return this.$target.html(e.tmpl.get("main",t)),this.$={container:{hidden:this.$target.find('[data-ax5grid-container="hidden"]'),root:this.$target.find('[data-ax5grid-container="root"]'),header:this.$target.find('[data-ax5grid-container="header"]'),body:this.$target.find('[data-ax5grid-container="body"]'),page:this.$target.find('[data-ax5grid-container="page"]'),scroller:this.$target.find('[data-ax5grid-container="scroller"]')},panel:{"aside-header":this.$target.find('[data-ax5grid-panel="aside-header"]'),"left-header":this.$target.find('[data-ax5grid-panel="left-header"]'),header:this.$target.find('[data-ax5grid-panel="header"]'),"header-scroll":this.$target.find('[data-ax5grid-panel-scroll="header"]'),"right-header":this.$target.find('[data-ax5grid-panel="right-header"]'),"top-aside-body":this.$target.find('[data-ax5grid-panel="top-aside-body"]'),"top-left-body":this.$target.find('[data-ax5grid-panel="top-left-body"]'),"top-body":this.$target.find('[data-ax5grid-panel="top-body"]'),"top-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="top-body"]'),"top-right-body":this.$target.find('[data-ax5grid-panel="top-right-body"]'),"aside-body":this.$target.find('[data-ax5grid-panel="aside-body"]'),"aside-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="aside-body"]'),"left-body":this.$target.find('[data-ax5grid-panel="left-body"]'),"left-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="left-body"]'),body:this.$target.find('[data-ax5grid-panel="body"]'),"body-scroll":this.$target.find('[data-ax5grid-panel-scroll="body"]'),"right-body":this.$target.find('[data-ax5grid-panel="right-body"]'),"right-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="right-body"]'),"bottom-aside-body":this.$target.find('[data-ax5grid-panel="bottom-aside-body"]'),"bottom-left-body":this.$target.find('[data-ax5grid-panel="bottom-left-body"]'),"bottom-body":this.$target.find('[data-ax5grid-panel="bottom-body"]'),"bottom-body-scroll":this.$target.find('[data-ax5grid-panel-scroll="bottom-body"]'),"bottom-right-body":this.$target.find('[data-ax5grid-panel="bottom-right-body"]')},livePanelKeys:[],scroller:{vertical:this.$target.find('[data-ax5grid-scroller="vertical"]'),"vertical-bar":this.$target.find('[data-ax5grid-scroller="vertical-bar"]'),horizontal:this.$target.find('[data-ax5grid-scroller="horizontal"]'),"horizontal-bar":this.$target.find('[data-ax5grid-scroller="horizontal-bar"]'),corner:this.$target.find('[data-ax5grid-scroller="corner"]')},page:{navigation:this.$target.find('[data-ax5grid-page="navigation"]'),status:this.$target.find('[data-ax5grid-page="status"]')},form:{clipboard:this.$target.find('[data-ax5grid-form="clipboard"]')},resizer:{vertical:this.$target.find('[data-ax5grid-resizer="vertical"]'),horizontal:this.$target.find('[data-ax5grid-resizer="horizontal"]')}},this.$.container.root.css({height:this.config.height}),this},r=function(t){this.columns=n.deepCopy(t),this.headerTable=e.util.makeHeaderTable.call(this,this.columns),this.xvar.frozenColumnIndex=i.frozenColumnIndex>this.columns.length?this.columns.length:i.frozenColumnIndex,this.bodyRowTable=e.util.makeBodyRowTable.call(this,this.columns),this.bodyRowMap=e.util.makeBodyRowMap.call(this,this.bodyRowTable),this.xvar.bodyTrHeight=this.bodyRowTable.rows.length*this.config.body.columnHeight;for(var o={},a=0,r=this.headerTable.rows.length;a<r;a++)for(var l=this.headerTable.rows[a],s=0,d=l.cols.length;s<d;s++)o[l.cols[s].colIndex]=jQuery.extend({},l.cols[s]);this.colGroup=[];for(var c in o)this.colGroup.push(o[c]);return this},l=function(){r.call(this,this.config.columns),s.call(this),this.config.footSum&&(d.call(this,this.config.footSum),this.needToPaintSum=!0),this.config.body.grouping&&c.call(this,this.config.body.grouping),u.call(this,!0),e.header.repaint.call(this,!0),e.body.repaint.call(this,!0),e.scroller.resize.call(this)},s=function(){var e,t,i,o=this.$.container.root.width(),a=0,r=[],l=this.colGroup;for(t=0,i=l.length;t<i;t++)n.isNumber(l[t].width)?a+=l[t]._width=l[t].width:"*"===l[t].width?r.push(t):"%"===n.right(l[t].width,1)&&(a+=l[t]._width=o*n.left(l[t].width,"%")/100);if(r.length>0)for(e=(o-a)/r.length,t=0,i=r.length;t<i;t++)l[r[t]]._width=e},d=function(t){n.isArray(t)?this.footSumTable=e.util.makeFootSumTable.call(this,this.footSumColumns=t):(this.footSumColumns=[],this.footSumTable={})},c=function(t){var n=jQuery.extend({},t);"by"in n&&"columns"in n?(this.bodyGrouping={by:n.by,columns:n.columns},this.bodyGroupingTable=e.util.makeBodyGroupingTable.call(this,this.bodyGrouping.columns),this.sortInfo=function(){for(var e={},t=0,n=this.bodyGrouping.by.length;t<n;t++){e[this.bodyGrouping.by[t]]={orderBy:"asc",seq:t,fixed:!0};for(var i=0,o=this.colGroup.length;i<o;i++)this.colGroup[i].key===this.bodyGrouping.by[t]&&(this.colGroup[i].sort="asc",this.colGroup[i].sortFixed=!0)}return e}.call(this)):i.body.grouping=!1},u=function(e){var t,n,o=this.$.container.root.width(),a=this.$.container.root.height(),r=o,l=a,s=i.asidePanelWidth=function(){var e=0;return i.showLineNumber&&(e+=i.lineNumberColumnWidth),i.showRowSelector&&(e+=i.rowSelectorColumnWidth),e}(),d=i.frozenPanelWidth=function(e,t){for(var n=0,i=0,o=t;i<o;i++)n+=e[i]._width;return n}(this.colGroup,i.frozenColumnIndex),c=0,u=function(e){return i.frozenRowIndex*e}(this.xvar.bodyTrHeight),h=function(e){return this.footSumColumns.length*e}.call(this,this.xvar.bodyTrHeight),p=this.headerTable.rows.length*i.header.columnHeight,f=i.page.display?i.page.height:0;(function(){t=a-p-f-h<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0,n=function(){for(var e=0,n=o-s-t,i=0,a=this.colGroup.length;i<a;i++)e+=this.colGroup[i]._width;return e>n?this.config.scroller.size:0}.call(this),n>0&&(t=a-p-f-h-n<this.list.length*this.xvar.bodyTrHeight?this.config.scroller.size:0)}).call(this),r=o-t,l=a-f-n;var g=l-p,m=function(e,t,n,o){var a={},l=!1;switch(n){case"aside":0===s?l=!0:(a.left=0,a.width=s);break;case"left":0===i.frozenColumnIndex?l=!0:(a.left=s,a.width=d);break;case"right":i.rightSum||(l=!0);break;default:"page"!==o&&(0===i.frozenColumnIndex?a.left=s:a.left=d+s,a.width=r-s-d-c)}if(l)return e.hide(),this;if("body"===o)switch(t){case"top":0==i.frozenRowIndex?l=!0:(a.top=0,a.height=u);break;case"bottom":i.footSum?(a.top=g-h,a.height=h):l=!0;break;default:a.top=u,a.height=g-u-h}else"header"===o?a.height=p:"page"===o&&(0==f?l=!0:a.height=f);return l?(e.hide(),this):(e.css(a),this)},v=function(e,t,n,i){var o={},a=!1;switch(i){case"vertical":t>0?(o.width=t,o.height=l,o.bottom=n+f):a=!0;break;case"horizontal":n>0?(o.width=r,o.height=n,o.right=t,o.bottom=f):a=!0;break;case"corner":t>0&&n>0?(o.width=t,o.height=n,o.bottom=f):a=!0}return a?(e.hide(),this):void e.show().css(o)};this.$.container.header.css({height:p}),this.$.container.body.css({height:g}),m.call(this,this.$.panel["aside-header"],"","aside","header"),m.call(this,this.$.panel["left-header"],"","left","header"),m.call(this,this.$.panel.header,"","","header"),m.call(this,this.$.panel["right-header"],"","right","header"),m.call(this,this.$.panel["top-aside-body"],"top","aside","body"),m.call(this,this.$.panel["top-left-body"],"top","left","body"),m.call(this,this.$.panel["top-body"],"top","","body"),m.call(this,this.$.panel["top-right-body"],"top","right","body"),m.call(this,this.$.panel["aside-body"],"","aside","body"),m.call(this,this.$.panel["left-body"],"","left","body"),m.call(this,this.$.panel.body,"","","body"),m.call(this,this.$.panel["right-body"],"","right","body"),m.call(this,this.$.panel["bottom-aside-body"],"bottom","aside","body"),m.call(this,this.$.panel["bottom-left-body"],"bottom","left","body"),m.call(this,this.$.panel["bottom-body"],"bottom","","body"),m.call(this,this.$.panel["bottom-right-body"],"bottom","right","body"),v.call(this,this.$.scroller.vertical,t,n,"vertical"),v.call(this,this.$.scroller.horizontal,t,n,"horizontal"),v.call(this,this.$.scroller.corner,t,n,"corner"),m.call(this,this.$.container.page,"","","page")},h=function(t){if(e.header.repaint.call(this),n.isFunction(this.config.remoteSort)){var i={sortInfo:[]};for(var o in t)i.sortInfo.push({key:o,orderBy:t[o].orderBy,seq:t[o].seq});i.sortInfo.sort(function(e,t){return e.seq>t.seq}),this.config.remoteSort.call(i,i)}else this.config.body.grouping?this.list=e.data.initData.call(this,e.data.sort.call(this,t,e.data.clearGroupingData.call(this,this.list))):this.list=e.data.sort.call(this,t,e.data.clearGroupingData.call(this,this.list)),e.body.repaint.call(this,!0),e.scroller.resize.call(this)};this.init=function(t){if(i=jQuery.extend(!0,{},i,t),!i.target)return console.log(ax5.info.getError("ax5grid","401","init")),this;this.onStateChanged=i.onStateChanged,this.onClick=i.onClick,this.onLoad=i.onLoad,this.onDataChanged=i.body.onDataChanged,this.$target=jQuery(i.target),function(e){n.isObject(e)&&!e.error&&(i=jQuery.extend(!0,i,e))}.call(this,n.parseJson(this.$target.attr("data-ax5grid-config"),!0));var l=this.config=i;this.config.height||(this.config.height=this.$target.height()),this.id||(this.id=this.$target.data("data-ax5grid-id")),this.id||(this.id="ax5grid-"+this.instanceId,this.$target.data("data-ax5grid-id",l.id)),a.call(this),r.call(this,l.columns),s.call(this),l.footSum&&d.call(this,l.footSum),l.body.grouping&&c.call(this,l.body.grouping),u.call(this,!0),e.header.init.call(this),e.header.repaint.call(this),e.body.init.call(this),e.body.repaint.call(this),e.scroller.init.call(this),e.scroller.resize.call(this),jQuery(window).bind("resize.ax5grid-"+this.id,function(){u.call(this),e.scroller.resize.call(this)}.bind(this)),jQuery(document.body).on("click.ax5grid-"+this.id,function(t){var i=!1,a=n.findParentNode(t.target,function(e){return!!(i=e.getAttribute("data-ax5grid-inline-edit-picker"))||"root"===e.getAttribute("data-ax5grid-container")});a&&a.getAttribute("data-ax5grid-instance")===this.id?o.focused=!0:(o.focused=!1,e.body.blur.call(this))}.bind(this));var h={33:"KEY_PAGEUP",34:"KEY_PAGEDOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_LEFT",38:"KEY_UP",39:"KEY_RIGHT",40:"KEY_DOWN"};return jQuery(window).on("keydown.ax5grid-"+this.instanceId,function(t){o.focused&&(o.isInlineEditing?t.which==ax5.info.eventKeys.ESC?o.keyDown("ESC",t.originalEvent):t.which==ax5.info.eventKeys.RETURN?o.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?(o.keyDown("TAB",t.originalEvent),n.stopEvent(t)):t.which==ax5.info.eventKeys.UP?o.keyDown("RETURN",{shiftKey:!0}):t.which==ax5.info.eventKeys.DOWN&&o.keyDown("RETURN",{}):t.metaKey||t.ctrlKey?67==t.which&&o.copySelect():h[t.which]?(o.keyDown(h[t.which],t.originalEvent),n.stopEvent(t)):t.which==ax5.info.eventKeys.ESC?o.focused&&e.body.blur.call(o):t.which==ax5.info.eventKeys.RETURN?o.keyDown("RETURN",t.originalEvent):t.which==ax5.info.eventKeys.TAB?n.stopEvent(t):t.which!=ax5.info.eventKeys.SPACE&&Object.keys(o.focusedColumn).length&&o.keyDown("INLINE_EDIT",t.originalEvent))}),setTimeout(function(){this.onLoad&&this.onLoad.call({self:this})}.bind(this)),this},this.align=function(){return u.call(this),e.scroller.resize.call(this),this},this.keyDown=function(){var t={KEY_UP:function(){e.body.moveFocus.call(this,"UP")},KEY_DOWN:function(){e.body.moveFocus.call(this,"DOWN")},KEY_LEFT:function(){e.body.moveFocus.call(this,"LEFT")},KEY_RIGHT:function(){e.body.moveFocus.call(this,"RIGHT")},KEY_HOME:function(){e.body.moveFocus.call(this,"HOME")},KEY_END:function(){e.body.moveFocus.call(this,"END")},INLINE_EDIT:function(t){e.body.inlineEdit.active.call(this,this.focusedColumn,t),/[0-9a-zA-Z]/.test(t.key)||n.stopEvent(t)},ESC:function(t){e.body.inlineEdit.keydown.call(this,"ESC")},RETURN:function(t){var n=0;for(var i in this.inlineEditing)n++,e.body.inlineEdit.keydown.call(this,"RETURN",i),1==n&&e.body.moveFocus.call(this,t.shiftKey?"UP":"DOWN")&&e.body.inlineEdit.keydown.call(this,"RETURN");0==n&&e.body.inlineEdit.keydown.call(this,"RETURN")},TAB:function(t){var n=0;for(var i in this.inlineEditing)n++,e.body.inlineEdit.keydown.call(this,"RETURN",i),1==n&&e.body.moveFocus.call(this,t.shiftKey?"LEFT":"RIGHT")&&e.body.inlineEdit.keydown.call(this,"RETURN")}};return function(e,n){return e in t&&t[e].call(this,n),this}}(),this.copySelect=function(){var e,t,n,i,o=this.$.form.clipboard,a=[],r="",l=0;for(var s in this.selectedColumn){var d=this.selectedColumn[s];if(d){"undefined"==typeof i&&(i=d.dindex,t=d.rowIndex,n=d.rowIndex),i==d.dindex&&t==d.rowIndex||l++,a[l]||(a[l]=[]);var c=this.bodyRowMap[d.rowIndex+"_"+d.colIndex];c?this.list[d.dindex].__isGrouping?a[l].push(this.list[d.dindex][d.colIndex]):a[l].push(this.list[d.dindex][c.key]):a[l].push(""),i=d.dindex,t=d.rowIndex}}a.forEach(function(e){r+=e.join("\t")+"\n"}),o.get(0).innerText=r,o.select();try{e=document.execCommand("copy")}catch(u){e=!1}return e},this.setData=function(t){return e.data.set.call(this,t),u.call(this),e.body.repaint.call(this),e.scroller.resize.call(this),e.page.navigationUpdate.call(this),e.body.scrollTo.call(this,{top:0}),this},this.getList=function(t){return e.data.getList.call(this,t)},this.setHeight=function(t){return"100%"==t&&(t=this.$target.offsetParent().innerHeight()),this.$target.css({height:t}),this.$.container.root.css({height:t}),u.call(this),e.body.repaint.call(this,"reset"),e.scroller.resize.call(this),this},this.addRow=function(t,n){return e.data.add.call(this,t,n),u.call(this),e.body.repaint.call(this,"reset"),e.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),e.scroller.resize.call(this),this},this.removeRow=function(t){return e.data.remove.call(this,t),u.call(this),e.body.repaint.call(this,"reset"),e.body.moveFocus.call(this,this.config.body.grouping?"START":"END"),e.scroller.resize.call(this),this},this.updateRow=function(t,n){return e.data.update.call(this,t,n),e.body.repaintRow.call(this,n),this},this.deleteRow=function(t){return e.data.deleteRow.call(this,t),u.call(this),e.body.repaint.call(this,"reset"),e.scroller.resize.call(this),this},this.addColumn=function(){var e={first:function(e){this.config.columns=[].concat(e).concat(this.config.columns)},last:function(e){this.config.columns=this.config.columns.concat([].concat(e))}};return function(t,i){if("undefined"==typeof t)throw"_column must not be null";if("undefined"==typeof i&&(i="last"),i in e)e[i].call(this,t);else{if(!n.isNumber(i))throw"invalid argument _cindex";this.config.columns.splice(i,[].concat(t))}return l.call(this),this}}(),this.removeColumn=function(){var e={first:function(e){this.config.columns.splice(e,1)},last:function(){this.config.columns.splice(this.config.columns.length-1,1)}};return function(t){if("undefined"==typeof t&&(t="last"),t in e)e[t].call(this,t);else{if(!n.isNumber(t))throw"invalid argument _cindex";this.config.columns.splice(t,1)}return l.call(this),this}}(),this.updateColumn=function(e,t){if(!n.isNumber(t))throw"invalid argument _cindex";return this.config.columns.splice(t,1,e),l.call(this),this},this.setColumnWidth=function(t,n){return this.colGroup[this.xvar.columnResizerIndex]._width=t,this.needToPaintSum=!0,e.header.repaint.call(this),e.body.repaint.call(this,!0),e.scroller.resize.call(this),u.call(this),this},this.getColumnSortInfo=function(){var e={sortInfo:[]};for(var t in this.sortInfo)e.sortInfo.push({key:t,orderBy:this.sortInfo[t].orderBy,seq:this.sortInfo[t].seq});return e.sortInfo.sort(function(e,t){return e.seq>t.seq}),e.sortInfo},this.setColumnSort=function(t){return"undefined"!=typeof t&&(this.sortInfo=t,e.header.applySortStatus.call(this,t)),h.call(this,t||this.sortInfo),this},this.select=function(t){if(n.isNumber(t)){var i=t;this.config.multipleSelect||(e.body.updateRowState.call(this,["selectedClear"]),e.data.clearSelect.call(this)),e.data.select.call(this,i),e.body.updateRowState.call(this,["selected"],i)}return this},this.main=function(){t.grid_instance=t.grid_instance||[],t.grid_instance.push(this),arguments&&n.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return i}()),e=ax5.ui.grid}(),function(){var e=ax5.ui.grid,t=ax5.util,n={focusClear:function(){var e=this;for(var t in e.focusedColumn){var n=e.focusedColumn[t];n&&e.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').removeAttr("data-ax5grid-column-focused")}e.focusedColumn={}},clear:function(){var e=this;for(var t in e.selectedColumn){var n=e.selectedColumn[t];n&&e.$.panel[n.panelName].find('[data-ax5grid-tr-data-index="'+n.dindex+'"]').find('[data-ax5grid-column-rowindex="'+n.rowIndex+'"][data-ax5grid-column-colindex="'+n.colIndex+'"]').removeAttr("data-ax5grid-column-selected")}e.selectedColumn={}},init:function(t){var i=this;if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==t.dindex+"_"+t.colIndex+"_"+t.rowIndex)return this;n.focusClear.call(i),i.focusedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]={panelName:t.panelName,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan},n.clear.call(i),i.xvar.selectedRange={start:[t.dindex,t.rowIndex,t.colIndex,t.colspan-1],end:null},i.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]=function(e){return!e&&{panelName:t.panelName,dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,colspan:t.colspan}}(i.selectedColumn[t.dindex+"_"+t.colIndex+"_"+t.rowIndex]),this.$.panel[t.panelName].find('[data-ax5grid-tr-data-index="'+t.dindex+'"]').find('[data-ax5grid-column-rowindex="'+t.rowIndex+'"][data-ax5grid-column-colindex="'+t.colIndex+'"]').attr("data-ax5grid-column-focused","true").attr("data-ax5grid-column-selected","true"),this.isInlineEditing&&e.body.inlineEdit.deActive.call(this,"RETURN")},update:function(e){var t,i,o,a,r=this;r.xvar.selectedRange.end=[e.dindex,e.rowIndex,e.colIndex,e.colspan-1],n.clear.call(r);var l={r:{s:Math.min(r.xvar.selectedRange.start[0],r.xvar.selectedRange.end[0]),e:Math.max(r.xvar.selectedRange.start[0],r.xvar.selectedRange.end[0])},c:{s:Math.min(r.xvar.selectedRange.start[2],r.xvar.selectedRange.end[2]),e:Math.max(r.xvar.selectedRange.start[2]+r.xvar.selectedRange.start[3],r.xvar.selectedRange.end[2]+r.xvar.selectedRange.end[3])}};for(t=l.r.s;t<=l.r.e;t++)for(a=this.bodyRowTable.rows.length,o=0;o<a;o++)for(i=l.c.s;i<=l.c.e;i++){var s=[],d="";r.xvar.frozenRowIndex>t&&s.push("top"),r.xvar.frozenColumnIndex>i&&s.push("left"),s.push("body"),"top"!==s[0]&&s.push("scroll"),d=s.join("-"),r.selectedColumn[t+"_"+i+"_"+o]={panelName:d,dindex:t,rowIndex:o,colIndex:i,colspan:e.colspan},s=null,d=null}t=null,i=null,o=null;for(var c in r.selectedColumn){var u=r.selectedColumn[c];u&&r.$.panel[u.panelName].find('[data-ax5grid-tr-data-index="'+u.dindex+'"]').find('[data-ax5grid-column-rowindex="'+u.rowIndex+'"][data-ax5grid-column-colindex="'+u.colIndex+'"]').attr("data-ax5grid-column-selected","true")}}},i={on:function(e){var o=this;this.inlineEditing[e.dindex+"_"+e.colIndex+"_"+e.rowIndex]||(n.init.call(o,e),this.$.container.body.on("mousemove.ax5grid-"+this.instanceId,'[data-ax5grid-column-attr="default"]',function(e){this.getAttribute("data-ax5grid-column-rowIndex")&&(n.update.call(o,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))}),t.stopEvent(e))}).on("mouseup.ax5grid-"+this.instanceId,function(){i.off.call(o)}).on("mouseleave.ax5grid-"+this.instanceId,function(){i.off.call(o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1))},off:function(){this.$.container.body.off("mousemove.ax5grid-"+this.instanceId).off("mouseup.ax5grid-"+this.instanceId).off("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},o=function(e,t,n){var i=this,o=this.config,a={selected:function(e){for(var t=this.$.livePanelKeys.length;t--;)this.$.panel[this.$.livePanelKeys[t]].find('[data-ax5grid-tr-data-index="'+e+'"]').attr("data-ax5grid-selected",this.list[e][o.columnKeys.selected])},selectedClear:function(){for(var e=this.selectedDataIndexs.length;e--;)for(var t=this.selectedDataIndexs[e],n=this.$.livePanelKeys.length;n--;)this.$.panel[this.$.livePanelKeys[n]].find('[data-ax5grid-tr-data-index="'+t+'"]').attr("data-ax5grid-selected",!1),this.list[t][o.columnKeys.selected]=!1},cellChecked:function(e,t){var n=(t.key,t.rowIndex),i=t.colIndex,o=function(){var t=[];return this.xvar.frozenRowIndex>e&&t.push("top"),this.xvar.frozenColumnIndex>i&&t.push("left"),t.push("body"),"top"!==t[0]&&t.push("scroll"),t.join("-")}.call(this);this.$.panel[o].find('[data-ax5grid-tr-data-index="'+e+'"]').find('[data-ax5grid-column-rowIndex="'+n+'"][data-ax5grid-column-colIndex="'+i+'"]').find('[data-ax5grid-editor="checkbox"]').attr("data-ax5grid-checked",""+t.checked)}};e.forEach(function(e){if(!a[e])throw"invaild state name";a[e].call(i,t,n)})},a=function(){var n=this;this.$.container.body.on("click","[data-ax5grid-column-attr]",function(t){var i,a,r,l,s,d,c,u={"default":function(t){var i=n.bodyRowMap[t.rowIndex+"_"+t.colIndex],a={self:n,page:n.page,list:n.list,item:n.list[t.dindex],dindex:t.dindex,rowIndex:t.rowIndex,colIndex:t.colIndex,column:i,value:n.list[t.dindex][i.key]};if(i.editor&&"checkbox"==i.editor.type){var r,l,s=e.data.getValue.call(n,t.dindex,i.key);l=i.editor.config&&i.editor.config.trueValue?(r=!(s==i.editor.config.trueValue))?i.editor.config.trueValue:i.editor.config.falseValue:r=0==s||"false"==s||s<"1"?"true":"false",e.data.setValue.call(n,t.dindex,i.key,l),o.call(n,["cellChecked"],t.dindex,{key:i.key,rowIndex:t.rowIndex,colIndex:t.colIndex,editorConfig:i.editor.config,checked:r})}else n.config.body.onClick&&n.config.body.onClick.call(a)},rowSelector:function(t){n.config.multipleSelect||n.selectedDataIndexs[0]===t.dindex||(e.body.updateRowState.call(n,["selectedClear"]),e.data.clearSelect.call(n)),e.data.select.call(n,t.dindex,void 0,{internalCall:!0}),o.call(n,["selected"],t.dindex)},lineNumber:function(e){}};i=this.getAttribute("data-ax5grid-panel-name"),a=this.getAttribute("data-ax5grid-column-attr"),r=Number(this.getAttribute("data-ax5grid-column-row")),l=Number(this.getAttribute("data-ax5grid-column-col")),d=Number(this.getAttribute("data-ax5grid-column-rowIndex")),c=Number(this.getAttribute("data-ax5grid-column-colIndex")),s=Number(this.getAttribute("data-ax5grid-data-index")),a in u&&u[a]({panelName:i,attr:a,row:r,col:l,dindex:s,rowIndex:d,colIndex:c})}),this.$.container.body.on("dblclick","[data-ax5grid-column-attr]",function(t){var i,o,a,r,l,s,d,c={"default":function(i){if(this.isInlineEditing)for(var o in this.inlineEditing)if(o==i.dindex+"_"+i.colIndex+"_"+i.rowIndex)return this;var a=n.bodyRowMap[i.rowIndex+"_"+i.colIndex],r="";a&&(n.list[l].__isGrouping||(r=e.data.getValue.call(n,l,a.key))),
e.body.inlineEdit.active.call(n,n.focusedColumn,t,r)},rowSelector:function(e){},lineNumber:function(e){}};i=this.getAttribute("data-ax5grid-panel-name"),o=this.getAttribute("data-ax5grid-column-attr"),a=Number(this.getAttribute("data-ax5grid-column-row")),r=Number(this.getAttribute("data-ax5grid-column-col")),s=Number(this.getAttribute("data-ax5grid-column-rowIndex")),d=Number(this.getAttribute("data-ax5grid-column-colIndex")),l=Number(this.getAttribute("data-ax5grid-data-index")),o in c&&c[o]({panelName:i,attr:o,row:a,col:r,dindex:l,rowIndex:s,colIndex:d})}),this.$.container.body.on("mouseover","tr",function(){return}),this.$.container.body.on("mousedown",'[data-ax5grid-column-attr="default"]',function(e){this.getAttribute("data-ax5grid-column-rowIndex")&&i.on.call(n,{panelName:this.getAttribute("data-ax5grid-panel-name"),dindex:Number(this.getAttribute("data-ax5grid-data-index")),rowIndex:Number(this.getAttribute("data-ax5grid-column-rowIndex")),colIndex:Number(this.getAttribute("data-ax5grid-column-colIndex")),colspan:Number(this.getAttribute("colspan"))})}).on("dragstart",function(e){return t.stopEvent(e),!1}),r.call(this)},r=function(){var t=this.config,n=e.util.divideTableByFrozenColumnIndex(this.bodyRowTable,this.xvar.frozenColumnIndex);if(this.asideBodyRowData=function(e){for(var n={rows:[]},i=0,o=e.rows.length;i<o;i++)if(n.rows[i]={cols:[]},0===i){var a={label:"",colspan:1,rowspan:e.rows.length,colIndex:null},r={};t.showLineNumber&&(r=jQuery.extend({},a,{width:t.lineNumberColumnWidth,_width:t.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),n.rows[i].cols.push(r)),t.showRowSelector&&(r=jQuery.extend({},a,{width:t.rowSelectorColumnWidth,_width:t.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),n.rows[i].cols.push(r))}return n}.call(this,this.bodyRowTable),this.leftBodyRowData=n.leftData,this.bodyRowData=n.rightData,t.body.grouping){var i=e.util.divideTableByFrozenColumnIndex(this.bodyGroupingTable,this.xvar.frozenColumnIndex);this.asideBodyGroupingData=function(e){for(var n={rows:[]},i=0,o=e.rows.length;i<o;i++)if(n.rows[i]={cols:[]},0===i){var a={label:"",colspan:1,rowspan:e.rows.length,colIndex:null},r={};t.showLineNumber&&(r=jQuery.extend({},a,{width:t.lineNumberColumnWidth,_width:t.lineNumberColumnWidth,columnAttr:"lineNumber",label:"&nbsp;",key:"__d-index__"}),n.rows[i].cols.push(r)),t.showRowSelector&&(r=jQuery.extend({},a,{width:t.rowSelectorColumnWidth,_width:t.rowSelectorColumnWidth,columnAttr:"rowSelector",label:"",key:"__d-checkbox__"}),n.rows[i].cols.push(r))}return n}.call(this,this.bodyGroupingTable),this.leftBodyGroupingData=i.leftData,this.bodyGroupingData=i.rightData}if(this.leftFootSumData={},this.footSumData={},this.config.footSum){var o=e.util.divideTableByFrozenColumnIndex(this.footSumTable,this.xvar.frozenColumnIndex);this.leftFootSumData=o.leftData,this.footSumData=o.rightData}},l=function(n,i,o,a,r){var l=a.key;if("__d-index__"===l)return o+1;if("__d-checkbox__"===l)return'<div class="checkBox"></div>';if(a.editor&&function(t){return t.type in e.inlineEditor&&"inline"==e.inlineEditor[t.type].editMode}(a.editor))return r=r||e.data.getValue.call(this,o,l),t.isFunction(a.editor.disabled)&&a.editor.disabled.call({list:n,dindex:o,item:n[o],key:l,value:r})?r:e.inlineEditor[a.editor.type].getHtml(this,a.editor,r);if(a.formatter){var s={key:l,value:r||e.data.getValue.call(this,o,l),dindex:o,item:i,list:n};return t.isFunction(a.formatter)?a.formatter.call(s):e.formatter[a.formatter].call(s)}var d="&nbsp;";return"undefined"!=typeof r?d=r:(r=e.data.getValue.call(this,o,l),"undefined"!=typeof r&&(d=r)),d},s=function(n,i,o){var a,r,l=o.key,s=o.label;return"undefined"==typeof l?(r={key:l,list:n.__groupingList,groupBy:n.__groupingBy},a=t.isFunction(s)?s.call(r):s,n[o.colIndex]=a,a):"__d-index__"===l?i+1:"__d-checkbox__"===l?"&nbsp;":o.collector?(r={key:l,list:n.__groupingList},a=t.isFunction(o.collector)?o.collector.call(r):e.collector[o.collector].call(r),n[o.colIndex]=a,o.formatter?(r.value=a,t.isFunction(o.formatter)?o.collector.call(r):e.formatter[o.formatter].call(r)):a):"&nbsp;"},d=function(n,i){var o=i.key,a=i.label;if("undefined"==typeof o)return a;if("__d-index__"===o||"__d-checkbox__"===o)return"&nbsp;";if(i.collector){var r,l={key:o,list:n};return r=t.isFunction(i.collector)?i.collector.call(l):e.collector[i.collector].call(l),i.formatter?(l.value=r,t.isFunction(i.formatter)?i.collector.call(l):e.formatter[i.formatter].call(l)):r}return"&nbsp;"},c=function(n){var i=this.config,o=this.list;n&&(r.call(this),this.xvar.paintStartRowIndex=void 0);var a=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex;if(this.xvar.dataRowCount===o.length&&this.xvar.paintStartRowIndex===a)return this;var c="undefined"==typeof this.xvar.paintStartRowIndex,u=this.asideBodyRowData,h=this.leftBodyRowData,p=this.bodyRowData,f=this.leftFootSumData,g=this.footSumData,m=this.asideBodyGroupingData,v=this.leftBodyGroupingData,y=this.bodyGroupingData,x=i.body.align,b=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1;this.xvar.scrollContentHeight=this.xvar.bodyTrHeight*(this.list.length-this.xvar.frozenRowIndex),this.$.livePanelKeys=[];var w=function(e,n,o,a,r,d){var u=this.$.panel[e];if(!c&&!d)return this.$.livePanelKeys.push(e),!1;var h,p,f,g,m,v,y,b,w,k,C,T=[],N=function(){return"undefined"!=typeof d&&"undefined"!=typeof d.paintStartRowIndex||(d={paintStartRowIndex:0,paintRowCount:r.length},!1)}();for(T.push('<table border="0" cellpadding="0" cellspacing="0">'),T.push("<colgroup>"),h=0,p=n.length;h<p;h++)T.push('<col style="width:'+n[h]._width+'px;"  />');for(T.push("<col  />"),T.push("</colgroup>"),f=d.paintStartRowIndex,g=function(){var e;return e=r.length,d.paintRowCount+d.paintStartRowIndex<e&&(e=d.paintRowCount+d.paintStartRowIndex),e}();f<g;f++){var I,_=!1;a&&"__isGrouping"in r[f]?(I=a,_=!0):I=o;for(m=0,v=I.rows.length;m<v;m++){for(T.push('<tr class="tr-'+f%4+'"',_?' data-ax5grid-grouping-tr="true"':"",' data-ax5grid-tr-data-index="'+f+'"',' data-ax5grid-selected="'+(r[f][i.columnKeys.selected]||"false")+'">'),y=0,b=I.rows[m].cols.length;y<b;y++)w=I.rows[m].cols[y],k=i.body.columnHeight*w.rowspan-i.body.columnBorderWidth,C=w.align||x,T.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-row="'+m+'" ','data-ax5grid-column-col="'+y+'" ','data-ax5grid-column-rowIndex="'+w.rowIndex+'" ','data-ax5grid-column-colIndex="'+w.colIndex+'" ','data-ax5grid-column-attr="'+(w.columnAttr||"default")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn[f+"_"+w.colIndex+"_"+w.rowIndex],this.selectedColumn[f+"_"+w.colIndex+"_"+w.rowIndex]),'colspan="'+w.colspan+'" ','rowspan="'+w.rowspan+'" ','class="'+function(e){var n="";return e.styleClass&&(n+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,item:r[f],index:f})+" ":e.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),y==b-1&&(n+="isLastColumn "),n}.call(this,w)+'" ','style="height: '+k+'px;min-height: 1px;">'),T.push(function(e){var t=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return w.multiLine||(e=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(w.multiLine?"multiLine":"")+'" '+(C?'data-ax5grid-text-align="'+C+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(k),_?s.call(this,r[f],f,w):l.call(this,r,r[f],f,w),"</span>"),T.push("</td>");T.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+f+'" ','data-ax5grid-column-attr="default" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),T.push("</tr>")}}return T.push("</table>"),N&&u.css({paddingTop:(d.paintStartRowIndex-this.xvar.frozenRowIndex)*d.bodyTrHeight}),u.html(T.join("")),this.$.livePanelKeys.push(e),!0},k=function(e,n,o,a,r){var l=this.$.panel[e];if(!c&&!r)return this.$.livePanelKeys.push(e),!1;var s,u,h,p,f,g,m,v,y,b=[];for(b.push('<table border="0" cellpadding="0" cellspacing="0">'),b.push("<colgroup>"),s=0,u=n.length;s<u;s++)b.push('<col style="width:'+n[s]._width+'px;"  />');for(b.push("<col  />"),b.push("</colgroup>"),h=0,p=o.rows.length;h<p;h++){for(b.push('<tr class="tr-sum">'),f=0,g=o.rows[h].cols.length;f<g;f++)m=o.rows[h].cols[f],v=i.body.columnHeight*m.rowspan-i.body.columnBorderWidth,y=m.align||x,b.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-column-row="'+h+'" ','data-ax5grid-column-col="'+f+'" ','data-ax5grid-column-rowIndex="'+h+'" ','data-ax5grid-column-colIndex="'+m.colIndex+'" ','data-ax5grid-column-attr="'+(m.columnAttr||"sum")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn["sum_"+m.colIndex+"_"+h],this.selectedColumn["sum_"+m.colIndex+"_"+h]),'colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(e){var n="";return e.styleClass&&(n+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,isFootSum:!0})+" ":e.styleClass+" "),i.body.columnBorderWidth&&(n+="hasBorder "),f==g-1&&(n+="isLastColumn "),n}.call(this,m)+'" ','style="height: '+v+'px;min-height: 1px;">'),b.push(function(e){var t=i.body.columnHeight-2*i.body.columnPadding-i.body.columnBorderWidth;return m.multiLine||(e=i.body.columnHeight-i.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(m.multiLine?"multiLine":"")+'" '+(y?'data-ax5grid-text-align="'+y+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(v),d.call(this,a,m),"</span>"),b.push("</td>");b.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+i.body.columnHeight+'px;min-height: 1px;" ',"></td>"),b.push("</tr>")}return b.push("</table>"),l.html(b.join("")),this.$.livePanelKeys.push(e),!0},C={paintStartRowIndex:a,paintRowCount:b,bodyTrHeight:this.xvar.bodyTrHeight};i.asidePanelWidth>0&&(this.xvar.frozenRowIndex>0&&w.call(this,"top-aside-body",this.asideColGroup,u,m,o.slice(0,this.xvar.frozenRowIndex)),w.call(this,"aside-body-scroll",this.asideColGroup,u,m,o,C),i.footSum),this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&w.call(this,"top-left-body",this.leftHeaderColGroup,h,v,o.slice(0,this.xvar.frozenRowIndex)),w.call(this,"left-body-scroll",this.leftHeaderColGroup,h,v,o,C),i.footSum&&this.needToPaintSum&&k.call(this,"bottom-left-body",this.leftHeaderColGroup,f,o)),this.xvar.frozenRowIndex>0&&w.call(this,"top-body-scroll",this.headerColGroup,p,y,o.slice(0,this.xvar.frozenRowIndex)),w.call(this,"body-scroll",this.headerColGroup,p,y,o,C),i.footSum&&this.needToPaintSum&&k.call(this,"bottom-body-scroll",this.headerColGroup,g,o,C),i.rightSum,this.xvar.paintStartRowIndex=a,this.xvar.paintRowCount=b,this.xvar.dataRowCount=o.length,this.needToPaintSum=!1,e.page.statusUpdate.call(this)},u=function(n,i,o,a,r){var c=this,u=this.config,h=this.list,p=this.$.panel[n].find('[data-ax5grid-tr-data-index="'+i+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+a+'"]').find("[data-ax5grid-cellholder]"),f=this.colGroup,g=f[a];p.html(l.call(this,h,h[i],i,g)),g.editor&&g.editor.updateWith&&g.editor.updateWith.forEach(function(t){f.forEach(function(n){if(n.key==t){var o=n.rowIndex,a=n.colIndex,r=e.util.findPanelByColumnIndex.call(c,i,a,o).panelName,s=c.$.panel[r].find('[data-ax5grid-tr-data-index="'+i+'"]').find('[data-ax5grid-column-rowindex="'+o+'"][data-ax5grid-column-colindex="'+a+'"]').find("[data-ax5grid-cellholder]");s.html(l.call(c,h,h[i],i,n))}})});var m=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,v=this.leftFootSumData,y=this.footSumData,x=(this.asideBodyGroupingData,this.leftBodyGroupingData),b=this.bodyGroupingData,w=u.body.align,k=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,C={paintStartRowIndex:m,paintRowCount:k,bodyTrHeight:this.xvar.bodyTrHeight},T=function(e,n,i,o,a){var r,l,s,c,h,p,f,g,m,v=this.$.panel[e],y=[];for(y.push('<table border="0" cellpadding="0" cellspacing="0">'),y.push("<colgroup>"),r=0,l=n.length;r<l;r++)y.push('<col style="width:'+n[r]._width+'px;"  />');for(y.push("<col  />"),y.push("</colgroup>"),s=0,c=i.rows.length;s<c;s++){for(y.push('<tr class="tr-sum">'),h=0,p=i.rows[s].cols.length;h<p;h++)f=i.rows[s].cols[h],g=u.body.columnHeight*f.rowspan-u.body.columnBorderWidth,m=f.align||w,y.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-column-row="'+s+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+s+'" ','data-ax5grid-column-colIndex="'+f.colIndex+'" ','data-ax5grid-column-attr="'+(f.columnAttr||"sum")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn["sum_"+f.colIndex+"_"+s],this.selectedColumn["sum_"+f.colIndex+"_"+s]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(e){var n="";return e.styleClass&&(n+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,isFootSum:!0})+" ":e.styleClass+" "),u.body.columnBorderWidth&&(n+="hasBorder "),h==p-1&&(n+="isLastColumn "),n}.call(this,f)+'" ','style="height: '+g+'px;min-height: 1px;">'),y.push(function(e){var t=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return f.multiLine||(e=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(g),d.call(this,o,f),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>"),y.push("</tr>")}return y.push("</table>"),v.html(y.join("")),!0},N=function(e,n,i,o,a){var r,l,d,c,h,p,f,g,m,v=this.$.panel[e],y=[];for(r=a.paintStartRowIndex,l=function(){var e;return e=o.length,a.paintRowCount+a.paintStartRowIndex<e&&(e=a.paintRowCount+a.paintStartRowIndex),e}();r<l;r++)if(i&&"__isGrouping"in o[r]){var x=i;for(y=[],d=0,c=x.rows.length;d<c;d++){for(h=0,p=x.rows[d].cols.length;h<p;h++)f=x.rows[d].cols[h],g=u.body.columnHeight*f.rowspan-u.body.columnBorderWidth,m=f.align||w,y.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-row="'+d+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+f.rowIndex+'" ','data-ax5grid-column-colIndex="'+f.colIndex+'" ','data-ax5grid-column-attr="'+(f.columnAttr||"default")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn[r+"_"+f.colIndex+"_"+f.rowIndex],this.selectedColumn[r+"_"+f.colIndex+"_"+f.rowIndex]),'colspan="'+f.colspan+'" ','rowspan="'+f.rowspan+'" ','class="'+function(e){var n="";return e.styleClass&&(n+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,item:o[r],index:r})+" ":e.styleClass+" "),u.body.columnBorderWidth&&(n+="hasBorder "),h==p-1&&(n+="isLastColumn "),n}.call(this,f)+'" ','style="height: '+g+'px;min-height: 1px;">'),y.push(function(e){var t=u.body.columnHeight-2*u.body.columnPadding-u.body.columnBorderWidth;return f.multiLine||(e=u.body.columnHeight-u.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(f.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(g),s.call(this,o[r],r,f),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-attr="default" ','style="height: '+u.body.columnHeight+'px;min-height: 1px;" ',"></td>")}v.find('tr[data-ax5grid-tr-data-index="'+r+'"]').html(y.join(""))}};u.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&N.call(this,"top-left-body",this.leftHeaderColGroup,x,h.slice(0,this.xvar.frozenRowIndex)),N.call(this,"left-body-scroll",this.leftHeaderColGroup,x,h,C)),this.xvar.frozenRowIndex>0&&N.call(this,"top-body-scroll",this.headerColGroup,b,h.slice(0,this.xvar.frozenRowIndex)),N.call(this,"body-scroll",this.headerColGroup,b,h,C)),this.xvar.frozenColumnIndex>0&&u.footSum&&this.needToPaintSum&&T.call(this,"bottom-left-body",this.leftHeaderColGroup,v,h),u.footSum&&this.needToPaintSum&&T.call(this,"bottom-body-scroll",this.headerColGroup,y,h,C)},h=function(e){var n=this.config,i=this.list,o=Math.floor(Math.abs(this.$.panel["body-scroll"].position().top)/this.xvar.bodyTrHeight)+this.xvar.frozenRowIndex,a=(this.asideBodyRowData,this.leftBodyRowData),r=this.bodyRowData,c=this.leftFootSumData,u=this.footSumData,h=(this.asideBodyGroupingData,this.leftBodyGroupingData),p=this.bodyGroupingData,f=n.body.align,g=Math.ceil(this.$.panel.body.height()/this.xvar.bodyTrHeight)+1,m={paintStartRowIndex:o,paintRowCount:g,bodyTrHeight:this.xvar.bodyTrHeight},v=function(e,i,o,a){var r,l,s,c,u,h,p,g,m,v=this.$.panel[e],y=[];for(y.push('<table border="0" cellpadding="0" cellspacing="0">'),y.push("<colgroup>"),r=0,l=i.length;r<l;r++)y.push('<col style="width:'+i[r]._width+'px;"  />');for(y.push("<col  />"),y.push("</colgroup>"),s=0,c=o.rows.length;s<c;s++){for(y.push('<tr class="tr-sum">'),u=0,h=o.rows[s].cols.length;u<h;u++)p=o.rows[s].cols[u],g=n.body.columnHeight*p.rowspan-n.body.columnBorderWidth,m=p.align||f,y.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-column-row="'+s+'" ','data-ax5grid-column-col="'+u+'" ','data-ax5grid-column-rowIndex="'+s+'" ','data-ax5grid-column-colIndex="'+p.colIndex+'" ','data-ax5grid-column-attr="'+(p.columnAttr||"sum")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn["sum_"+p.colIndex+"_"+s],this.selectedColumn["sum_"+p.colIndex+"_"+s]),'colspan="'+p.colspan+'" ','rowspan="'+p.rowspan+'" ','class="'+function(e){var i="";return e.styleClass&&(i+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,isFootSum:!0})+" ":e.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),u==h-1&&(i+="isLastColumn "),i}.call(this,p)+'" ','style="height: '+g+'px;min-height: 1px;">'),y.push(function(e){var t=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return p.multiLine||(e=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(p.multiLine?"multiLine":"")+'" '+(m?'data-ax5grid-text-align="'+m+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(g),d.call(this,a,p),"</span>"),y.push("</td>");y.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-column-attr="sum" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>"),y.push("</tr>")}return y.push("</table>"),v.html(y.join("")),!0},y=function(e,i,o,a,r){var l,d,c,u,h,p,g,m,v,y=this.$.panel[e],x=[];for(l=r.paintStartRowIndex,d=function(){var e;return e=a.length,r.paintRowCount+r.paintStartRowIndex<e&&(e=r.paintRowCount+r.paintStartRowIndex),e}();l<d;l++)if(o&&"__isGrouping"in a[l]){var b=o;for(x=[],c=0,u=b.rows.length;c<u;c++){for(h=0,p=b.rows[c].cols.length;h<p;h++)g=b.rows[c].cols[h],m=n.body.columnHeight*g.rowspan-n.body.columnBorderWidth,v=g.align||f,x.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-row="'+c+'" ','data-ax5grid-column-col="'+h+'" ','data-ax5grid-column-rowIndex="'+g.rowIndex+'" ','data-ax5grid-column-colIndex="'+g.colIndex+'" ','data-ax5grid-column-attr="'+(g.columnAttr||"default")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn[l+"_"+g.colIndex+"_"+g.rowIndex],this.selectedColumn[l+"_"+g.colIndex+"_"+g.rowIndex]),'colspan="'+g.colspan+'" ','rowspan="'+g.rowspan+'" ','class="'+function(e){var i="";return e.styleClass&&(i+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,item:a[l],index:l})+" ":e.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),h==p-1&&(i+="isLastColumn "),i}.call(this,g)+'" ','style="height: '+m+'px;min-height: 1px;">'),x.push(function(e){var t=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return g.multiLine||(e=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(g.multiLine?"multiLine":"")+'" '+(v?'data-ax5grid-text-align="'+v+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(m),s.call(this,a[l],l,g),"</span>"),x.push("</td>");x.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+l+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>")}y.find('tr[data-ax5grid-tr-data-index="'+l+'"]').html(x.join(""))}},x=function(e,i,o,a,r){var r,s,d,c,u,h,p,g,m=this.$.panel[e],v=[],y=o;for(s=0,d=y.rows.length;s<d;s++){for(c=0,u=y.rows[s].cols.length;c<u;c++)h=y.rows[s].cols[c],p=n.body.columnHeight*h.rowspan-n.body.columnBorderWidth,g=h.align||f,v.push("<td ",'data-ax5grid-panel-name="'+e+'" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-row="'+s+'" ','data-ax5grid-column-col="'+c+'" ','data-ax5grid-column-rowIndex="'+h.rowIndex+'" ','data-ax5grid-column-colIndex="'+h.colIndex+'" ','data-ax5grid-column-attr="'+(h.columnAttr||"default")+'" ',function(e,t){var n="";return e&&(n+='data-ax5grid-column-focused="true" '),t&&(n+='data-ax5grid-column-selected="true" '),n}(this.focusedColumn[r+"_"+h.colIndex+"_"+h.rowIndex],this.selectedColumn[r+"_"+h.colIndex+"_"+h.rowIndex]),'colspan="'+h.colspan+'" ','rowspan="'+h.rowspan+'" ','class="'+function(e){var i="";return e.styleClass&&(i+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key,item:a[r],index:r})+" ":e.styleClass+" "),n.body.columnBorderWidth&&(i+="hasBorder "),c==u-1&&(i+="isLastColumn "),i}.call(this,h)+'" ','style="height: '+p+'px;min-height: 1px;">'),v.push(function(e){var t=n.body.columnHeight-2*n.body.columnPadding-n.body.columnBorderWidth;return h.multiLine||(e=n.body.columnHeight-n.body.columnBorderWidth),'<span data-ax5grid-cellHolder="'+(h.multiLine?"multiLine":"")+'" '+(g?'data-ax5grid-text-align="'+g+'"':"")+'" style="height:'+e+"px;line-height: "+t+'px;">'}(p),l.call(this,a,a[r],r,h),"</span>"),v.push("</td>");v.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','data-ax5grid-data-index="'+r+'" ','data-ax5grid-column-attr="default" ','style="height: '+n.body.columnHeight+'px;min-height: 1px;" ',"></td>")}m.find('tr[data-ax5grid-tr-data-index="'+r+'"]').html(v.join(""))};this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&x.call(this,"top-left-body",this.leftHeaderColGroup,a,i,e),x.call(this,"left-body-scroll",this.leftHeaderColGroup,a,i,e)),this.xvar.frozenRowIndex>0&&x.call(this,"top-body-scroll",this.headerColGroup,r,i,e),x.call(this,"body-scroll",this.headerColGroup,r,i,e),n.body.grouping&&(this.xvar.frozenColumnIndex>0&&(this.xvar.frozenRowIndex>0&&y.call(this,"top-left-body",this.leftHeaderColGroup,h,i.slice(0,this.xvar.frozenRowIndex)),y.call(this,"left-body-scroll",this.leftHeaderColGroup,h,i,m)),this.xvar.frozenRowIndex>0&&y.call(this,"top-body-scroll",this.headerColGroup,p,i.slice(0,this.xvar.frozenRowIndex)),y.call(this,"body-scroll",this.headerColGroup,p,i,m)),this.xvar.frozenColumnIndex>0&&n.footSum&&this.needToPaintSum&&v.call(this,"bottom-left-body",this.leftHeaderColGroup,c,i),n.footSum&&this.needToPaintSum&&v.call(this,"bottom-body-scroll",this.headerColGroup,u,i,m)},p=function(e,t){var n=this.config;n.asidePanelWidth>0&&"top"in e&&this.$.panel["aside-body-scroll"].css({top:e.top}),this.xvar.frozenColumnIndex>0&&"top"in e&&this.$.panel["left-body-scroll"].css({top:e.top}),this.xvar.frozenRowIndex>0&&"left"in e&&this.$.panel["top-body-scroll"].css({left:e.left}),this.$.panel["body-scroll"].css(e),n.footSum&&"left"in e&&this.$.panel["bottom-body-scroll"].css({left:e.left}),!t&&"top"in e&&c.call(this)},f=function(){n.focusClear.call(this),n.clear.call(this),this.isInlineEditing&&m.deActive.call(this)},g=function(t){var i={UD:function(t){var i,o,a,r=!0;for(var l in this.focusedColumn){i=jQuery.extend({},this.focusedColumn[l],!0);break}if(!i)return!1;for(o=this.bodyRowMap[i.rowIndex+"_"+i.colIndex],n.focusClear.call(this),n.clear.call(this),t>0?i.rowIndex+(o.rowspan-1)+t>this.bodyRowTable.rows.length-1?(i.dindex=i.dindex+t,i.rowIndex=0,i.dindex>this.list.length-1&&(i.dindex=this.list.length-1,r=!1)):i.rowIndex=i.rowIndex+t:i.rowIndex+t<0?(i.dindex=i.dindex+t,i.rowIndex=this.bodyRowTable.rows.length-1,i.dindex<0&&(i.dindex=0,r=!1)):i.rowIndex=i.rowIndex+t,a=0;"undefined"==typeof this.bodyRowMap[i.rowIndex+"_"+i.colIndex];){if(0==i.rowIndex||a%2==(t>0?0:1)?i.colIndex--:i.rowIndex--,i.rowIndex<=0&&i.colIndex<=0){r=!1;break}a++}var s=e.util.findPanelByColumnIndex.call(this,i.dindex,i.colIndex);return i.panelName=s.panelName,function(){i.dindex+1>this.xvar.frozenRowIndex&&(i.dindex<=this.xvar.paintStartRowIndex?(p.call(this,{top:-(i.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),e.scroller.resize.call(this)):i.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(p.call(this,{top:-(i.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),e.scroller.resize.call(this)))}.call(this),this.focusedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]=i,this.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').attr("data-ax5grid-column-focused","true"),r},LR:function(t){var i,o,a=!0,r=0,l=!1,s="";for(var d in this.focusedColumn){i=jQuery.extend({},this.focusedColumn[d],!0);break}if(!i)return!1;for(o=this.bodyRowMap[i.rowIndex+"_"+i.colIndex],n.focusClear.call(this),n.clear.call(this),t<0?(i.colIndex=i.colIndex+t,i.colIndex<0&&(i.colIndex=0,a=!1)):(i.colIndex=i.colIndex+(o.colspan-1)+t,i.colIndex>this.colGroup.length-1&&(i.colIndex=this.colGroup.length-1,a=!1)),"undefined"==typeof this.bodyRowMap[i.rowIndex+"_"+i.colIndex]&&(i.rowIndex=0),r=0;"undefined"==typeof this.bodyRowMap[i.rowIndex+"_"+i.colIndex];){if(i.colIndex--,i.rowIndex<=0&&i.colIndex<=0){a=!1;break}r++}var c=e.util.findPanelByColumnIndex.call(this,i.dindex,i.colIndex);i.panelName=c.panelName,s=c.containerPanelName,l=c.isScrollPanel,this.focusedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]=i;var u=this.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').attr("data-ax5grid-column-focused","true");if(u&&l){var h=function(){return u.position().left+u.outerWidth()>Math.abs(this.$.panel[i.panelName].position().left)+this.$.panel[s].width()?u.position().left+u.outerWidth()-this.$.panel[s].width():Math.abs(this.$.panel[i.panelName].position().left)>u.position().left?u.position().left:void 0}.call(this);"undefined"!=typeof h&&(e.header.scrollTo.call(this,{left:-h}),p.call(this,{left:-h}),e.scroller.resize.call(this))}return a},INDEX:function(t){var i,o,a,r=!0;for(var l in this.focusedColumn){i=jQuery.extend({},this.focusedColumn[l],!0);break}for(i||(i={rowIndex:0,colIndex:0}),o=this.bodyRowMap[i.rowIndex+"_"+i.colIndex],n.focusClear.call(this),n.clear.call(this),"end"==t&&(t=this.list.length-1),i.dindex=t,i.rowIndex=0,a=0;"undefined"==typeof this.bodyRowMap[i.rowIndex+"_"+i.colIndex]&&(0==i.rowIndex||a%2==(_dy>0?0:1)?i.colIndex--:i.rowIndex--,!(i.rowIndex<=0&&i.colIndex<=0));)a++;var s=e.util.findPanelByColumnIndex.call(this,i.dindex,i.colIndex);return i.panelName=s.panelName,function(){i.dindex+1>this.xvar.frozenRowIndex&&(i.dindex<this.xvar.paintStartRowIndex?(p.call(this,{top:-(i.dindex-this.xvar.frozenRowIndex)*this.xvar.bodyTrHeight}),e.scroller.resize.call(this)):i.dindex+1>this.xvar.paintStartRowIndex+(this.xvar.paintRowCount-2)&&(p.call(this,{top:-(i.dindex-this.xvar.frozenRowIndex-this.xvar.paintRowCount+3)*this.xvar.bodyTrHeight}),e.scroller.resize.call(this)))}.call(this),this.focusedColumn[i.dindex+"_"+i.colIndex+"_"+i.rowIndex]=i,this.$.panel[i.panelName].find('[data-ax5grid-tr-data-index="'+i.dindex+'"]').find('[data-ax5grid-column-rowindex="'+i.rowIndex+'"][data-ax5grid-column-colindex="'+i.colIndex+'"]').attr("data-ax5grid-column-focused","true"),r}},o={UP:function(){return i.UD.call(this,-1)},DOWN:function(){return i.UD.call(this,1)},LEFT:function(){return i.LR.call(this,-1)},RIGHT:function(){return i.LR.call(this,1)},HOME:function(){return i.INDEX.call(this,0)},END:function(){return i.INDEX.call(this,"end")},position:function(e){return i.INDEX.call(this,e)}};return t in o?o[t].call(this):o.position.call(this,t)},m={active:function(n,i,a){var r,l,s,d,c,u,h,p=this;for(var f in n){if(d=n[f].panelName,r=n[f].dindex,l=n[f].colIndex,s=n[f].rowIndex,c=n[f].colspan,u=this.colGroup[l],!(h=u.editor))return this;if(t.isFunction(h.disabled)&&h.disabled.call({list:this.list,dindex:r,item:this.list[r],key:u.key,value:a}))return this;if(!function(t,n){if(t.type in e.inlineEditor)return"popup"==e.inlineEditor[t.type].editMode}(h)){if("checkbox"==h.type){var g,m;m=h.config&&h.config.trueValue?(g=!(a==h.config.trueValue))?h.config.trueValue:h.config.falseValue:g=0==a||"false"==a||a<"1"?"true":"false",e.data.setValue.call(p,r,u.key,m),o.call(p,["cellChecked"],r,{key:u.key,rowIndex:s,colIndex:l,editorConfig:u.editor.config,checked:g})}return this}if(this.list[r].__isGrouping)return!1;if(f in this.inlineEditing)return!1;this.inlineEditing[f]={panelName:d,columnKey:f,column:n[f],useReturnToSave:e.inlineEditor[h.type].useReturnToSave},this.isInlineEditing=!0}if(this.isInlineEditing){var v=function(e,n){return"money"==n.type?t.number(e,{money:!0}):e||""}.call(this,a,h);return this.inlineEditing[f].$inlineEditorCell=this.$.panel[d].find('[data-ax5grid-tr-data-index="'+r+'"]').find('[data-ax5grid-column-rowindex="'+s+'"][data-ax5grid-column-colindex="'+l+'"]').find("[data-ax5grid-cellholder]"),this.inlineEditing[f].$inlineEditor=e.inlineEditor[h.type].init(this,f,h,this.inlineEditing[f].$inlineEditorCell,v),!0}},deActive:function(n,i,o){if(!this.inlineEditing[i])return this;var a=this.inlineEditing[i].panelName,r=this.inlineEditing[i].column.dindex,l=this.inlineEditing[i].column.rowIndex,s=this.inlineEditing[i].column.colIndex,d=this.bodyRowMap[this.inlineEditing[i].column.rowIndex+"_"+this.inlineEditing[i].column.colIndex],c=function(e){return"undefined"==typeof o?"SELECT"==e.get(0).tagName||"INPUT"==e.get(0).tagName||"TEXTAREA"==e.get(0).tagName?e.val():(n="CANCEL",!1):o}(this.inlineEditing[i].$inlineEditor),u=function(e,n){return"money"==n.type?t.number(e):e}.call(this,c,d.editor),h={CANCEL:function(e,t,n){h.__clear.call(this)},RETURN:function(t,n,i){e.data.setValue.call(this,t,n.key,i)?(h.__clear.call(this),e.body.repaintCell.call(this,a,r,l,s,i)):h.__clear.call(this)},__clear:function(){this.isInlineEditing=!1;var e=this.inlineEditing[i].$inlineEditor.data("binded-ax5ui");"ax5picker"==e?this.inlineEditing[i].$inlineEditor.ax5picker("close"):"ax5select"==e&&this.inlineEditing[i].$inlineEditor.ax5select("close"),this.inlineEditing[i].$inlineEditor.remove(),this.inlineEditing[i].$inlineEditor=null,this.inlineEditing[i].$inlineEditorCell=null,this.inlineEditing[i]=void 0,delete this.inlineEditing[i]}};n in h?h[n||"RETURN"].call(this,r,d,u):h.__clear.call(this)},keydown:function(t,n){var i={ESC:function(){for(var e in this.inlineEditing)m.deActive.call(this,"CANCEL",e)},RETURN:function(){if(this.isInlineEditing)this.inlineEditing[n]&&this.inlineEditing[n].useReturnToSave&&m.deActive.call(this,"RETURN",n);else for(var t in this.focusedColumn){var i=this.focusedColumn[t],o=this.bodyRowMap[i.rowIndex+"_"+i.colIndex],a=i.dindex,r="";
o&&(this.list[a].__isGrouping||(r=e.data.getValue.call(this,a,o.key)));var l=this.colGroup[i.colIndex];"inline"!==e.inlineEditor[l.editor.type].editMode&&e.body.inlineEdit.active.call(this,this.focusedColumn,null,r)}}};t in i&&i[t].call(this,t)}};e.body={init:a,repaint:c,repaintCell:u,repaintRow:h,updateRowState:o,scrollTo:p,blur:f,moveFocus:g,inlineEdit:m}}(),function(){var e=ax5.ui.grid,t=ax5.util,n=function(){for(var e=0,n=this.list.length;n--;)"__groupingList"in this.list[n]||(e+=t.number(this.list[n][this.key]));return e},i=function(){for(var e=0,n=this.list.length,i=0;n--;)"__groupingList"in this.list[n]||(e+=t.number(this.list[n][this.key]),i++);return t.number(e/(i||1),{round:2})};e.collector={sum:n,avg:i}}(),function(){var e=ax5.ui.grid,t=ax5.util,n=function(){},i=function(e){for(var t=0,n=e.length,i=[];t<n;t++)e[t]&&!e[t].__isGrouping&&(e[t][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(t),i.push(jQuery.extend({},e[t])));return i},o=function(e){this.selectedDataIndexs=[];var n=0,i=e.length,o=[],a=0;if(this.config.body.grouping)for(var r,l,s=t.map(this.bodyGrouping.by,function(){return{key:this,compareString:"",grouping:!1,list:[]}}),d=0,c=s.length,u=[];n<i+1;n++)if(d=0,e[n]&&e[n][this.config.columnKeys.deleted])this.deletedList.push(e[n]);else{for(r="",u=[];d<c;d++){if(e[n]&&(r+="$|$"+e[n][s[d].key]),a>0&&r!=s[d].compareString){for(var h={keys:[],labels:[],list:s[d].list},p=0;p<d+1;p++)h.keys.push(s[p].key),h.labels.push(e[n-1][s[p].key]);u.push(h),s[d].list=[]}s[d].list.push(e[n]),s[d].compareString=r}for(l=u.length;l--;)o.push({__isGrouping:!0,__groupingList:u[l].list,__groupingBy:{keys:u[l].keys,labels:u[l].labels}});e[n]&&(e[n][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(n),o.push(e[n]),a++)}else for(;n<i;n++)e[n]&&e[n][this.config.columnKeys.deleted]?this.deletedList.push(e[n]):e[n]&&(e[n][this.config.columnKeys.selected]&&this.selectedDataIndexs.push(n),o.push(e[n]));return o},a=function(n){return t.isArray(n)?(this.page=null,this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?m.call(this,this.sortInfo,n):n),this.deletedList=[]):"page"in n&&(this.page=jQuery.extend({},n.page),this.list=o.call(this,!this.config.remoteSort&&Object.keys(this.sortInfo).length?m.call(this,this.sortInfo,n.list):n.list),this.deletedList=[]),this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,e.page.navigationUpdate.call(this),this.config.body.grouping,this},r=function(e){return{list:this.list,page:this.page}},l=function(t){var n=[],i=0,o=this.list.length;switch(t){case"modified":for(;i<o;i++)this.list[i]&&!this.list[i].__isGrouping&&this.list[i][this.config.columnKeys.modified]&&n.push(jQuery.extend({},this.list[i]));break;case"selected":for(;i<o;i++)this.list[i]&&!this.list[i].__isGrouping&&this.list[i][this.config.columnKeys.selected]&&n.push(jQuery.extend({},this.list[i]));break;case"deleted":n=[].concat(this.deletedList);break;default:n=e.data.clearGroupingData.call(this,this.list)}return n},s=function(n,a){var r=this.config.body.grouping?i.call(this,this.list):this.list,l={first:function(){r=[].concat(n).concat(r)},last:function(){r=r.concat([].concat(n))}};if("undefined"==typeof a&&(a="last"),a in l)n[this.config.columnKeys.modified]=!0,l[a].call(this,n);else{if(!t.isNumber(a))throw"invalid argument _dindex";r=r.splice(a,[].concat(n))}return this.config.body.grouping?r=o.call(this,m.call(this,this.sortInfo,r)):Object.keys(this.sortInfo).length&&(r=m.call(this,this.sortInfo,r)),this.list=r,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,e.page.navigationUpdate.call(this),this},d=function(n){var a=this.config.body.grouping?i.call(this,this.list):this.list,r={first:function(){a.splice(n,1)},last:function(){var e=a.length-1;a.splice(e,1)}};if("undefined"==typeof n&&(n="last"),n in r)r[n].call(this,n);else{if(!t.isNumber(n))throw"invalid argument _dindex";a.splice(n,1)}return this.config.body.grouping?a=o.call(this,m.call(this,this.sortInfo,a)):Object.keys(this.sortInfo).length&&(a=m.call(this,this.sortInfo,a)),this.list=a,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,e.page.navigationUpdate.call(this),this},c=function(n){var a=this.config.body.grouping?i.call(this,this.list):this.list,r={first:function(){a[0][this.config.columnKeys.deleted]=!0},last:function(){a[a.length-1][this.config.columnKeys.deleted]=!0},selected:function(){for(var e=a.length;e--;)a[e][this.config.columnKeys.selected]&&(a[e][this.config.columnKeys.deleted]=!0)}};if("undefined"==typeof n&&(n="last"),n in r)r[n].call(this,n);else{if(!t.isNumber(n))throw"invalid argument _dindex";a[n][this.config.columnKeys.deleted]=!0}return a=this.config.body.grouping?o.call(this,m.call(this,this.sortInfo,a)):Object.keys(this.sortInfo).length?o.call(this,m.call(this,this.sortInfo,a)):o.call(this,a),this.list=a,this.needToPaintSum=!0,this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,e.page.navigationUpdate.call(this),this},u=function(e,n){if(!t.isNumber(n))throw"invalid argument _dindex";this.needToPaintSum=!0,this.list.splice(n,1,e),this.config.body.grouping&&(this.list=o.call(this,i.call(this,this.list)))},h=function(t,n,i){if(this.needToPaintSum=!0,/[\.\[\]]/.test(n))try{this.list[t][this.config.columnKeys.modified]=!0,Function("val","this"+e.util.getRealPathForDataItem(n)+" = val;").call(this.list[t],i)}catch(o){}else this.list[t][this.config.columnKeys.modified]=!0,this.list[t][n]=i;return this.onDataChanged&&this.onDataChanged.call({self:this,list:this.list,dindex:t,item:this.list[t],key:n,value:i}),!0},p=function(t,n,i){if(/[\.\[\]]/.test(n))try{i=Function("","return this"+e.util.getRealPathForDataItem(n)+";").call(this.list[t])}catch(o){}else i=this.list[t][n];return i},f=function(){this.selectedDataIndexs=[]},g=function(e,t,n){var i=this.config;return!this.list[e].__isGrouping&&("undefined"==typeof t?(this.list[e][i.columnKeys.selected]=!this.list[e][i.columnKeys.selected])&&this.selectedDataIndexs.push(e):(this.list[e][i.columnKeys.selected]=t)&&this.selectedDataIndexs.push(e),this.onDataChanged&&n&&n.internalCall&&this.onDataChanged.call({self:this,list:this.list,dindex:e,item:this.list[e],key:i.columnKeys.selected,value:this.list[e][i.columnKeys.selected]}),this.list[e][i.columnKeys.selected])},m=function(n,i){var o=i||this.list,a=[];for(var r in n)a[n[r].seq]={key:r,order:n[r].orderBy};a=t.filter(a,function(){return"undefined"!=typeof this});var l,s,d=0,c=a.length;return o.sort(function(e,t){for(d=0;d<c;d++){if(l=e[a[d].key],s=t[a[d].key],("undefined"==typeof l?"undefined":_typeof(l))!==("undefined"==typeof s?"undefined":_typeof(s))&&(l=""+l,s=""+s),l<s)return"asc"===a[d].order?-1:1;if(l>s)return"asc"===a[d].order?1:-1}}),i?o:(this.xvar.frozenRowIndex=this.config.frozenRowIndex>this.list.length?this.list.length:this.config.frozenRowIndex,this.xvar.paintStartRowIndex=void 0,e.page.navigationUpdate.call(this),this)};e.data={init:n,set:a,get:r,getList:l,setValue:h,getValue:p,clearSelect:f,select:g,add:s,remove:d,deleteRow:c,update:u,sort:m,initData:o,clearGroupingData:i}}(),function(){var e=ax5.ui.grid,t=ax5.util,n=function(){return t.number(this.value,{money:!0})};e.formatter={money:n}}(),function(){var e=ax5.ui.grid,t=ax5.util,n={on:function(i,o){var a=this,r=$(i),l=r.offset().left,s=a.$.container.root.offset().left;a.xvar.columnResizerIndex=o;var d={min:-a.colGroup[o]._width+2,max:a.colGroup[o+1]?a.colGroup[o+1]._width:a.$.container.root.width()-2};jQuery(document.body).bind(e.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(t){var n=e.util.getMousePosition(t);a.xvar.__da=n.clientX-a.xvar.mousePosition.clientX,d.min>a.xvar.__da?a.xvar.__da=d.min:d.max<a.xvar.__da&&(a.xvar.__da=d.max),a.xvar.columnResizerLived||a.$.resizer.horizontal.addClass("live"),a.xvar.columnResizerLived=!0,a.$.resizer.horizontal.css({left:l+a.xvar.__da-s})}).bind(e.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(e){n.off.call(a),t.stopEvent(e)}).bind("mouseleave.ax5grid-"+this.instanceId,function(e){n.off.call(a),t.stopEvent(e)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){this.$.resizer.horizontal.removeClass("live"),this.xvar.columnResizerLived=!1,this.setColumnWidth(this.colGroup[this.xvar.columnResizerIndex]._width+this.xvar.__da,this.xvar.columnResizerIndex),jQuery(document.body).unbind(e.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(e.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},i=function(){var i=this;this.$.container.header.on("click","[data-ax5grid-column-attr]",function(t){var n=this.getAttribute("data-ax5grid-column-key"),o=this.getAttribute("data-ax5grid-column-colindex"),a=(this.getAttribute("data-ax5grid-column-rowindex"),i.colGroup[o]);n&&a&&(a.sortable!==!0&&i.config.sortable!==!0||a.sortable===!1||a.sortFixed||l.call(i,a.key)),e.body.blur.call(i)}),this.$.container.header.on("mousedown","[data-ax5grid-column-resizer]",function(o){var a=this.getAttribute("data-ax5grid-column-resizer");i.xvar.mousePosition=e.util.getMousePosition(o),n.on.call(i,this,Number(a)),t.stopEvent(o)}).on("dragstart",function(e){return t.stopEvent(e),!1}),o.call(this)},o=function(){var t=this.config,n=e.util.divideTableByFrozenColumnIndex(this.headerTable,this.config.frozenColumnIndex);this.asideHeaderData=function(e){for(var n=[],i={rows:[]},o=0,a=e.rows.length;o<a;o++)if(i.rows[o]={cols:[]},0===o){var r={label:"",colspan:1,rowspan:e.rows.length,key:"__dindex__",colIndex:null},l={};t.showLineNumber&&(l=jQuery.extend({},r,{label:"&nbsp;",width:t.lineNumberColumnWidth,_width:t.lineNumberColumnWidth}),n.push(l),i.rows[o].cols.push(l)),t.showRowSelector&&(l=jQuery.extend({},r,{label:"",width:t.rowSelectorColumnWidth,_width:t.rowSelectorColumnWidth}),n.push(l),i.rows[o].cols.push(l))}return this.asideColGroup=n,i}.call(this,this.headerTable),this.leftHeaderData=n.leftData,this.headerData=n.rightData},a=function(e){var n=this.config,i=this.colGroup;e&&(o.call(this),this.xvar.paintStartRowIndex=void 0);var a=this.asideHeaderData,r=this.leftHeaderData,l=this.headerData,s=n.header.align;this.leftHeaderColGroup=i.slice(0,this.config.frozenColumnIndex),this.headerColGroup=i.slice(this.config.frozenColumnIndex);var d=function(e,o,a){var r=0,l=[];l.push('<table border="0" cellpadding="0" cellspacing="0">'),l.push("<colgroup>");for(var d=0,c=o.length;d<c;d++)l.push('<col style="width:'+o[d]._width+'px;"  />'),r+=o[d]._width;l.push("<col  />"),l.push("</colgroup>");for(var u=0,h=a.rows.length;u<h;u++){var p="";l.push('<tr class="'+p+'">');for(var f=0,g=a.rows[u].cols.length;f<g;f++){var m=a.rows[u].cols[f],v=n.header.columnHeight*m.rowspan-n.header.columnBorderWidth,y=s||m.align;l.push("<td ",'data-ax5grid-column-attr="'+(m.columnAttr||"default")+'" ','data-ax5grid-column-row="'+u+'" ','data-ax5grid-column-col="'+f+'" ',function(){return"undefined"!=typeof m.key?'data-ax5grid-column-key="'+m.key+'" ':""}(),'data-ax5grid-column-colindex="'+m.colIndex+'" ','data-ax5grid-column-rowindex="'+m.rowIndex+'" ','colspan="'+m.colspan+'" ','rowspan="'+m.rowspan+'" ','class="'+function(e){var i="";return e.styleClass&&(i+=t.isFunction(e.styleClass)?e.styleClass.call({column:e,key:e.key})+" ":e.styleClass+" "),n.header.columnBorderWidth&&(i+="hasBorder "),f==g-1&&(i+="isLastColumn "),i}.call(this,m)+'" ','style="height: '+v+'px;min-height: 1px;">'),l.push(function(){var e=n.header.columnHeight-2*n.header.columnPadding-n.header.columnBorderWidth;return'<span data-ax5grid-cellHolder="" '+(y?'data-ax5grid-text-align="'+y+'"':"")+' style="height: '+(n.header.columnHeight-n.header.columnBorderWidth)+"px;line-height: "+e+'px;">'}(),function(){var e="";return t.isNothing(m.key)||t.isNothing(m.colIndex)||n.sortable!==!0&&m.sortable!==!0||m.sortable===!1||(e+='<span data-ax5grid-column-sort="'+m.colIndex+'" data-ax5grid-column-sort-order="'+(i[m.colIndex].sort||"")+'" />'),e}(),m.label||"&nbsp;","</span>"),t.isNothing(m.colIndex)||n.enableFilter&&l.push('<span data-ax5grid-column-filter="'+m.colIndex+'" data-ax5grid-column-filter-value=""  />'),l.push("</td>")}l.push("<td ",'data-ax5grid-column-row="null" ','data-ax5grid-column-col="null" ','style="height: '+n.header.columnHeight+'px;min-height: 1px;" ',"></td>"),l.push("</tr>")}return l.push("</table>"),e.html(l.join("")),function(){for(var i=n.header.columnHeight*a.rows.length-n.header.columnBorderWidth,r=0,l=[],s=0,d=o.length;s<d;s++){var c=o[s];t.isNothing(c.colIndex)||(r+=c._width,l.push('<div data-ax5grid-column-resizer="'+c.colIndex+'" style="height:'+i+"px;left: "+(r-4)+'px;"  />'))}e.append(l)}.call(this),r};n.asidePanelWidth>0&&d(this.$.panel["aside-header"],this.asideColGroup,a),n.frozenColumnIndex>0&&d(this.$.panel["left-header"],this.leftHeaderColGroup,r),this.xvar.scrollContentWidth=d(this.$.panel["header-scroll"],this.headerColGroup,l),n.rightSum},r=function(e){return this.$.panel["header-scroll"].css(e),this},l=function(e){var t="",n={},i=0;for(var o in this.sortInfo)this.sortInfo[o].fixed&&(n[o]=this.sortInfo[o],i++);for(var a=0,r=this.colGroup.length;a<r;a++)this.colGroup[a].key==e?(""==t&&(t="undefined"==typeof this.colGroup[a].sort?"desc":"desc"===this.colGroup[a].sort?"asc":void 0),this.colGroup[a].sort=t):this.config.multiSort||(this.colGroup[a].sort=void 0),"undefined"!=typeof this.colGroup[a].sort&&(n[this.colGroup[a].key]||(n[this.colGroup[a].key]={seq:i++,orderBy:this.colGroup[a].sort}));return this.setColumnSort(n),this},s=function(e){for(var t=0,n=this.colGroup.length;t<n;t++)for(var i in e)this.colGroup[t].key==i&&(this.colGroup[t].sort=e[i].orderBy);return this};e.header={init:i,repaint:a,scrollTo:r,toggleSort:l,applySortStatus:s}}(),function(){var e=ax5.ui.grid,t={useReturnToSave:!0,editMode:"popup",getHtml:function(e,t,n,i){return'<input type="text" data-ax5grid-editor="text" value="'+i+'" >'},init:function(t,n,i,o,a){var r;return o.append(r=jQuery(this.getHtml(t,n,i,a))),this.bindUI(t,n,r,i,o,a),r.on("blur",function(){e.body.inlineEdit.deActive.call(t,"RETURN",n)}),r},bindUI:function(e,t,n,i,o,a){n.focus().select()}},n={useReturnToSave:!0,editMode:"popup",getHtml:function(e,t,n,i){return'<input type="text" data-ax5grid-editor="money" value="'+i+'" >'},init:function(t,n,i,o,a){var r;return o.append(r=jQuery(this.getHtml(t,n,i,a))),this.bindUI(t,n,r,i,o,a),r.on("blur",function(){e.body.inlineEdit.deActive.call(t,"RETURN",n)}),r},bindUI:function(e,t,n,i,o,a){n.data("binded-ax5ui","ax5formater"),n.ax5formatter({pattern:"money"}),n.focus().select()}},i={useReturnToSave:!0,editMode:"popup",getHtml:function(e,t,n,i){return'<input type="text" data-ax5grid-editor="number" value="'+i+'" >'},init:function(t,n,i,o,a){var r;return o.append(r=jQuery(this.getHtml(t,n,i,a))),this.bindUI(t,n,r,i,o,a),r.on("blur",function(){e.body.inlineEdit.deActive.call(t,"RETURN",n)}),r},bindUI:function(e,t,n,i,o,a){n.data("binded-ax5ui","ax5formater"),n.ax5formatter({pattern:"number"}),n.focus().select()}},o={useReturnToSave:!0,editMode:"popup",getHtml:function(e,t,n,i){return'<input type="text" data-ax5grid-editor="calendar" value="'+i+'" >'},init:function(e,t,n,i,o){var a;return i.append(a=jQuery(this.getHtml(e,t,n,o))),this.bindUI(e,t,a,n,i,o),a},bindUI:function(t,n,i,o,a,r){var l=t;i.data("binded-ax5ui","ax5picker"),i.ax5picker({direction:"auto",content:{type:"date",formatter:{pattern:"date"}},onStateChanged:function(){"open"==this.state?this.self.activePicker.attr("data-ax5grid-inline-edit-picker","date"):"close"==this.state&&e.body.inlineEdit.deActive.call(l,"RETURN",n)}}),i.focus().select()}},a={useReturnToSave:!1,editMode:"popup",getHtml:function(e,t,n,i){var o=[];return o.push('<div data-ax5select="ax5grid-editor" data-ax5select-config="{}">'),o.push("</div>"),o.join("")},init:function(e,t,n,i,o){var a;return i.append(a=jQuery(this.getHtml(e,t,n,o))),this.bindUI(e,t,a,n,i,o),a},bindUI:function(t,n,i,o,a,r){var l={columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}};jQuery.extend(!0,l,o.config),l.options.forEach(function(e){e[l.columnKeys.optionValue]==r&&(e[l.columnKeys.optionSelected]=!0)});var s=t;i.data("binded-ax5ui","ax5select"),i.ax5select({columnKeys:l.columnKeys,options:l.options,onStateChanged:function(){"open"==this.state?this.self.activeSelectOptionGroup.attr("data-ax5grid-inline-edit-picker","select"):"changeValue"==this.state?e.body.inlineEdit.deActive.call(s,"RETURN",n,this.value[0][l.columnKeys.optionValue]):"close"==this.state&&e.body.inlineEdit.deActive.call(s,"ESC",n)}}),i.ax5select("open"),i.ax5select("setValue",r),i.find("a").focus()}},r={editMode:"inline",getHtml:function(e,t,n){var i,o=e.config.body.columnHeight-2*e.config.body.columnPadding-e.config.body.columnBorderWidth;i=t.config&&t.config.trueValue?n==t.config.trueValue?"true":"false":0==n||"false"==n||n<"1"?"false":"true";var a={marginTop:2,height:o-4};return jQuery.extend(!0,a,t.config),a.marginTop=(o-a.height)/2,'<div data-ax5grid-editor="checkbox" data-ax5grid-checked="'+i+'" style="height:'+a.height+"px;width:"+a.height+"px;margin-top:"+a.marginTop+'px;"></div>'}};e.inlineEditor={text:t,money:n,number:i,date:o,select:a,checkbox:r}}(),function(){var e=ax5.ui.grid,t=ax5.util,n=function(e){var t=function(e){this.page.currentPage!=e&&(this.page.selectPage=e,this.config.page.onChange&&this.config.page.onChange.call({self:this,page:this.page,data:this.data}))},n={first:function(){t.call(this,0)},prev:function(){var e=this.page.currentPage-1;e<0&&(e=0),t.call(this,e)},next:function(){var e=this.page.currentPage+1;e>this.page.totalPages-1&&(e=this.page.totalPages-1),t.call(this,e)},last:function(){t.call(this,this.page.totalPages-1)}};e in n?n[e].call(this):t.call(this,e-1)},i=function(){var t=this;if(this.page){var i={hasPage:!1,currentPage:this.page.currentPage,pageSize:this.page.pageSize,totalElements:this.page.totalElements,totalPages:this.page.totalPages,firstIcon:this.config.page.firstIcon,prevIcon:this.config.page.prevIcon||"«",nextIcon:this.config.page.nextIcon||"»",lastIcon:this.config.page.lastIcon},o=this.config.page.navigationItemCount;i["@paging"]=function(){var e=[],t=i.currentPage-Math.floor(o/2);t<0&&(t=0);var n=i.currentPage+o;n>i.totalPages&&(n=i.totalPages),n-t>o&&(n=t+o),n-t<o&&(t=n-o),t<0&&(t=0);for(var a=t,r=n;a<r;a++)e.push({pageNo:a+1,selected:i.currentPage==a});return e}(),i["@paging"].length>0&&(i.hasPage=!0),this.$.page.navigation.html(e.tmpl.get("page_navigation",i)),this.$.page.navigation.find("[data-ax5grid-page-move]").on("click",function(){var e=this.getAttribute("data-ax5grid-page-move");n.call(t,e)})}else this.$.page.navigation.empty()},o=function(){var n=this.xvar.paintStartRowIndex,i=this.xvar.paintStartRowIndex+this.xvar.paintRowCount-1,o=this.xvar.dataRowCount;i>o&&(i=o),this.$.page.status.html(e.tmpl.get("page_status",{fromRowIndex:t.number(n+1,{money:!0}),toRowIndex:t.number(i,{money:!0}),totalElements:t.number(o,{money:!0})}))};e.page={navigationUpdate:i,statusUpdate:o}}(),function(){var e=ax5.ui.grid,t=ax5.util,n={vertical:function(e,t){var n=t._content_height-t._panel_height,i=t._vertical_scroller_height-t.verticalScrollBarHeight,o=n*e.top/i;return o<0?o=0:n<o&&(o=n),{top:-o}},horizontal:function(e,t){var n=t._content_width-t._panel_width,i=t._horizontal_scroller_width-t.horizontalScrollBarWidth,o=n*e.left/i;return o<0?o=0:n<o&&(o=n),{left:-o}}},i={vertical:function(t,i){var o="vertical",a=i._content_height-i._panel_height,r=i._vertical_scroller_height-i.verticalScrollBarHeight,l=r*t/a;if(-l>r){l=-r;var s=n[o].call(this,{top:-l},{_content_width:i._content_width,_content_height:i._content_height,_panel_width:i._panel_width,_panel_height:i._panel_height,_horizontal_scroller_width:i._horizontal_scroller_width,_vertical_scroller_height:i._vertical_scroller_height,verticalScrollBarHeight:i.verticalScrollBarHeight,horizontalScrollBarWidth:i.horizontalScrollBarWidth});e.body.scrollTo.call(this,s)}return-l},horizontal:function(t,i){var o="horizontal",a=i._content_width-i._panel_width,r=i._horizontal_scroller_width-i.horizontalScrollBarWidth,l=r*t/a;if(-l>r){l=-r;var s=n[o].call(this,{left:-l},{_content_width:i._content_width,_content_height:i._content_height,_panel_width:i._panel_width,_panel_height:i._panel_height,_horizontal_scroller_width:i._horizontal_scroller_width,_vertical_scroller_height:i._vertical_scroller_height,verticalScrollBarHeight:i.verticalScrollBarHeight,horizontalScrollBarWidth:i.horizontalScrollBarWidth});e.header.scrollTo.call(this,s),e.body.scrollTo.call(this,s)}return-l}},o={click:function(t,i,o,a){var r=this,l=t.offset(),s={width:i.outerWidth(),height:i.outerHeight()},d={width:t.innerWidth(),height:t.innerHeight()},c=r.$.scroller.vertical.innerHeight(),u=r.$.panel.body.height(),h=r.$.scroller.horizontal.innerWidth(),p=r.$.panel.body.width(),f=r.xvar.scrollContentHeight,g=r.xvar.scrollContentWidth,m=r.$.scroller["vertical-bar"].outerHeight(),v=r.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(t){var n=e.util.getMousePosition(t),i=n.clientY-l.top;return i<0?i=0:i+s.height>d.height&&(i=d.height-s.height),{top:i}},horizontal:function(t){var n=e.util.getMousePosition(t),i=n.clientX-l.left;return i<0?i=0:i+s.width>d.width&&(i=d.width-s.width),{left:i}}},x=y[o](a);i.css(x);var b=n[o].call(r,x,{_content_width:g,_content_height:f,_panel_width:p,_panel_height:u,_horizontal_scroller_width:h,_vertical_scroller_height:c,verticalScrollBarHeight:m,horizontalScrollBarWidth:v});"horizontal"===o&&e.header.scrollTo.call(r,b),e.body.scrollTo.call(r,b)},on:function(t,i,a){var r=this,l=i.position(),s={width:i.outerWidth(),height:i.outerHeight()},d={width:t.innerWidth(),height:t.innerHeight()},c=r.$.scroller.vertical.innerHeight(),u=r.$.panel.body.height(),h=r.$.scroller.horizontal.innerWidth(),p=r.$.panel.body.width(),f=r.xvar.scrollContentHeight,g=r.xvar.scrollContentWidth,m=r.$.scroller["vertical-bar"].outerHeight(),v=r.$.scroller["horizontal-bar"].outerWidth(),y={vertical:function(t){var n=e.util.getMousePosition(t);r.xvar.__da=n.clientY-r.xvar.mousePosition.clientY;var i=l.top+r.xvar.__da;return i<0?i=0:i+s.height>d.height&&(i=d.height-s.height),{top:i}},horizontal:function(t){var n=e.util.getMousePosition(t);r.xvar.__da=n.clientX-r.xvar.mousePosition.clientX;var i=l.left+r.xvar.__da;return i<0?i=0:i+s.width>d.width&&(i=d.width-s.width),{left:i}}};r.xvar.__da=0,jQuery(document.body).bind(e.util.ENM.mousemove+".ax5grid-"+this.instanceId,function(t){var o=y[a](t);i.css(o);var l=n[a].call(r,o,{_content_width:g,_content_height:f,_panel_width:p,_panel_height:u,_horizontal_scroller_width:h,_vertical_scroller_height:c,verticalScrollBarHeight:m,horizontalScrollBarWidth:v});"horizontal"===a&&e.header.scrollTo.call(r,l),e.body.scrollTo.call(r,l)}).bind(e.util.ENM.mouseup+".ax5grid-"+this.instanceId,function(e){o.off.call(r)}).bind("mouseleave.ax5grid-"+this.instanceId,function(e){o.off.call(r)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind(e.util.ENM.mousemove+".ax5grid-"+this.instanceId).unbind(e.util.ENM.mouseup+".ax5grid-"+this.instanceId).unbind("mouseleave.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},a={wheel:function(t){var n,i,o=this,a=o.$.panel["body-scroll"].position(),r=o.$.panel.body.height(),s=o.$.panel.body.width(),d=o.xvar.scrollContentHeight,c=o.xvar.scrollContentWidth,u=!1,h=!1;return n=a.left-t.x,i=a.top-t.y,i>=0?(i=0,u=!0):i<=r-d?(i=r-d,i>=0&&(i=0),u=!0):0==t.y&&(u=!0),n>=0?(n=0,h=!0):n<=s-c?(n=s-c,n>=0&&(n=0),h=!0):0==t.x&&(h=!0),e.header.scrollTo.call(this,{left:n}),e.body.scrollTo.call(this,{left:n,top:i}),l.call(this),!u||!h},on:function(){var n=this,i=n.$.panel["body-scroll"].position(),o=n.$.panel.body.height(),r=n.$.panel.body.width(),s=n.xvar.scrollContentHeight,d=n.xvar.scrollContentWidth,c=function(t){var a,l,c=e.util.getMousePosition(t);return n.xvar.__x_da=c.clientX-n.xvar.mousePosition.clientX,n.xvar.__y_da=c.clientY-n.xvar.mousePosition.clientY,a=i.left+n.xvar.__x_da,l=i.top+n.xvar.__y_da,l>=0?l=0:l<=o-s&&(l=o-s,l>=0&&(l=0)),a>=0?a=0:a<=r-d&&(a=r-d,a>=0&&(a=0)),{left:a,top:l}};this.xvar.__x_da=0,this.xvar.__y_da=0,jQuery(document.body).bind("touchmove.ax5grid-"+this.instanceId,function(i){var o=c(i);e.header.scrollTo.call(n,{left:o.left}),e.body.scrollTo.call(n,o,"noRepaint"),l.call(n),t.stopEvent(i)}).bind("touchend.ax5grid-"+this.instanceId,function(i){var o=c(i);e.header.scrollTo.call(n,{left:o.left}),e.body.scrollTo.call(n,o),l.call(n),t.stopEvent(i),a.off.call(n)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(){jQuery(document.body).unbind("touchmove.ax5grid-"+this.instanceId).unbind("touchend.ax5grid-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},r=function(){var n=this,i=this.config.scroller.trackPadding;this.$.scroller["vertical-bar"].css({width:this.config.scroller.size-(i+1),left:i/2}),this.$.scroller["horizontal-bar"].css({height:this.config.scroller.size-(i+1),top:i/2}),this.$.scroller["vertical-bar"].bind(e.util.ENM.mousedown,function(t){this.xvar.mousePosition=e.util.getMousePosition(t),o.on.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical")}.bind(this)).bind("dragstart",function(e){return t.stopEvent(e),!1}),this.$.scroller.vertical.bind("click",function(e){e.target&&"vertical"==e.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.vertical,this.$.scroller["vertical-bar"],"vertical",e)}.bind(this)),this.$.scroller["horizontal-bar"].bind(e.util.ENM.mousedown,function(t){this.xvar.mousePosition=e.util.getMousePosition(t),o.on.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal")}.bind(this)).bind("dragstart",function(e){return t.stopEvent(e),!1}),this.$.scroller.horizontal.bind("click",function(e){e.target&&"horizontal"==e.target.getAttribute("data-ax5grid-scroller")&&o.click.call(this,this.$.scroller.horizontal,this.$.scroller["horizontal-bar"],"horizontal",e)}.bind(this)),this.$.container.body.bind("mousewheel DOMMouseScroll",function(e){var n=e.originalEvent,i={x:0,y:0};n.detail?i.y=10*n.detail:"undefined"==typeof n.deltaY?(i.y=-n.wheelDelta,i.x=0):(i.y=n.deltaY,i.x=n.deltaX),a.wheel.call(this,i)&&t.stopEvent(e)}.bind(this)),document.addEventListener&&ax5.info.supportTouch&&this.$.container.body.on("touchstart","[data-ax5grid-panel]",function(t){n.xvar.mousePosition=e.util.getMousePosition(t),a.on.call(n)})},l=function(){var e=this.$.scroller.vertical.height(),t=this.$.scroller.horizontal.width(),n=this.$.panel.body.height(),o=this.$.panel.body.width(),a=this.xvar.scrollContentHeight,r=this.xvar.scrollContentWidth,l=n*e/a,s=o*t/r;l<this.config.scroller.barMinSize&&(l=this.config.scroller.barMinSize),s<this.config.scroller.barMinSize&&(s=this.config.scroller.barMinSize),this.$.scroller["vertical-bar"].css({top:i.vertical.call(this,this.$.panel["body-scroll"].position().top,{_content_width:r,_content_height:a,_panel_width:o,_panel_height:n,_horizontal_scroller_width:t,_vertical_scroller_height:e,verticalScrollBarHeight:l,horizontalScrollBarWidth:s}),height:l}),this.$.scroller["horizontal-bar"].css({left:i.horizontal.call(this,this.$.panel["body-scroll"].position().left,{_content_width:r,_content_height:a,_panel_width:o,_panel_height:n,_horizontal_scroller_width:t,_vertical_scroller_height:e,verticalScrollBarHeight:l,horizontalScrollBarWidth:s}),width:s}),e=null,t=null,n=null,o=null,a=null,r=null,l=null,s=null};e.scroller={init:r,resize:l}}(),function(){var e=ax5.ui.grid,t=function(){return'<div data-ax5grid-container="root" data-ax5grid-instance="{{instanceId}}">\n            <div data-ax5grid-container="hidden">\n                <textarea data-ax5grid-form="clipboard"></textarea>\n            </div>\n            <div data-ax5grid-container="header">\n                <div data-ax5grid-panel="aside-header"></div>\n                <div data-ax5grid-panel="left-header"></div>\n                <div data-ax5grid-panel="header">\n                    <div data-ax5grid-panel-scroll="header"></div>\n                </div>\n                <div data-ax5grid-panel="right-header"></div>\n            </div>\n            <div data-ax5grid-container="body">\n                <div data-ax5grid-panel="top-aside-body"></div>\n                <div data-ax5grid-panel="top-left-body"></div>\n                <div data-ax5grid-panel="top-body">\n                    <div data-ax5grid-panel-scroll="top-body"></div>\n                </div>\n                <div data-ax5grid-panel="top-right-body"></div>\n                <div data-ax5grid-panel="aside-body">\n                    <div data-ax5grid-panel-scroll="aside-body"></div>\n                </div>\n                <div data-ax5grid-panel="left-body">\n                    <div data-ax5grid-panel-scroll="left-body"></div>\n                </div>\n                <div data-ax5grid-panel="body">\n                    <div data-ax5grid-panel-scroll="body"></div>\n                </div>\n                <div data-ax5grid-panel="right-body">\n                  <div data-ax5grid-panel-scroll="right-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-aside-body"></div>\n                <div data-ax5grid-panel="bottom-left-body"></div>\n                <div data-ax5grid-panel="bottom-body">\n                    <div data-ax5grid-panel-scroll="bottom-body"></div>\n                </div>\n                <div data-ax5grid-panel="bottom-right-body"></div>\n            </div>\n            <div data-ax5grid-container="page">\n                <div data-ax5grid-page="holder">\n                    <div data-ax5grid-page="navigation"></div>\n                    <div data-ax5grid-page="status"></div>\n                </div>\n            </div>\n            <div data-ax5grid-container="scroller">\n                <div data-ax5grid-scroller="vertical">\n                    <div data-ax5grid-scroller="vertical-bar"></div>    \n                </div>\n                <div data-ax5grid-scroller="horizontal">\n                    <div data-ax5grid-scroller="horizontal-bar"></div>\n                </div>\n                <div data-ax5grid-scroller="corner"></div>\n            </div>\n            <div data-ax5grid-resizer="vertical"></div>\n            <div data-ax5grid-resizer="horizontal"></div>\n        </div>'},n=function(){return'<div data-ax5grid-page-navigation="holder">\n            {{#hasPage}}\n            <div data-ax5grid-page-navigation="cell">    \n                {{#firstIcon}}<button data-ax5grid-page-move="first">{{{firstIcon}}}</button>{{/firstIcon}}\n                <button data-ax5grid-page-move="prev">{{{prevIcon}}}</button>\n            </div>\n            <div data-ax5grid-page-navigation="cell-paging">\n                {{#@paging}}\n                <button data-ax5grid-page-move="{{pageNo}}" data-ax5grid-page-selected="{{selected}}">{{pageNo}}</button>\n                {{/@paging}}\n            </div>\n            <div data-ax5grid-page-navigation="cell">\n                <button data-ax5grid-page-move="next">{{{nextIcon}}}</button>\n                {{#lastIcon}}<button data-ax5grid-page-move="last">{{{lastIcon}}}</button>{{/lastIcon}}\n            </div>\n            {{/hasPage}}\n        </div>'},i=function(){return"<span>{{fromRowIndex}} - {{toRowIndex}} of {{totalElements}}</span>";
};e.tmpl={main:t,page_navigation:n,page_status:i,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e=ax5.ui.grid,t=ax5.util,n=function(e,t){for(var n={rows:[]},i={rows:[]},o=0,a=e.rows.length;o<a;o++){var r=e.rows[o];n.rows[o]={cols:[]},i.rows[o]={cols:[]};for(var l=0,s=r.cols.length;l<s;l++){var d=jQuery.extend({},r.cols[l]),c=d.colIndex,u=d.colIndex+d.colspan;if(c<t)if(u<=t)n.rows[o].cols.push(d);else{var h=jQuery.extend({},d),p=jQuery.extend({},h);h.colspan=t-h.colIndex,p.colIndex=t,p.colspan=d.colspan-h.colspan,n.rows[o].cols.push(h),i.rows[o].cols.push(p)}else i.rows[o].cols.push(d)}}return{leftData:n,rightData:i}},i=function(e){var t,n=e.originalEvent?e.originalEvent:e;return t="changedTouches"in n?n.changedTouches[0]:n,{clientX:t.pageX,clientY:t.pageY}},o={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},a=function(e){var n=t.deepCopy(e),i=this.config,o={rows:[]},a=0,r=function u(e,t,n){for(var r={cols:[]},l=0,s=e.length;l<s;l++){var d=e[l],c=1;d.hidden||(d.colspan=1,d.rowspan=1,d.rowIndex=t,d.colIndex=function(){return n?(a=n.colIndex+l+1,n.colIndex+l):a++}(),r.cols.push(d),"columns"in d?c=u(d.columns,t+1,d):d.width="width"in d?d.width:i.columnMinWidth,d.colspan=c)}return r.cols.length>0?(o.rows[t]||(o.rows[t]={cols:[]}),o.rows[t].cols=o.rows[t].cols.concat(r.cols),r.cols.length-1+c):c};r(n,0);for(var l=0,s=o.rows.length;l<s;l++)for(var d=0,c=o.rows[l].cols.length;d<c;d++)"columns"in o.rows[l].cols[d]||(o.rows[l].cols[d].rowspan=s-l);return o},r=function(e){var n=t.deepCopy(e),i={rows:[]},o=0,a=function r(e,t,n){for(var a={cols:[]},l=0,s=e.length,d=(function h(e){for(var i=0,l=e.length;i<l;i++){var s=e[i],d=1;s.hidden||("key"in s?(s.colspan=1,s.rowspan=1,s.rowIndex=t,s.colIndex=function(){return n?(o=n.colIndex+i+1,n.colIndex+i):o++}(),a.cols.push(s),"columns"in s&&(d=r(s.columns,t+1,s)),s.colspan=d):"columns"in s&&h(s.columns,t))}});l<s;l++){var c=e[l],u=1;c.hidden||("key"in c?(c.colspan=1,c.rowspan=1,c.rowIndex=t,c.colIndex=function(){return n?(o=n.colIndex+l+1,n.colIndex+l):o++}(),a.cols.push(c),"columns"in c&&(u=r(c.columns,t+1,c)),c.colspan=u):"columns"in c&&d(c.columns,t))}return a.cols.length>0?(i.rows[t]||(i.rows[t]={cols:[]}),i.rows[t].cols=i.rows[t].cols.concat(a.cols),a.cols.length-1+u):u};return a(n,0),function(e){for(var t=0,n=e.rows.length;t<n;t++)for(var i=e.rows[t],o=0,a=i.cols.length;o<a;o++){var r=i.cols[o];"columns"in r||(r.rowspan=n-t)}}(i),i},l=function(e){var t={};return e.rows.forEach(function(e){e.cols.forEach(function(e){t[e.rowIndex+"_"+e.colIndex]=jQuery.extend({},e)})}),t},s=function(e){for(var t={rows:[]},n=0,i=e.length;n<i;n++){var o=e[n];t.rows[n]={cols:[]};for(var a=0,r=0,l=o.length;r<l&&!(a>this.columns.length);r++){var s=o[r].colspan||1;o[r].label||o[r].key?t.rows[n].cols.push({colspan:s,rowspan:1,colIndex:a,columnAttr:"sum",align:o[r].align,label:o[r].label,key:o[r].key,collector:o[r].collector,formatter:o[r].formatter}):t.rows[n].cols.push({colIndex:a,colspan:s,rowspan:1,label:"&nbsp;"}),a+=s}if(a-=1,a<this.columns.length+1)for(var r=a;r<this.columns.length+1;r++)t.rows[n].cols.push({colIndex:r+1,colspan:1,rowspan:1,label:"&nbsp;"})}return t},d=function(e){var t={rows:[]},n=0;t.rows[n]={cols:[]};for(var i=0,o=0,a=e.length;o<a&&!(i>this.columns.length);o++){var r=e[o].colspan||1;e[o].label||e[o].key?t.rows[n].cols.push({colspan:r,rowspan:1,rowIndex:0,colIndex:i,columnAttr:"default",align:e[o].align,label:e[o].label,key:e[o].key,collector:e[o].collector,formatter:e[o].formatter}):t.rows[n].cols.push({rowIndex:0,colIndex:i,colspan:r,rowspan:1,label:"&nbsp;"}),i+=r}if(i-=1,i<this.columns.length+1)for(var o=i;o<this.columns.length+1;o++)t.rows[n].cols.push({rowIndex:0,colIndex:o+1,colspan:1,rowspan:1,label:"&nbsp;"});return t},c=function(e,t,n){var i,o=!1,a=[];return this.xvar.frozenRowIndex>e&&a.push("top"),this.xvar.frozenColumnIndex>t&&a.push("left"),a.push("body"),(this.xvar.frozenColumnIndex<=t||this.xvar.frozenRowIndex<=e)&&(i=a.join("-"),a.push("scroll"),o=!0),{panelName:a.join("-"),containerPanelName:i,isScrollPanel:o}},u=function(e){var t=[],n=[].concat(e.split(/[\.\[\]]/g));return n.forEach(function(e){""!==e&&t.push('["'+e.replace(/['\"]/g,"")+'"]')}),n=null,t.join("")};e.util={divideTableByFrozenColumnIndex:n,getMousePosition:i,ENM:o,makeHeaderTable:a,makeBodyRowTable:r,makeBodyRowMap:l,makeFootSumTable:s,makeBodyGroupingTable:d,findPanelByColumnIndex:c,getRealPathForDataItem:u}}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"combobox",version:"0.3.9"},function(){var t=function(){var t,i=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"now loading.."},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,t=this.config;var o=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),"changeValue"==t.state&&(e&&e.onChange?e.onChange.call(t,t):this.onChange&&this.onChange.call(t,t)),e=null,t=null,!0},a=function(){for(var e,t=this.queue.length;t--;){var i=this.queue[t];if(i.$display&&(e=Math.max(i.$select.outerWidth(),n.number(i.minWidth)),i.$display.css({"min-width":e}),i.reset&&i.$display.find(".addon-icon-reset").css({"line-height":this.queue[t].$display.height()+"px"}),i.multiple)){var o=function(){return n.number(i.$display.css("border-top-width"))+n.number(i.$display.css("border-bottom-width"))}.call(this);i.$target.height(""),i.$display.height("");var a=i.$displayTable.outerHeight();Math.abs(a-i.$target.height())>o&&(i.$target.css({height:a+o}),i.$display.css({height:a+o}))}}return t=null,e=null,this},r=function(e){if(!this.activecomboboxOptionGroup)return this;var t=this.queue[this.activecomboboxQueueIndex],n={},i={};e&&jQuery(document.body).append(this.activecomboboxOptionGroup),n=t.$target.offset(),i={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activecomboboxOptionGroup.addClass("direction-"+t.direction),this.activecomboboxOptionGroup.css(function(){return"top"==t.direction?{left:n.left,top:n.top+i.height+1,width:i.width}:"bottom"==t.direction?{left:n.left,top:n.top-this.activecomboboxOptionGroup.outerHeight()-1,width:i.width}:void 0}.call(this))},l=function(e,t){if(!this.activecomboboxOptionGroup)return this;var i=this.queue[this.activecomboboxQueueIndex],o="display";return(t=n.findParentNode(e.target,function(e){return e.getAttribute("data-option-value")?(o="optionItem",!0):i.$target.get(0)==e?(o="display",!0):void 0}))?("optionItem"===o&&(w.call(this,i.id,{index:{gindex:t.getAttribute("data-option-group-index"),index:t.getAttribute("data-option-index")}},void 0,!0),n.selectRange(i.$displayLabel,"end"),i.multiple||this.close()),this):(this.close(),this)},s=function(t){if(t.keyCode==ax5.info.eventKeys.ESC)h.call(this,this.activecomboboxQueueIndex),this.close();else if(t.which==ax5.info.eventKeys.RETURN){for(var n=[],i=this.queue[this.activecomboboxQueueIndex],o=i.$displayLabel.get(0).childNodes,a=0,r=o.length;a<r;a++){var l=o[a];if(l.nodeType in e.util.nodeTypeProcessor){var s=e.util.nodeTypeProcessor[l.nodeType].call(this,this.activecomboboxQueueIndex,l);"undefined"!=typeof s&&n.push(s)}}w.call(this,i.id,n,!0,!0),u.call(this,this.activecomboboxQueueIndex),i.multiple||this.close()}},d=function(t){var n=this.queue[t],i={};i.id=n.id,i.theme=n.theme,i.size="ax5combobox-option-group-"+n.size,i.multiple=n.multiple,i.lang=n.lang,i.options=n.options,i.selected=n.selected,i.hasSelected=i.selected&&i.selected.length>0,i.removeIcon=n.removeIcon;try{return e.tmpl.get.call(this,"label",i,n.columnKeys)}finally{i=null}},c=function(e){var t,i=this.queue[e];if(i.$displayLabel.html(d.call(this,e)),i.$target.height(""),i.$display.height(""),i.$target.height()<(t=i.$displayTable.outerHeight())){var o=function(){return n.number(i.$display.css("border-top-width"))+n.number(i.$display.css("border-bottom-width"))}();i.$target.css({height:t+o}),i.$display.css({height:t+o})}},u=function(e){this.queue[e].$displayLabel.trigger("focus"),n.selectRange(this.queue[e].$displayLabel,"end")},h=function(e){this.queue[e].$displayLabel.trigger("blur")},p=function(t,i){this.queue[t].waitOptions=!0,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(e.tmpl.get.call(this,"option",this.queue[t],this.queue[t].columnKeys))),this.queue[t].onSearch.call({self:this,item:this.queue[t],searchWord:i},function(t){var i={},o=this.queue[this.activecomboboxQueueIndex];return!!o&&(function(e,t){var i={};t.options.forEach(function(t,n){t["@index"]=n,i[t[e.columnKeys.optionValue]]=t}),n.isArray(e.selected)&&e.selected.forEach(function(n){i[n[e.columnKeys.optionValue]]&&(t.options[i[n[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(o,t),o.options=v.call(this,this.activecomboboxQueueIndex,t.options),a.call(this),i.id=o.id,i.theme=o.theme,i.size="ax5combobox-option-group-"+o.size,i.multiple=o.multiple,i.lang=o.lang,i.options=o.options,void this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(e.tmpl.get.call(this,"options",i,o.columnKeys))))}.bind(this))},f=function(e,t){if(this.activecomboboxQueueIndex==-1)return this;var n,i=[],o=-1,a=this.queue[e].indexedOptions.length-1;if(""!=t){var r=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;if(t=t.replace(r,""),this.queue[e].onSearch){p.call(this,e,t);try{return i}finally{i=null,o=null,a=null,n=null}}for(;a-o++;){if(n=this.queue[e].indexedOptions[o],(""+n.text).toLowerCase()==t.toLowerCase()){i=[{"@findex":n["@findex"],optionsSort:0}];break}var l=(""+n.text).toLowerCase().search(t.toLowerCase());if(l>-1&&(i.push({"@findex":n["@findex"],optionsSort:l}),i.length>2))break;l=null}i.sort(function(e,t){return e.optionsSort-t.optionsSort})}i&&i.length>0?m.call(this,e,void 0,i[0]["@findex"]):g.call(this,e);try{return i}finally{i=null,o=null,a=null,n=null}},g=function(e){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[e].optionFocusIndex=-1},m=function(e,t,i){var o,a,r,l,s=this.queue[e];if(this.activecomboboxOptionGroup&&s.options&&s.options.length>0){if("undefined"!=typeof i?o=i:(a=s.optionFocusIndex==-1?s.optionSelectedIndex||-1:s.optionFocusIndex,a==-1?o=0:(o=a+t,o<0?o=0:o>s.optionItemLength-1&&(o=s.optionItemLength-1))),s.optionFocusIndex=o,s.options[o]&&s.options[o].hide){if("undefined"==typeof t)return this;for(;s.options[o].hide;){if(o+=t,o<0){o=0;break}if(o>s.optionItemLength-1){o=s.optionItemLength-1;break}}}if("undefined"!=typeof o&&(this.activecomboboxOptionGroup.find("[data-option-focus-index]").removeClass("hover"),r=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+o+'"]').addClass("hover"),l=this.activecomboboxOptionGroup.find('[data-els="content"]'),r.get(0))){var d=r.outerHeight(),c=l.innerHeight(),u=l.scrollTop(),h=r.position().top+l.scrollTop();if(c+u<h+d?l.scrollTop(h+d-c):u>h&&l.scrollTop(h),"undefined"!=typeof t){var p=s.$displayLabel.get(0).childNodes,f=p[p.length-1];f&&"3"==f.nodeType?(f.nodeValue=s.indexedOptions[o].text,n.selectRange(s.$displayLabel,"end")):f&&"1"==f.nodeType&&(jQuery(f).after(s.indexedOptions[o].text),n.selectRange(s.$displayLabel,"end"))}}}},v=function(){var e=function(e,t){t?this.queue[e].selected.push(jQuery.extend({},t)):this.queue[e].selected=[]};return function(t,o){var a,r,l,s=this.queue[t],d=0;return e.call(this,t,!1),o?(s.options=o,s.indexedOptions=[],a=[],a.push('<option value=""></option>'),s.options.forEach(function(n,o){n.optgroup?(n["@gindex"]=o,n.options.forEach(function(n,r){n["@index"]=r,n["@findex"]=d,a.push('<option value="'+n[s.columnKeys.optionValue]+'" '+(n[s.columnKeys.optionSelected]?' selected="selected"':"")+">"+n[s.columnKeys.optionText]+"</option>"),n[s.columnKeys.optionSelected]&&e.call(i,t,n),s.indexedOptions.push({"@gindex":o,"@index":r,"@findex":d,value:n[s.columnKeys.optionValue],text:n[s.columnKeys.optionText]}),d++})):(n["@index"]=o,n["@findex"]=d,a.push('<option value="'+n[s.columnKeys.optionValue]+'" '+(n[s.columnKeys.optionSelected]?' selected="selected"':"")+">"+n[s.columnKeys.optionText]+"</option>"),n[s.columnKeys.optionSelected]&&e.call(i,t,n),s.indexedOptions.push({"@index":o,"@findex":d,value:n[s.columnKeys.optionValue],text:n[s.columnKeys.optionText]}),d++)}),s.optionItemLength=d,s.$select.html(a.join(""))):(s.$select.get(0).options&&s.$select.get(0).options.length&&(s.$select.get(0).options[0].selected=!1),r=n.toArray(s.$select.get(0).options),l=[],r.forEach(function(n,o){var a={};a[s.columnKeys.optionValue]=n.value,a[s.columnKeys.optionText]=n.text,a[s.columnKeys.optionSelected]=n.selected,a["@index"]=o,a["@findex"]=d,n.selected&&e.call(i,t,a),l.push(a),d++,a=null}),s.options=l,s.indexedOptions=l,s.$select.prepend('<option value=""></option>'),s.$select.get(0).options[0].selected=!0),a=null,r=null,l=null,s.options}}(),y=function(e){return e instanceof jQuery?e=e.data("data-ax5combobox-id"):n.isString(e)||(e=jQuery(e).data("data-ax5combobox-id")),n.isString(e)?n.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5combobox","402","getQueIdx"))},x=function(e,t,n){return"undefined"==typeof n?!e.multiple||!t:n},b=function(e){this.queue[e].options.forEach(function(e){e.optgroup?e.options.forEach(function(e){e.selected=!1}):e.selected=!1})},w=function(){var e={index:function(e,t,o,a){var l=this.queue[e];n.isString(t.index.gindex)?"undefined"!=typeof l.options[t.index.gindex]&&(l.options[t.index.gindex].options[t.index.index][l.columnKeys.optionSelected]=x(l,l.options[t.index.gindex].options[t.index.index][l.columnKeys.optionSelected],o),i.activecomboboxOptionGroup&&i.activecomboboxOptionGroup.find('[data-option-group-index="'+t.index.gindex+'"][data-option-index="'+t.index.index+'"]').attr("data-option-Selected",l.options[t.index.gindex].options[t.index.index][l.columnKeys.optionSelected].toString())):"undefined"!=typeof l.options[t.index.index]&&(l.options[t.index.index][l.columnKeys.optionSelected]=x(l,l.options[t.index.index][l.columnKeys.optionSelected],o),i.activecomboboxOptionGroup&&i.activecomboboxOptionGroup.find('[data-option-index="'+t.index.index+'"]').attr("data-option-Selected",l.options[t.index.index][l.columnKeys.optionSelected].toString())),"undefined"!=typeof a&&"justSetValue"===a||(v.call(this,e,l.options),c.call(this,e),r.call(this))},arr:function(t,o,a,l){o.forEach(function(o){if(n.isString(o)||n.isNumber(o))e.text.call(i,t,o,a,"justSetValue");else for(var r in e)if(o[r]){e[r].call(i,t,o,a,"justSetValue");break}}),v.call(this,t,this.queue[t].options),c.call(this,t),r.call(this)},value:function(e,t,i,o){var a,l=this.queue[e],s=n.search(l.options,function(){return this[l.columnKeys.optionValue]==t[l.columnKeys.optionValue]});s>-1?l.options[s][l.columnKeys.optionSelected]=x(l,l.options[s][l.columnKeys.optionSelected],i):(s=l.options.length,a={"@index":s,hide:!0,addedOption:!0},a[l.columnKeys.optionValue]=t,a[l.columnKeys.optionText]=t,l.options.push(a),l.options[s][l.columnKeys.optionSelected]=x(l,l.options[s][l.columnKeys.optionSelected],i)),"undefined"!=typeof o&&"justSetValue"===o||(v.call(this,e,this.queue[e].options),c.call(this,e),r.call(this))},text:function(e,t,i,o){var a,l=this.queue[e],s=n.search(l.options,function(){return this[l.columnKeys.optionText]==t});s>-1?l.options[s][l.columnKeys.optionSelected]=x(l,l.options[s][l.columnKeys.optionSelected],i):(s=l.options.length,a={"@index":s,hide:!0,addedOption:!0},a[l.columnKeys.optionValue]=t,a[l.columnKeys.optionText]=t,l.options.push(a),l.options[s][l.columnKeys.optionSelected]=x(l,l.options[s][l.columnKeys.optionSelected],i)),"undefined"!=typeof o&&"justSetValue"===o||(v.call(this,e,this.queue[e].options),c.call(this,e),r.call(this))},clear:function(e){b.call(this,e),v.call(this,e,this.queue[e].options),g.call(this,e),this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[e].optionSelectedIndex=-1}};return function(t,i,a,l){var s=n.isNumber(t)?t:y.call(this,t);if(s===-1)return void console.log(ax5.info.getError("ax5combobox","402","val"));if("undefined"==typeof i)throw"error not found value";if(n.isArray(i))e.clear.call(this,s),e.arr.call(this,s,this.queue[s].multiple||0==i.length?i:[i[i.length-1]],a);else if(n.isString(i)||n.isNumber(i))"undefined"==typeof i||null===i||this.queue[s].multiple||b.call(this,s),e.text.call(this,s,i,a,"justSetValue"),c.call(this,s);else if(null===i)e.clear.call(this,s),c.call(this,s);else{this.queue[s].multiple||b.call(this,s);for(var d in e)if(i[d]){e[d].call(this,s,i,a,"justSetValue");break}v.call(this,s,this.queue[s].options),c.call(this,s),r.call(this)}return"undefined"!=typeof i&&l&&!l.noStateChange&&o.call(this,this.queue[s],{self:this,item:this.queue[s],state:"changeValue",value:this.queue[s].selected}),t=null,this}}();this.init=function(){this.onStateChanged=t.onStateChanged,this.onChange=t.onChange,jQuery(window).bind("resize.ax5combobox-display-"+this.instanceId,function(){a.call(this)}.bind(this))},this.bind=function(o){var r,l=function(){var t=n.debounce(function(t){if(this.activecomboboxQueueIndex==-1)return this;for(var o=[],a="",r=this.queue[t],l=r.$displayLabel.get(0).childNodes,s=0,d=l.length;s<d;s++){var c=l[s];if(c.nodeType in e.util.nodeTypeProcessor){var u=e.util.nodeTypeProcessor[c.nodeType].call(this,this.activecomboboxQueueIndex,c,!0);"undefined"==typeof u||(n.isString(u)?(a=u,"1"==c.nodeType&&c.getAttribute("data-ax5combobox-selected-text")?a=!1:o.push(u)):o.push(u))}}0==l.length?w.call(this,r.id,null,void 0,"internal"):a===!1?(w.call(this,r.id,null,void 0,"internal"),w.call(this,r.id,o,void 0,"internal"),n.selectRange(r.$displayLabel,"end")):""!=a&&f.call(i,t,a)},150),o=function(t){for(var i=[],o=this.queue[t],a=o.$displayLabel.get(0).childNodes,r=0,l=a.length;r<l;r++){var s=a[r];if(1==s.nodeType&&s.nodeType in e.util.nodeTypeProcessor){var d=e.util.nodeTypeProcessor[s.nodeType].call(this,t,s,!1);"undefined"==typeof d||n.isString(d)||i.push(d)}}w.call(this,o.id,i,void 0,!1)},r={click:function(e,t){var o,a=n.findParentNode(t.target,function(e){return e.getAttribute("data-ax5combobox-remove")?(o="optionItemRemove",!0):e.getAttribute("data-selected-clear")?(o="clear",!0):void 0});if(a){if("optionItemRemove"===o){var r=a.getAttribute("data-ax5combobox-remove-index"),l=this.queue[e].selected[r];return w.call(this,e,{index:{gindex:l["@gindex"],index:l["@index"]}},!1,!0),u.call(this,e),n.stopEvent(t),this}"clear"===o&&w.call(this,e,{clear:!0})}else i.activecomboboxQueueIndex==e?this.queue[e].optionFocusIndex==-1&&i.close():(i.open(e),""==this.queue[e].$displayLabel.text().replace(/^\W*|\W*$/g,"")&&(this.queue[e].$displayLabel.html(d.call(this,e)),u.call(this,e)))},keyUp:function(e,o){if(o.which==ax5.info.eventKeys.ESC&&i.activecomboboxQueueIndex===-1)return n.stopEvent(o),this;i.activecomboboxQueueIndex!=e&&(i.open(e),n.stopEvent(o));var a={40:"KEY_DOWN",38:"KEY_UP"};a[o.which]||t.call(this,e)},keyDown:function(e,t){t.which==ax5.info.eventKeys.ESC?n.stopEvent(t):t.which==ax5.info.eventKeys.RETURN?n.stopEvent(t):t.which==ax5.info.eventKeys.DOWN?(m.call(this,e,1),n.stopEvent(t)):t.which==ax5.info.eventKeys.UP&&(m.call(this,e,-1),n.stopEvent(t))},focus:function(e,t){},blur:function(e,t){o.call(this,e),n.stopEvent(t)},selectChange:function(e,t){w.call(this,e,{value:this.queue[e].$select.val()},!0)}};return function(t){var n=this.queue[t],i={};return n.selected=[],n.$display?(n.$displayLabel.html(d.call(this,t)),n.options=v.call(this,t,n.options),a.call(this)):(i.instanceId=this.instanceId,i.id=n.id,i.name=n.name,i.theme=n.theme,i.tabIndex=n.tabIndex,i.multiple=n.multiple,i.reset=n.reset,i.label=d.call(this,t),i.formSize=function(){return n.size?"input-"+n.size:""}(),n.$display=jQuery(e.tmpl.get.call(this,"comboboxDisplay",i,n.columnKeys)),n.$displayTable=n.$display.find('[data-els="display-table"]'),n.$displayLabel=n.$display.find('[data-ax5combobox-display="label"]'),n.$target.find("select").get(0)?(n.$select=n.$target.find("select"),n.$select.attr("tabindex","-1").attr("class","form-control "+i.formSize),i.name&&n.$select.attr("name","name"),i.multiple&&n.$select.attr("multiple","multiple")):(n.$select=jQuery(e.tmpl.get.call(this,"formSelect",i,n.columnKeys)),n.$target.append(n.$select)),n.$target.append(n.$display),n.options=v.call(this,t,n.options),a.call(this)),n.$display.unbind("click.ax5combobox").bind("click.ax5combobox",r.click.bind(this,t)),n.$displayLabel.unbind("focus.ax5combobox").bind("focus.ax5combobox",r.focus.bind(this,t)).unbind("blur.ax5combobox").bind("blur.ax5combobox",r.blur.bind(this,t)).unbind("keyup.ax5combobox").bind("keyup.ax5combobox",r.keyUp.bind(this,t)).unbind("keydown.ax5combobox").bind("keydown.ax5combobox",r.keyDown.bind(this,t)),n.$select.unbind("change.ax5combobox").bind("change.ax5combobox",r.selectChange.bind(this,t)),i=null,n=null,t=null,this}}(),s={};return o=jQuery.extend(!0,s,t,o),o.target?(o.$target=jQuery(o.target),o.id||(o.id=o.$target.data("data-ax5combobox-id")),o.id||(o.id="ax5combobox-"+ax5.getGuid(),o.$target.data("data-ax5combobox-id",o.id)),o.name=o.$target.attr("data-ax5combobox"),o.options&&(o.options=JSON.parse(JSON.stringify(o.options))),function(e){n.isObject(e)&&!e.error&&(o=jQuery.extend(!0,o,e))}(n.parseJson(o.$target.attr("data-ax5combobox-config"),!0)),r=n.search(this.queue,function(){return this.id==o.id}),r===-1?(this.queue.push(o),l.call(this,this.queue.length-1)):(this.queue[r]=jQuery.extend(!0,{},this.queue[r],o),l.call(this,r)),s=null,r=null,this):(console.log(ax5.info.getError("ax5combobox","401","bind")),this)},this.open=function(){var i=function(t){t.onExpand.call({self:this,item:t},function(t){if(this.waitOptionsCallback){var i={},o=this.queue[this.activecomboboxQueueIndex];!function(e,t){var i={};t.options.forEach(function(t,n){t["@index"]=n,i[t[e.columnKeys.optionValue]]=t}),n.isArray(e.selected)&&e.selected.forEach(function(n){i[n[e.columnKeys.optionValue]]&&(t.options[i[n[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(o,t),o.$display.find('[data-ax5combobox-display="label"]').html(d.call(this,this.activecomboboxQueueIndex)),o.options=v.call(this,this.activecomboboxQueueIndex,t.options),a.call(this),i.id=o.id,i.theme=o.theme,i.size="ax5combobox-option-group-"+o.size,i.multiple=o.multiple,i.lang=o.lang,i.options=o.options,this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(e.tmpl.get.call(this,"options",i,o.columnKeys)))}}.bind(this))};return function(a,d){this.waitOptionsCallback=null;var c,u,h=n.isNumber(a)?a:y.call(this,a),p=this.queue[h],f={};return p.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activecomboboxOptionGroup?this.activecomboboxQueueIndex==h?this:d>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(h,(d||0)+1)}.bind(this),t.animateTime),this):(p.optionFocusIndex=-1,p.selected&&p.selected.length>0&&(p.optionSelectedIndex=p.selected[0]["@findex"]),f.id=p.id,f.theme=p.theme,f.size="ax5combobox-option-group-"+p.size,f.multiple=p.multiple,f.lang=p.lang,p.$display.attr("data-combobox-option-group-opened","true"),p.onExpand&&(f.waitOptions=!0),f.options=n.filter(p.options,function(){return!this.hide}),this.activecomboboxOptionGroup=jQuery(e.tmpl.get.call(this,"optionGroup",f,p.columnKeys)),this.activecomboboxOptionGroup.find('[data-els="content"]').html(jQuery(e.tmpl.get.call(this,"options",f,p.columnKeys))),this.activecomboboxQueueIndex=h,r.call(this,"append"),jQuery(window).bind("resize.ax5combobox-"+this.instanceId,function(){r.call(this)}.bind(this)),p.selected&&p.selected.length>0&&(u=this.activecomboboxOptionGroup.find('[data-option-index="'+p.selected[0]["@index"]+'"]'),u.get(0)&&(c=u.position().top-this.activecomboboxOptionGroup.height()/3,this.activecomboboxOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:c},p.animateTime,"swing",function(){}))),jQuery(window).bind("keyup.ax5combobox-"+this.instanceId,function(e){e=e||window.event,s.call(this,e),n.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5combobox-"+this.instanceId,function(e){e=e||window.event,l.call(this,e),n.stopEvent(e)}.bind(this)),o.call(this,p,{self:this,state:"open",item:p}),p.onExpand&&(this.waitOptionsCallback=!0,i.call(this,p)),f=null,c=null,u=null,this))}}(),this.update=function(e){return this.bind(e),this},this.setValue=function(e,t,i){var o=n.isNumber(e)?e:y.call(this,e);if(o===-1)return void console.log(ax5.info.getError("ax5combobox","402","val"));if(b.call(this,o),n.isArray(t)){var a=n.map(t,function(){return{value:this}});w.call(this,o,a,i||!0,{noStateChange:!0})}else(n.isString(t)||n.isNumber(t))&&w.call(this,o,{value:t},i||!0,{noStateChange:!0});return this},this.setText=function(e,t,i){var o=n.isNumber(e)?e:y.call(this,e);return o===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):(b.call(this,o),w.call(this,o,t,!0,{noStateChange:!0}),this)},this.getSelectedOption=function(e){var t=n.isNumber(e)?e:y.call(this,e);return t===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):n.deepCopy(this.queue[t].selected)},this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activecomboboxOptionGroup?(e=this.queue[this.activecomboboxQueueIndex],e.optionFocusIndex=-1,e.$display.removeAttr("data-combobox-option-group-opened").trigger("focus"),this.activecomboboxOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5combobox-"+this.instanceId).unbind("click.ax5combobox-"+this.instanceId).unbind("keyup.ax5combobox-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activecomboboxOptionGroup&&this.activecomboboxOptionGroup.remove(),this.activecomboboxOptionGroup=null,this.activecomboboxQueueIndex=-1,o.call(this,e,{self:this,state:"close"})}.bind(this),t.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(e){var t=n.isNumber(e)?e:y.call(this,e);return t===-1?void console.log(ax5.info.getError("ax5combobox","402","val")):(h.call(this,t),this)},this.enable=function(e){var t=y.call(this,e);return this.queue[t].$display.removeAttr("disabled"),this.queue[t].$input.removeAttr("disabled"),o.call(this,this.queue[t],{self:this,state:"enable"}),this},this.disable=function(e){var t=y.call(this,e);return this.queue[t].$display.attr("disabled","disabled"),this.queue[t].$input.attr("disabled","disabled"),o.call(this,this.queue[t],{self:this,state:"disable"}),this},this.main=function(){arguments&&n.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}()),e=ax5.ui.combobox}(),ax5.ui.combobox_instance=new ax5.ui.combobox,jQuery.fn.ax5combobox=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.combobox_instance.open(this);case"close":return ax5.ui.combobox_instance.close(this);case"setValue":return ax5.ui.combobox_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.combobox_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.combobox_instance.getSelectedOption(this);case"enable":return ax5.ui.combobox_instance.enable(this);case"disable":return ax5.ui.combobox_instance.disable(this);case"blur":return ax5.ui.combobox_instance.blur(this);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.combobox_instance.bind(e)});return this}}(),function(){var e=ax5.ui.combobox,t=(ax5.util,function(e){return'\n            <div class="ax5combobox-option-group {{theme}} {{size}}" data-ax5combobox-option-group="{{id}}">\n                <div class="ax-combobox-body">\n                    <div class="ax-combobox-option-group-content" data-els="content"></div>\n                </div>\n                <div class="ax-combobox-arrow"></div> \n            </div>\n        '}),n=function(e){return'\n            <div class="form-control {{formSize}} ax5combobox-display {{theme}}" \n            data-ax5combobox-display="{{id}}" data-ax5combobox-instance="{{instanceId}}">\n                <div class="ax5combobox-display-table" data-els="display-table">\n                    <div data-ax5combobox-display="label-holder"> \n                    <a {{^tabIndex}}href="#ax5combobox-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n                    data-ax5combobox-display="label"\n                    contentEditable="true"\n                    spellcheck="false">{{{label}}}</a>\n                    </div>\n                    <div data-ax5combobox-display="addon"> \n                        {{#multiple}}{{#reset}}\n                        <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n                        {{/reset}}{{/multiple}}\n                        {{#icons}}\n                        <span class="addon-icon-closed">{{clesed}}</span>\n                        <span class="addon-icon-opened">{{opened}}</span>\n                        {{/icons}}\n                        {{^icons}}\n                        <span class="addon-icon-closed"><span class="addon-icon-arrow"></span></span>\n                        <span class="addon-icon-opened"><span class="addon-icon-arrow"></span></span>\n                        {{/icons}}\n                    </div>\n                </div>\n            </a>\n        '},i=function(e){return'\n            <select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" {{#multiple}}multiple="multiple"{{/multiple}}></select>\n        '},o=function(e){return'\n            {{#waitOptions}}\n                <div class="ax-combobox-option-item">\n                        <div class="ax-combobox-option-item-holder">\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                {{{lang.loading}}}\n                            </span>\n                        </div>\n                    </div>\n            {{/waitOptions}}\n            {{^waitOptions}}\n                {{#options}}\n                    {{#optgroup}}\n                        <div class="ax-combobox-option-group">\n                            <div class="ax-combobox-option-item-holder">\n                                <span class="ax-combobox-option-group-label">\n                                    {{{.}}}\n                                </span>\n                            </div>\n                            {{#options}}\n                            {{^hide}}\n                            <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-group-index="{{@gindex}}" data-option-index="{{@index}}" \n                            data-option-value="{{'+e.optionValue+'}}" \n                            {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                                <div class="ax-combobox-option-item-holder">\n                                    {{#multiple}}\n                                    <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                        <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                                    </span>\n                                    {{/multiple}}\n                                    <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+e.optionText+'}}</span>\n                                </div>\n                            </div>\n                            {{/hide}}\n                            {{/options}}\n                        </div>                            \n                    {{/optgroup}}\n                    {{^optgroup}}\n                    {{^hide}}\n                    <div class="ax-combobox-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+e.optionValue+'}}" {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n                        <div class="ax-combobox-option-item-holder">\n                            {{#multiple}}\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-checkbox">\n                                <span class="item-checkbox-wrap useCheckBox" data-option-checkbox-index="{{@i}}"></span>\n                            </span>\n                            {{/multiple}}\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">{{'+e.optionText+'}}</span>\n                        </div>\n                    </div>\n                    {{/hide}}\n                    {{/optgroup}}\n                {{/options}}\n                {{^options}}\n                    <div class="ax-combobox-option-item">\n                        <div class="ax-combobox-option-item-holder">\n                            <span class="ax-combobox-option-item-cell ax-combobox-option-item-label">\n                                {{{lang.noOptions}}}\n                            </span>\n                        </div>\n                    </div>\n                {{/options}}\n            {{/waitOptions}}\n        ';
},a=function(e){return'\n            {{#selected}}<div tabindex="-1" data-ax5combobox-selected-label="{{@i}}" data-ax5combobox-selected-text="{{text}}">\n                <div data-ax5combobox-remove="true" data-ax5combobox-remove-index="{{@i}}">{{{removeIcon}}}</div>\n                <span>{{text}}</span>\n                </div>\n            {{/selected}}\n        '};e.tmpl={comboboxDisplay:n,formSelect:i,optionGroup:t,options:o,label:a,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e=ax5.ui.combobox,t=(ax5.util,{1:function(e,t,n){var i=this.config,o=t;$(t).find("span").get(0)&&(o=$(t).find("span").get(0));var a,r,l=(o.textContent||o.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,""),s=this.queue[e];if(s.selected&&s.selected.length>0&&t.getAttribute("data-ax5combobox-selected-text")==l)return a=t.getAttribute("data-ax5combobox-selected-label"),r=s.selected[a],{index:{gindex:r["@gindex"],index:r["@index"],value:r[i.columnKeys.optionValue]}};if(t.getAttribute("data-ax5combobox-selected-text"))return l;if(""!=l){if(n)return l;var d;return s.optionFocusIndex>-1&&(d=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+s.optionFocusIndex+'"]')),s.optionFocusIndex>-1&&d.get(0)&&d.attr("data-option-value")?{index:{gindex:d.attr("data-option-group-index"),index:d.attr("data-option-index")}}:s.editable?l:void 0}},3:function(e,t,n){var i=(this.config,(t.textContent||t.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,"")),o=this.queue[e];if(""!=i){if(n)return i;var a;return o.optionFocusIndex>-1&&(a=this.activecomboboxOptionGroup.find('[data-option-focus-index="'+o.optionFocusIndex+'"]')),o.optionFocusIndex>-1&&a.get(0)&&a.attr("data-option-value")?{index:{gindex:a.attr("data-option-group-index"),index:a.attr("data-option-index")}}:o.editable?i:void 0}}});e.util={nodeTypeProcessor:t}}(),function(){var e=ax5.ui,t=ax5.util;e.addClass({className:"layout",version:"0.3.2"},function(){var e=function(){var e,n=this,i={mousedown:ax5.info.supportTouch?"touchstart":"mousedown",mousemove:ax5.info.supportTouch?"touchmove":"mousemove",mouseup:ax5.info.supportTouch?"touchend":"mouseup"},o=function(e){var t="changedTouches"in e.originalEvent?e.originalEvent.changedTouches[0]:e;return{clientX:t.clientX,clientY:t.clientY}};this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,splitter:{size:4},autoResize:!0},this.queue=[],this.openTimer=null,this.closeTimer=null,this.resizer=null,e=this.config;var a=function(){for(var e=this.queue.length;e--;)"undefined"==typeof this.queue[e].parentQueIdx&&this.queue[e].autoResize&&l.call(this,e,null,"windowResize")},r={width:function(e,t){return t?t.__width+(t.split?e.splitter.size:0):0},height:function(e,t){return t?t.__height+(t.split?e.splitter.size:0):0}},l=function(){var e={split:{horizontal:function(e,t,n){t.splitter?t.__height=e.splitter.size:n==e.splitPanel.length-1&&0==e.splitPanel.asteriskLength?(t.height="*",t.__height=void 0,e.splitPanel.asteriskLength++):"*"==t.height&&e.splitPanel.asteriskLength++},vertical:function(e,t,n){t.splitter?t.__width=e.splitter.size:n==e.splitPanel.length-1&&0==e.splitPanel.asteriskLength?(t.width="*",t.__width=void 0,e.splitPanel.asteriskLength++):"*"==t.width&&e.splitPanel.asteriskLength++}}},n={top:function(e,t){t.$target.css({height:t.__height||0}),t.split&&t.$splitter.css({height:e.splitter.size,top:t.__height||0})},bottom:function(e,t){t.$target.css({height:t.__height||0}),t.split&&t.$splitter.css({height:e.splitter.size,bottom:t.__height||0})},left:function(e,t){var n={width:t.__width||0,height:e.targetDimension.height};e.dockPanel.top&&(n.height-=e.dockPanel.top.__height,n.top=e.dockPanel.top.__height,e.dockPanel.top.split&&(n.height-=e.splitter.size,n.top+=e.splitter.size)),e.dockPanel.bottom&&(n.height-=e.dockPanel.bottom.__height,e.dockPanel.bottom.split&&(n.height-=e.splitter.size)),t.$target.css(n),t.split&&t.$splitter.css({width:e.splitter.size,height:n.height,top:n.top,left:n.width})},right:function(e,t){var n={width:t.__width||0,height:e.targetDimension.height};e.dockPanel.top&&(n.height-=e.dockPanel.top.__height,n.top=e.dockPanel.top.__height,e.dockPanel.top.split&&(n.height-=e.splitter.size,n.top+=e.splitter.size)),e.dockPanel.bottom&&(n.height-=e.dockPanel.bottom.__height,e.dockPanel.bottom.split&&(n.height-=e.splitter.size)),t.$target.css(n),t.split&&t.$splitter.css({width:e.splitter.size,height:n.height,top:n.top,right:n.width})},center:function(e,t){var n={width:e.targetDimension.width,height:e.targetDimension.height};e.dockPanel.top&&(n.height-=e.dockPanel.top.__height||0,n.top=e.dockPanel.top.__height||0,e.dockPanel.top.split&&(n.height-=e.splitter.size,n.top+=e.splitter.size)),e.dockPanel.bottom&&(n.height-=e.dockPanel.bottom.__height||0,e.dockPanel.bottom.split&&(n.height-=e.splitter.size)),e.dockPanel.left&&(n.width-=e.dockPanel.left.__width||0,n.left=e.dockPanel.left.__width||0,e.dockPanel.left.split&&(n.width-=e.splitter.size,n.left+=e.splitter.size)),e.dockPanel.right&&(n.width-=e.dockPanel.right.__width||0,e.dockPanel.right.split&&(n.width-=e.splitter.size));var i=t.minWidth||0,o=t.minHeight||0;n.width<i&&(n.width=i,e.$target.css({minWidth:i+r.width(e.dockPanel.left,e.splitter.size)+r.width(e.dockPanel.right,e.splitter.size)})),n.height<o&&(n.height=o,e.$target.css({minHeight:o+r.height(e.dockPanel.top,e.splitter.size)+r.height(e.dockPanel.bottom,e.splitter.size)})),t.$target.css(n)},split:{horizontal:function(e,t,n,i,o){var a={display:"block"},r=n?Number(e.splitPanel[n-1].offsetEnd):0;t.splitter?a.height=e.splitter.size:"*"!=t.height||"undefined"!=typeof t.__height&&!o?a.height=t.__height||0:a.height=t.__height=(e.targetDimension.height-i)/e.splitPanel.asteriskLength,a.top=r,t.offsetStart=r,t.offsetEnd=Number(r)+Number(a.height),t.$target.css(a)},vertical:function(e,t,n,i,o){var a={display:"block"},r=n?Number(e.splitPanel[n-1].offsetEnd):0;t.splitter?a.width=e.splitter.size:"*"!=t.width||"undefined"!=typeof t.__width&&!o?a.width=t.__width||0:a.width=t.__width=(e.targetDimension.width-i)/e.splitPanel.asteriskLength,a.left=r,t.offsetStart=r,t.offsetEnd=Number(r)+Number(a.width),t.$target.css(a)}}},i={"dock-panel":function(e){for(var t in e.dockPanel)e.dockPanel[t].$target&&e.dockPanel[t].$target.get(0)&&t in n&&n[t].call(this,e,e.dockPanel[t])},"split-panel":function(i,o){var a;i.splitPanel.asteriskLength=0,i.splitPanel.forEach(function(t,n){e.split[i.oriental].call(this,i,t,n)}),a="horizontal"==i.oriental?t.sum(i.splitPanel,function(e){if("*"!=e.height)return t.number(e.__height)}):t.sum(i.splitPanel,function(e){if("*"!=e.width)return t.number(e.__width)}),i.splitPanel.forEach(function(e,t){n.split[i.oriental].call(this,i,e,t,a,o)})}},o=function(e){for(var t=e.childQueIdxs.length;t--;)l.call(this,e.childQueIdxs[t])};return function(e,t,n){var a=this.queue[e];a.targetDimension={height:a.$target.innerHeight(),width:a.$target.innerWidth()},a.layout in i&&i[a.layout].call(this,a,n),a.childQueIdxs&&o.call(this,a,n),a.onResize&&setTimeout(function(){this.onResize.call(this,this)}.bind(a),1),t&&t.call(a,a)}}(),s={on:function(e,t,o){var a=this.queue[e],l=o.position(),d={width:o.width(),height:o.height()},c={left:function(e){var n="changedTouches"in e.originalEvent?e.originalEvent.changedTouches[0]:e;t.__da=n.clientX-t.mousePosition.clientX;var i=t.minWidth||0,o=t.maxWidth||a.targetDimension.width-r.width(a,a.dockPanel.left)-r.width(a,a.dockPanel.right);return t.__width+t.__da<i?t.__da=-t.__width+i:o<t.__width+t.__da&&(t.__da=o-t.__width),{left:t.$splitter.position().left+t.__da}},right:function(e){var n="changedTouches"in e.originalEvent?e.originalEvent.changedTouches[0]:e;t.__da=n.clientX-t.mousePosition.clientX;var i=t.minWidth||0,o=t.maxWidth||a.targetDimension.width-r.width(a,a.dockPanel.left)-r.width(a,a.dockPanel.right);return t.__width-t.__da<i?t.__da=t.__width-i:o<t.__width-t.__da&&(t.__da=-o+t.__width),{left:t.$splitter.position().left+t.__da}},top:function(e){var n="changedTouches"in e.originalEvent?e.originalEvent.changedTouches[0]:e;t.__da=n.clientY-t.mousePosition.clientY;var i=t.minHeight||0,o=t.maxHeight||a.targetDimension.height-r.height(a,a.dockPanel.top)-r.height(a,a.dockPanel.bottom);return t.__height+t.__da<i?t.__da=-t.__height+i:o<t.__height+t.__da&&(t.__da=o-t.__height),{top:t.$splitter.position().top+t.__da}},bottom:function(e){var n="changedTouches"in e.originalEvent?e.originalEvent.changedTouches[0]:e;t.__da=n.clientY-t.mousePosition.clientY;var i=t.minHeight||0,o=t.maxHeight||a.targetDimension.height-r.height(a,a.dockPanel.top)-r.height(a,a.dockPanel.bottom);return t.__height-t.__da<i?t.__da=t.__height-i:o<t.__height-t.__da&&(t.__da=-o+t.__height),{top:t.$splitter.position().top+t.__da}},split:function(e){var n="changedTouches"in e.originalEvent?e.originalEvent.changedTouches[0]:e;if("horizontal"==a.oriental){t.__da=n.clientY-t.mousePosition.clientY;var i=a.splitPanel[t.panelIndex-1],o=a.splitPanel[t.panelIndex+1],r=i.minHeight||0,l=o.minHeight||0;return t.offsetStart+t.__da<i.offsetStart+r?t.__da=i.offsetStart-t.offsetStart+r:t.offsetStart+t.__da>o.offsetEnd-l&&(t.__da=o.offsetEnd-t.offsetEnd-l),{top:t.$target.position().top+t.__da}}t.__da=n.clientX-t.mousePosition.clientX;var i=a.splitPanel[t.panelIndex-1],o=a.splitPanel[t.panelIndex+1],s=i.minWidth||0,d=o.minWidth||0;return t.offsetStart+t.__da<i.offsetStart+s?t.__da=i.offsetStart-t.offsetStart+s:t.offsetStart+t.__da>o.offsetEnd-d&&(t.__da=o.offsetEnd-t.offsetEnd-d),{left:Number(t.$target.position().left)+Number(t.__da)}}};t.__da=0,jQuery(document.body).bind(i.mousemove+".ax5layout-"+this.instanceId,function(e){n.resizer||(n.resizer=jQuery('<div class="ax5layout-resizer panel-'+t.resizerType+'" ondragstart="return false;"></div>'),n.resizer.css({left:l.left,top:l.top,width:d.width,height:d.height}),a.$target.append(n.resizer)),n.resizer.css(c[t.resizerType](e))}).bind(i.mouseup+".ax5layout-"+this.instanceId,function(i){s.off.call(n,e,t,o)}).bind("mouseleave.ax5layout-"+this.instanceId,function(i){s.off.call(n,e,t,o)}),jQuery(document.body).attr("unselectable","on").css("user-select","none").on("selectstart",!1)},off:function(e,t,o){var a=this.queue[e],r={"dock-panel":{left:function(e,t){t.__width+=t.__da},right:function(){t.__width-=t.__da},top:function(){t.__height+=t.__da},bottom:function(){t.__height-=t.__da}},"split-panel":{split:function(){"horizontal"==a.oriental?(a.splitPanel[t.panelIndex-1].__height+=t.__da,a.splitPanel[t.panelIndex+1].__height-=t.__da):(a.splitPanel[t.panelIndex-1].__width+=t.__da,a.splitPanel[t.panelIndex+1].__width-=t.__da)}},"tab-panel":{}};n.resizer&&(n.resizer.remove(),n.resizer=null,r[this.queue[e].layout][t.resizerType].call(this,e,t),l.call(this,e)),jQuery(document.body).unbind(i.mousemove+".ax5layout-"+this.instanceId).unbind(i.mouseup+".ax5layout-"+this.instanceId).unbind("mouseleave.ax5layout-"+this.instanceId),jQuery(document.body).removeAttr("unselectable").css("user-select","auto").off("selectstart")}},d={open:function(e,t,n){if(t.activePanelIndex!=n&&(t.tabPanel[n].active=!0,t.tabPanel[t.activePanelIndex].active=!1,t.$target.find('[data-tab-panel-label="'+n+'"]').attr("data-tab-active","true"),t.$target.find('[data-tab-panel-label="'+t.activePanelIndex+'"]').removeAttr("data-tab-active"),t.tabPanel[n].$target.attr("data-tab-active","true"),t.tabPanel[t.activePanelIndex].$target.removeAttr("data-tab-active"),t.activePanelIndex=n,t.onOpenTab)){var i={$target:t.$target,name:t.name,id:t.id,layout:t.layout,activePanelIndex:t.activePanelIndex,activePanel:t.tabPanel[t.activePanelIndex],tabPanel:t.tabPanel};t.onOpenTab.call(i)}}},c=function(){return'\n<div data-tab-panel-label-holder="{{id}}">\n    <div data-tab-panel-label-border="{{id}}"></div>\n    <div data-tab-panel-label-table="{{id}}">\n        <div data-tab-panel-aside="left"></div>\n    {{#tabPanel}}\n        <div data-tab-panel-label="{{panelIndex}}" data-tab-active="{{active}}">\n            <div data-tab-label="{{panelIndex}}">{{{label}}}</div>\n        </div>\n    {{/tabPanel}}\n        <div data-tab-panel-aside="right"></div>\n    </div>\n</div>\n'},u=function(){var e=function(e,n){return"*"==e?void 0:"%"==t.right(e,1)?n*t.number(e)/100:Number(e)},a={"dock-panel":function(a){var r=this.queue[a];r.dockPanel={},r.$target.find(">[data-dock-panel]").each(function(){var l={};!function(e){t.isObject(e)&&!e.error&&(l=jQuery.extend(!0,l,e))}(t.parseJson(this.getAttribute("data-dock-panel"),!0)),"dock"in l&&(l.$target=jQuery(this),l.$target.addClass("dock-panel-"+l.dock),(l.split=l.split&&"true"==l.split.toString())&&(l.$splitter=jQuery('<div data-splitter="" class="dock-panel-'+l.dock+'"></div>'),l.$splitter.bind(i.mousedown,function(e){l.mousePosition=o(e),s.on.call(n,a,l,l.$splitter)}).bind("dragstart",function(e){return t.stopEvent(e),!1}),r.$target.append(l.$splitter)),"top"==l.dock||"bottom"==l.dock?l.__height=e(l.height,r.targetDimension.height):l.__width=e(l.width,r.targetDimension.width),l.resizerType=l.dock,r.dockPanel[l.dock]=l)})},"split-panel":function(a){var r=this.queue[a];r.splitPanel=[],r.$target.find(">[data-split-panel], >[data-splitter]").each(function(l){var d={};!function(e){t.isObject(e)&&!e.error&&(d=jQuery.extend(!0,d,e))}(t.parseJson(this.getAttribute("data-split-panel")||this.getAttribute("data-splitter"),!0)),d.$target=jQuery(this),d.$target.addClass("split-panel-"+r.oriental),d.panelIndex=l,this.getAttribute("data-splitter")?(d.splitter=!0,d.$target.bind(i.mousedown,function(e){d.panelIndex>0&&d.panelIndex<r.splitPanel.length-1&&(d.mousePosition=o(e),s.on.call(n,a,d,d.$target))}).bind("dragstart",function(e){return t.stopEvent(e),!1}),d.resizerType="split"):"horizontal"==r.oriental?d.__height=e(d.height,r.targetDimension.height):(r.oriental="vertical",d.__width=e(d.width,r.targetDimension.width)),r.splitPanel.push(d)})},"tab-panel":function(e){var i=this.queue[e],o=!1;i.tabPanel=[],i.$target.find(">[data-tab-panel]").each(function(e){var n={};!function(e){t.isObject(e)&&!e.error&&(n=jQuery.extend(!0,n,e))}(t.parseJson(this.getAttribute("data-tab-panel"),!0)),o&&(n.active=!1),n.$target=jQuery(this),n.active&&"false"!=n.active&&(o=!0,i.activePanelIndex=e,n.$target.attr("data-tab-active","true")),n.panelIndex=e,i.tabPanel.push(n)}),o||(i.tabPanel[0].active=!0,i.tabPanel[0].$target.attr("data-tab-active","true"),i.activePanelIndex=0),i.$target.append(jQuery(ax5.mustache.render(c.call(this,e),i))),i.$target.on("click","[data-tab-panel-label]",function(t){var o=this.getAttribute("data-tab-panel-label");d.open.call(n,e,i,o)})}};return function(e){var t=this.queue[e];t.targetDimension={height:t.$target.innerHeight(),width:t.$target.innerWidth()},t.$target.parents("[data-ax5layout]").get(0)&&p.call(this,t.$target.parents("[data-ax5layout]").get(0),e),t.layout in a&&a[t.layout].call(this,e),l.call(this,e)}}(),h=function(e){return t.isString(e)||(e=jQuery(e).data("data-ax5layout-id")),t.isString(e)?t.search(this.queue,function(){return this.id==e}):-1},p=function(e,n){var i=t.isNumber(e)?e:h.call(this,e);this.queue[i].childQueIdxs||(this.queue[i].childQueIdxs=[]),this.queue[i].childQueIdxs.push(n),this.queue[n].parentQueIdx=i};this.init=function(){this.onStateChanged=e.onStateChanged,this.onClick=e.onClick,jQuery(window).bind("resize.ax5layout-"+this.instanceId,function(){a.call(this)}.bind(this))},this.bind=function(n){var i,o={};return n=jQuery.extend(!0,o,e,n),n.target?(n.$target=jQuery(n.target),n.id||(n.id=n.$target.data("data-ax5layout-id")),n.id||(n.id="ax5layout-"+ax5.getGuid(),n.$target.data("data-ax5layout-id",n.id)),n.name=n.$target.attr("data-ax5layout"),n.options&&(n.options=JSON.parse(JSON.stringify(n.options))),function(e){t.isObject(e)&&!e.error&&(n=jQuery.extend(!0,n,e))}(t.parseJson(n.$target.attr("data-config"),!0)),i=t.search(this.queue,function(){return this.id==n.id}),i===-1?(this.queue.push(n),u.call(this,this.queue.length-1)):(this.queue[i]=jQuery.extend(!0,{},this.queue[i],n),u.call(this,i)),o=null,i=null,this):(console.log(ax5.info.getError("ax5layout","401","bind")),this)},this.align=function(e,n){var i=t.isNumber(e)?e:h.call(this,e);if(i===-1)for(var o=this.queue.length;o--;)l.call(this,o,null,n);else l.call(this,i,null,n);return this},this.onResize=function(e,n){var i=t.isNumber(e)?e:h.call(this,e);return i===-1?void console.log(ax5.info.getError("ax5layout","402","onResize")):(this.queue[i].onResize=n,this)},this.resize=function(){var e={"dock-panel":function(e,n){["top","bottom","left","right"].forEach(function(i){n[i]&&e.dockPanel[i]&&("top"==i||"bottom"==i?e.dockPanel[i].__height=t.isObject(n[i])?n[i].height:n[i]:"left"!=i&&"right"!=i||(e.dockPanel[i].__width=t.isObject(n[i])?n[i].width:n[i]))})},"split-panel":function(){},"tab-panel":function(){}};return function(n,i,o){var a=t.isNumber(n)?n:h.call(this,n);if(a===-1)for(var r=this.queue.length;r--;)e[this.queue[r].layout].call(this,this.queue[r],i),l.call(this,r,o);else this.queue[a]&&(e[this.queue[a].layout].call(this,this.queue[a],i),l.call(this,a,o));return this}}(),this.reset=function(){var e={"dock-panel":function(e){["top","bottom","left","right"].forEach(function(t){e.dockPanel[t]&&("top"==t||"bottom"==t?e.dockPanel[t].__height=e.dockPanel[t].height:"left"!=t&&"right"!=t||(e.dockPanel[t].__width=e.dockPanel[t].width))})},"split-panel":function(){},"tab-panel":function(){}};return function(n,i){var o=t.isNumber(n)?n:h.call(this,n);return o===-1?void console.log(ax5.info.getError("ax5layout","402","reset")):(e[this.queue[o].layout].call(this,this.queue[o]),l.call(this,o,i),this)}}(),this.hide=function(){},this.tabOpen=function(){return function(e,n){var i=t.isNumber(e)?e:h.call(this,e);return i===-1?void console.log(ax5.info.getError("ax5layout","402","tabOpen")):(d.open.call(this,i,this.queue[i],n),this)}}(),this.main=function(){arguments&&t.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return e}())}(),ax5.ui.layout_instance=new ax5.ui.layout,jQuery.fn.ax5layout=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"align":return ax5.ui.layout_instance.align(this,arguments[1]);case"resize":return ax5.ui.layout_instance.resize(this,arguments[1],arguments[2]);case"reset":return ax5.ui.layout_instance.reset(this,arguments[1]);case"hide":return ax5.ui.layout_instance.hide(this,arguments[1]);case"onResize":return ax5.ui.layout_instance.onResize(this,arguments[1]);case"tabOpen":return ax5.ui.layout_instance.tabOpen(this,arguments[1]);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.layout_instance.bind(e)});return this}}(),function(){var e=ax5.ui,t=ax5.util;e.addClass({className:"binder",version:"0.2.0"},function(){var e=function(){var e;this.instanceId=ax5.getGuid(),this.config={},e=this.config,this.model={},this.tmpl={},this.view_target=null,this.change_trigger={},this.click_trigger={},this.update_trigger={},this.onerror=null;var n=Object.prototype.toString,i=function(e){var t;return null!=e&&e==e.window?t="window":e&&1==e.nodeType?t="element":e&&11==e.nodeType?t="fragment":"undefined"==typeof e?t="undefined":"[object Object]"==n.call(e)?t="object":"[object Array]"==n.call(e)?t="array":"[object String]"==n.call(e)?t="string":"[object Number]"==n.call(e)?t="number":"[object NodeList]"==n.call(e)?t="nodelist":"function"==typeof e&&(t="function"),t},o=function(e,t,n){return e+"["+t+"]"+("."==n?"":"."+n)},a=function(e){var t=[],n=[].concat(e.split(/[\.\[\]]/g));return n.forEach(function(e){""!==e&&t.push('["'+e.replace(/['\"]/g,"")+'"]')}),n=null,t.join("")};this.setModel=function(e,t){return this.model=e,!this.view_target&&t?(this.view_target=t,this._binding()):this._binding("update"),this},this.set=function(e,t){var n,o,r,l=this;if(Function("val","this"+a(e)+" = val;").call(this.model,t),n=i(t),"object"==n)for(var s in t)this.set(e+"."+s,t[s]);else if("array"==n)for(this.view_target.find('[data-ax-path="'+e+'"]').each(function(){r=(this.type||"").toLowerCase(),"checkbox"!=r&&"radio"!=r||l.set_els_value(this,this.tagName.toLowerCase(),r,t,e,"change")}),o=t.length;o--;)this.set(e+"["+o+"]",t[o]);else this.view_target.find('[data-ax-path="'+e+'"]').each(function(){l.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),t,e,"change")});return this},this.get=function(e){return"undefined"==typeof e?this.model:Function("","return this"+a(e)+";").call(this.model)},this.onChange=function(e,t){return this.change_trigger[e||"*"]=t,this},this.onClick=function(e,t){return this.click_trigger[e]=t,this},this.add=function(e,t){var n=Function("","return this"+a(e)+";").call(this.model),i=this.tmpl[e];t["@i"]=n.length,t["@r"]=n.length,t.__ADDED__=!0,Function("val","this"+a(e)+".push(val);").call(this.model,t);for(var o in i){var r=$(ax5.mustache.render(i[o].content,t));r.attr("data-ax-repeat-path",e),r.attr("data-ax-repeat-i",t["@i"]),this.bind_event_tmpl(r,e),i[o].container.append(r)}this.change("*");var l=this.update_trigger[e];if(l){var s={repeat_path:e,tmpl:i,list:n};l.call(s,s)}return this},this.remove=function(e,t){var n=Function("","return this"+a(e)+";").call(this.model),i=this.tmpl[e];"undefined"==typeof t&&(t=n.length-1);var o=n[t];o.__ADDED__?n.splice(t,1):n[t].__DELETED__=!0;for(var r in i)i[r].container.empty(),this.print_tmpl(e,i[r]);this.change("*");var l=this.update_trigger[e];if(l){var s={repeat_path:e,tmpl:i,list:n};l.call(s,s)}return this},this.update=function(e,t,n){var i=Function("","return this"+a(e)+";").call(this.model),o=this.tmpl[e];"undefined"!=typeof t&&n&&i.splice(t,1,n);for(var r in o)o[r].container.empty(),this.print_tmpl(e,o[r]);this.change("*");var l=this.update_trigger[e];if(l){var s={repeat_path:e,tmpl:o,list:i};l.call(s,s)}return this},this.childAdd=function(e,t,n,i){var o=Function("","return this"+a(e)+";").call(this.model),r=Function("","return this"+a(e)+"["+t+"]."+n+";").call(this.model);i.__ADDED__=!0,r.push(i),this.update(e,t,o[t])},this.childRemove=function(e,t,n,i){var o=Function("","return this"+a(e)+";").call(this.model),r=Function("","return this"+a(e)+"["+t+"]."+n+";").call(this.model),l=r[i];l.__ADDED__?r.splice(i,1):r[i].__DELETED__=!0,this.update(e,t,o[t])},this.childUpdate=function(e,t,n,i,o){var r=Function("","return this"+a(e)+";").call(this.model),l=Function("","return this"+a(e)+"["+t+"]."+n+";").call(this.model);l[i]=o,this.update(e,t,r[t])},this.childSet=function(e,t,n,i){var o=this;return Function("val","this"+a(e)+"["+t+"]."+n+" = val;").call(this.model,i),this.view_target.find('[data-ax-repeat="'+e+'"]').find('[data-ax-repeat-i="'+t+'"]').find('[data-ax-item-path="'+n+'"]').each(function(){o.set_els_value(this,this.tagName.toLowerCase(),(this.type||"").toLowerCase(),i,e+"["+t+"]."+n)}),this},this.onUpdate=function(e,t){return this.update_trigger[e]=t,this},this._binding=function(e){var t=this;this.view_target.find("[data-ax-path]").each(function(){var e,n=$(this),i=n.attr("data-ax-path"),o=(this.type||"").toLowerCase();try{e=Function("","return this"+a(i)+";").call(t.model)}catch(r){t.onerror&&t.onerror("not found target [model."+a(i)+"]")}t.set_els_value(this,this.tagName.toLowerCase(),o,e||"",i)}),"undefined"==typeof e?this.view_target.find("[data-ax-repeat]").each(function(){var e=$(this),n=e.attr("data-ax-repeat"),i=e.attr("data-ax-repeat-idx");"undefined"==typeof t.tmpl[n]&&(t.tmpl[n]={}),"undefined"!=typeof i?t.tmpl[n][i]={container:e,content:e.find("script").html()}:t.tmpl[n][0]={container:e,content:e.find("script").html()},e.empty()}):this.view_target.find("[data-ax-repeat]").each(function(){var e=$(this);e.empty().show()}),this.view_target.find("[data-ax-path]").unbind("change.axbinder").bind("change.axbinder",function(e){var n,o,r=!1,l=[],s=$(e.target),d=s.attr("data-ax-path"),c=Function("","return this"+a(d)+";").call(t.model),u=(this.type||"").toLowerCase(),h=i(c),p=!0;if("object"!=h&&"array"!=h||(p=!1),"checkbox"==u){if(t.view_target.find('[data-ax-path="'+d+'"]').length>1){for("array"!=i(c)&&(c="undefined"==typeof c||""==c?[]:[].concat(c)),n=c.length,r=!1,o=this.checked;n--;)c[n]==this.value&&(r=!0);if(o)r||c.push(this.value);else{for(n=c.length;n--;)c[n]==this.value||l.push(c[n]);c=l}}else c=this.checked?this.value:"";Function("val","this"+a(d)+" = val;").call(t.model,c),t.change(d,{el:this,jquery:s,tagname:this.tagName.toLowerCase(),value:c})}else p&&(Function("val","this"+a(d)+" = val;").call(t.model,this.value),t.change(d,{el:this,jquery:s,tagname:this.tagName.toLowerCase(),value:this.value}));s.data("changedTime",(new Date).getTime())});var n;for(var o in t.tmpl){for(var r in t.tmpl[o])this.print_tmpl(o,t.tmpl[o][r],"isInit");if(n=this.update_trigger[o]){var l={repeat_path:o,tmpl:t.tmpl[o],list:Function("","return this."+o+";").call(this.model)};n.call(l,l)}}},this.set_els_value=function(e,t,n,i,o,r){i="undefined"==typeof i?[]:[].concat(i);var l,s;if("input"==t)if("checkbox"==n||"radio"==n){s=i.length;var d=!1;try{if(s>0)for(;s--;)"undefined"!=typeof i[s]&&e.value===i[s].toString()&&(d=!0)}catch(c){console.log(c)}e.checked=d}else e.value=i.join("");else if("select"==t){l=e.options,s=l.length;for(var u,h=!1;s--;){for(u=i.length;u--;)if("undefined"!=typeof i[u]&&l[s].value===i[u].toString()){l[s].selected=!0,h=!0;break}if(h)break}h||(l[0]?(l[0].selected=!0,Function("val","this"+a(o)+" = val;").call(this.model,l[0].value)):Function("val","this"+a(o)+" = val;").call(this.model,"")),window.AXSelect&&$("undefined"!=typeof i&&e).bindSelectSetValue(i[i.length-1])}else"textarea"==t?e.value=i.join("")||"":e.innerText?e.innerText=i.join(""):e.innerHTML=i.join("");return r&&this.change(o,{el:e,tagname:t,value:i}),this},this.change=function(e,t){var n=this.change_trigger[e];n&&n.call(t,t),"*"!=e&&this.change_trigger["*"]&&this.change_trigger["*"].call(t,t)},this.click=function(e,t){var n=this.click_trigger[e];n&&n.call(t,t)},this.sync_model=function(){},this.print_tmpl=function(e,t,n){var o=Function("","return this"+a(e)+";").call(this.model);if(o&&"array"==i(o))for(var r=0,l=o.length;r<l;r++){var s=o[r];if(jQuery.isPlainObject(s)?(s["@i"]=r,s["@r"]=r,0===r&&(s["@first"]=!0)):(s={"@i":r,"@value":s},0===r&&(s["@first"]=!0),console.log(s)),!s.__DELETED__){var d=$(ax5.mustache.render(t.content,s));d.attr("data-ax-repeat-path",e),d.attr("data-ax-repeat-i",s["@i"]),this.bind_event_tmpl(d,e),t.container.append(d)}}},this.bind_event_tmpl=function(e,t){var n=this,r=e.attr("data-ax-repeat-i"),l=Function("","return this"+a(t)+";").call(this.model);e.find("[data-ax-repeat-click]").unbind("click.axbinder").bind("click.axbinder",function(e){var i=ax5.util.findParentNode(e.target,function(e){return e.getAttribute("data-ax-repeat-click")});if(i){var o=$(i),a=o.attr("data-ax-repeat-click"),s=(o.attr("data-ax-repeat-path"),{el:i,jquery:o,tagname:i.tagName.toLowerCase(),value:a,repeat_path:t,item:l[r],item_index:r,item_path:t+"["+r+"]"});n.click(t,s)}}),e.find("[data-ax-item-path]").each(function(){var e,i=$(this),a=i.attr("data-ax-item-path"),l=o(t,r,a),s=(this.type||"").toLowerCase();try{e=Function("","return this."+l+";").call(n.model)}catch(d){n.onerror&&n.onerror("not found target [model."+l+"]")}n.set_els_value(this,this.tagName.toLowerCase(),s,e||"",l)}),e.find("[data-ax-item-path]").unbind("change.axbinder").bind("change.axbinder",function(a){var l,s,d=!1,c=[],u=(this.type||"").toLowerCase(),h=$(a.target),p=h.attr("data-ax-item-path"),f=o(t,r,p),g=Function("","return this."+f+";").call(n.model),m=i(g),v=!0;if("object"!=m&&"array"!=m||(v=!1),"checkbox"==u){if(e.find('[data-ax-item-path="'+p+'"]').length>1){for("array"!=i(g)&&(g="undefined"==typeof g||""==g?[]:[].concat(g)),l=g.length,d=!1,s=this.checked;l--;)g[l]==this.value&&(d=!0);if(s)d||g.push(this.value);else{for(l=g.length;l--;)g[l]==this.value||c.push(g[l]);g=c}}else g=this.checked?this.value:"";Function("val","this."+f+" = val;").call(n.model,g),n.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:g})}else v&&(Function("val","this."+f+" = val;").call(n.model,this.value),n.change(f,{el:this,jquery:h,tagname:this.tagName.toLowerCase(),value:this.value}));h.data("changedTime",(new Date).getTime())}),e.find("[data-ax-item-path]").unbind("blur.axbinder").bind("blur.axbinder",function(e){var t=$(e.target);("undefined"==typeof t.data("changedTime")||t.data("changedTime")<(new Date).getTime()-10)&&t.trigger("change")})},this.focus=function(e){return this.view_target.find('[data-ax-path="'+e+'"]').focus(),this},this.validate=function(){var e=this,t=[];return this.view_target.find("[data-ax-path]").each(function(){var n=$(this),i=n.attr("data-ax-path"),o=n.attr("data-ax-validate");if(o){var r=Function("","return this"+a(i)+";").call(e.model);"undefined"==typeof r&&(r="");var l=r.toString(),s=!1;"required"==o&&""==l.trim()?s=!0:!/\D.?/g.test(o)&&l.trim().length<o.number()&&(s=!0),s&&t.push({type:o,dataPath:i,el:this,jquery:n,value:r})}}),this.view_target.find("[data-ax-repeat-path]").each(function(){var n=$(this),i=n.attr("data-ax-repeat-path"),o=n.attr("data-ax-repeat-i");n.find("[data-ax-validate]").each(function(){var n=$(this),r=n.attr("data-ax-validate"),l=n.attr("data-ax-item-path"),s=Function("","return this"+a(i)+"["+o+"]."+l+";").call(e.model);"undefined"==typeof s&&(s="");var d=s.toString();if(r){var c=!1;"required"==r&&""==d.trim()?c=!0:!/\D.?/g.test(r)&&d.trim().length<r.number()&&(c=!0),c&&t.push({type:r,dataPath:i,el:this,jquery:n,value:s})}})}),t.length>0?{error:t}:{}},this.main=function(){arguments&&t.isObject(arguments[0])&&this.setConfig(arguments[0])}.apply(this,arguments)};return e}())}(),function(){var e,t=ax5.ui,n=ax5.util;t.addClass({className:"autocomplete",version:"0.0.5"},function(){var t=function(){var t,i=this;this.instanceId=ax5.getGuid(),this.config={theme:"default",animateTime:250,removeIcon:"X",lang:{noSelected:"",noOptions:"no options",loading:"Now Processing"},columnKeys:{optionValue:"value",optionText:"text",optionSelected:"selected"}},this.queue=[],this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,this.openTimer=null,this.closeTimer=null,this.waitOptionsCallback=null,this.keyUpTimer=null,t=this.config;var o={18:"KEY_ALT",17:"KEY_CONTROL",46:"KEY_DELETE",40:"KEY_DOWN",35:"KEY_END",187:"KEY_EQUAL",36:"KEY_HOME",45:"KEY_INSERT",37:"KEY_LEFT",189:"KEY_MINUS",34:"KEY_PAGEDOWN",33:"KEY_PAGEUP",39:"KEY_RIGHT",16:"KEY_SHIFT",9:"KEY_TAB",38:"KEY_UP",91:"KEY_WINDOW"},a=function(e,t){return e&&e.onStateChanged?e.onStateChanged.call(t,t):this.onStateChanged&&this.onStateChanged.call(t,t),"changeValue"==t.state&&(e&&e.onChange?e.onChange.call(t,t):this.onChange&&this.onChange.call(t,t)),e=null,t=null,!0},r=function(){for(var e,t=this.queue.length;t--;){var i=this.queue[t];if(i.$display&&(e=Math.max(i.$select.outerWidth(),n.number(i.minWidth)),i.$display.css({"min-width":e}),i.reset&&i.$display.find(".addon-icon-reset").css({"line-height":this.queue[t].$display.height()+"px"}),i.multiple)){var o=function(){return n.number(i.$display.css("border-top-width"))+n.number(i.$display.css("border-bottom-width"))}.call(this);i.$target.height(""),i.$display.height("");var a=i.$displayTable.outerHeight();Math.abs(a-i.$target.height())>o&&(i.$target.css({height:a+o}),i.$display.css({height:a+o}))}}return t=null,e=null,this},l=function(e){if(!this.activeautocompleteOptionGroup)return this;var t=this.queue[this.activeautocompleteQueueIndex],n={},i={};e&&jQuery(document.body).append(this.activeautocompleteOptionGroup),n=t.$target.offset(),i={width:t.$target.outerWidth(),height:t.$target.outerHeight()},t.direction&&""!==t.direction&&"auto"!==t.direction||(t.direction="top"),e&&this.activeautocompleteOptionGroup.addClass("direction-"+t.direction),this.activeautocompleteOptionGroup.css(function(){return"top"==t.direction?{left:n.left,top:n.top+i.height+1,width:i.width}:"bottom"==t.direction?{left:n.left,top:n.top-this.activeautocompleteOptionGroup.outerHeight()-1,width:i.width}:void 0}.call(this))},s=function(e,t){if(!this.activeautocompleteOptionGroup)return this;
var i=this.queue[this.activeautocompleteQueueIndex],o="display";return(t=n.findParentNode(e.target,function(e){return e.getAttribute("data-option-value")?(o="optionItem",!0):i.$target.get(0)==e?(o="display",!0):void 0}))?("optionItem"===o&&(w.call(this,i.id,{optionIndex:{index:t.getAttribute("data-option-index")}},void 0,"optionItemClick"),n.selectRange(i.$displayLabel,"end"),i.multiple||this.close()),this):(this.close(),this)},d=function(t){if(t.keyCode==ax5.info.eventKeys.ESC)p.call(this,this.activeautocompleteQueueIndex),this.close();else if(t.which==ax5.info.eventKeys.RETURN){for(var n=[],i=this.queue[this.activeautocompleteQueueIndex],o=i.$displayLabel.get(0).childNodes,a=0,r=o.length;a<r;a++){var l=o[a];if(l.nodeType in e.util.nodeTypeProcessor){var s=e.util.nodeTypeProcessor[l.nodeType].call(this,this.activeautocompleteQueueIndex,l);"undefined"!=typeof s&&n.push(s)}}w.call(this,i.id,n,!0),h.call(this,this.activeautocompleteQueueIndex),i.multiple||this.close()}},c=function(t){var n=this.queue[t],i={};return i.id=n.id,i.theme=n.theme,i.size="ax5autocomplete-option-group-"+n.size,i.multiple=n.multiple,i.lang=n.lang,i.options=n.options,i.selected=n.selected,i.hasSelected=i.selected&&i.selected.length>0,i.removeIcon=n.removeIcon,e.tmpl.get.call(this,"label",i,n.columnKeys)+"&nbsp;"},u=function(t){var i,o=this.queue[t];if(!o.multiple&&o.selected&&o.selected.length>0&&(o.selected=[].concat(o.selected[o.selected.length-1])),o.selected.forEach(function(e,t){e["@index"]=t}),o.$select.html(e.tmpl.get.call(this,"formSelectOptions",{selected:o.selected},o.columnKeys)),o.$displayLabel.html(c.call(this,t)),o.$target.height(""),o.$display.height(""),o.$target.height()<(i=o.$displayTable.outerHeight())){var a=function(){return n.number(o.$display.css("border-top-width"))+n.number(o.$display.css("border-bottom-width"))}();o.$target.css({height:i+a}),o.$display.css({height:i+a})}},h=function(e){this.queue[e].$displayLabel.trigger("focus"),n.selectRange(this.queue[e].$displayLabel,"end")},p=function(e){this.queue[e].$displayLabel.trigger("blur")},f=function(t,i){if(this.activeautocompleteQueueIndex==-1)return this;var o=/[\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;i=i.replace(o,""),this.queue[t].waitOptions=!0,this.queue[t].onSearch.call({self:this,item:this.queue[t],searchWord:i},function(t){var o={},a=this.queue[this.activeautocompleteQueueIndex];return!!a&&(function(e,t){var i={};t.options.forEach(function(t,n){t["@index"]=n,t["@findex"]=n,i[t[e.columnKeys.optionValue]]=t}),n.isArray(e.selected)&&e.selected.forEach(function(n){i[n[e.columnKeys.optionValue]]&&(t.options[i[n[e.columnKeys.optionValue]]["@index"]][e.columnKeys.optionSelected]=!0)})}(a,t),a.options=t.options,r.call(this),o.id=a.id,o.theme=a.theme,o.size="ax5autocomplete-option-group-"+a.size,o.multiple=a.multiple,o.lang=a.lang,o.options=a.options,this.activeautocompleteOptionGroup.find('[data-els="content"]').html(jQuery(e.tmpl.get.call(this,"options",o,a.columnKeys))),void g.call(this,this.activeautocompleteQueueIndex,i))}.bind(this))},g=function(e,t){if(this.activeautocompleteQueueIndex==-1)return this;var n,i=[],o=-1,a=this.queue[e].options.length-1;if(""!=t){for(;a-o++;){if(n=this.queue[e].options[o],(""+n.text).toLowerCase()==t.toLowerCase()){i=[{"@findex":n["@findex"],optionsSort:0}];break}var r=(""+n.text).toLowerCase().search(t.toLowerCase());if(r>-1&&(i.push({"@findex":n["@findex"],optionsSort:r}),i.length>2))break;r=null}i.sort(function(e,t){return e.optionsSort-t.optionsSort})}i&&i.length>0?v.call(this,e,void 0,i[0]["@findex"]):m.call(this,e)},m=function(e){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover").removeAttr("data-option-selected"),this.queue[e].optionFocusIndex=-1},v=function(e,t,i){var o,a,r,l,s=this.queue[e];if(this.activeautocompleteOptionGroup&&s.options&&s.options.length>0){if("undefined"!=typeof i?o=i:(a=s.optionFocusIndex==-1?s.optionSelectedIndex||-1:s.optionFocusIndex,a==-1?o=0:(o=a+t,o<0?o=0:o>s.optionItemLength-1&&(o=s.optionItemLength-1))),s.optionFocusIndex=o,s.options[o]&&s.options[o].hide){if("undefined"==typeof t)return this;for(;s.options[o].hide;){if(o+=t,o<0){o=0;break}if(o>s.optionItemLength-1){o=s.optionItemLength-1;break}}}if("undefined"!=typeof o&&(this.activeautocompleteOptionGroup.find("[data-option-focus-index]").removeClass("hover"),r=this.activeautocompleteOptionGroup.find('[data-option-focus-index="'+o+'"]').addClass("hover"),l=this.activeautocompleteOptionGroup.find('[data-els="content"]'),r.get(0))){var d=r.outerHeight(),c=l.innerHeight(),u=l.scrollTop(),h=r.position().top+l.scrollTop();c+u<h+d?l.scrollTop(h+d-c):u>h&&l.scrollTop(h),"undefined"!=typeof t&&n.selectRange(s.$displayLabel,"end")}}},y=function(e){return e instanceof jQuery?e=e.data("data-ax5autocomplete-id"):n.isString(e)||(e=jQuery(e).data("data-ax5autocomplete-id")),n.isString(e)?n.search(this.queue,function(){return this.id==e}):void console.log(ax5.info.getError("ax5autocomplete","402","getQueIdx"))},x=function(e,t,n){return"undefined"==typeof n?!e.multiple||!t:n},b=function(e){this.queue[e].options.forEach(function(e){e.optgroup?e.options.forEach(function(e){e.selected=!1}):e.selected=!1})},w=function(){var e={selectedIndex:function(e,t,n,i){},removeSelectedIndex:function(e,t,n,i){for(var o=this.queue[e],a={},r=[],l=0,s=0;s<o.selected.length;s++)o.selected[s]["@index"]!=t.removeSelectedIndex.index&&(a={"@index":l,"@findex":l},a[o.columnKeys.optionValue]=o.selected[s][o.columnKeys.optionValue],a[o.columnKeys.optionText]=o.selected[s][o.columnKeys.optionText],r.push(a),l++);o.selected=r},optionIndex:function o(e,t,n,i){var a=this.queue[e],r={},o=a.selected.length,l=!0;r={"@index":o,"@findex":o},r[a.columnKeys.optionValue]=a.options[t.optionIndex.index][a.columnKeys.optionValue],r[a.columnKeys.optionText]=a.options[t.optionIndex.index][a.columnKeys.optionText];for(var s=0;s<a.selected.length;s++)a.selected[s][a.columnKeys.optionValue]==r[a.columnKeys.optionValue]&&(l=!1);l&&a.selected.push(r)},arr:function(t,o,a,r){o.forEach(function(o){if(n.isString(o)||n.isNumber(o))e.text.call(i,t,o,a,"justSetValue");else for(var r in e)if(o[r]){e[r].call(i,t,o,a,"justSetValue");break}})},value:function(e,i,o,a){var r,l=this.queue[e],s=n.search(l.options,function(){return this[l.columnKeys.optionValue]==i.value[l.columnKeys.optionValue]});if(s>-1)if(l.options[s][l.columnKeys.optionSelected]=x(l,l.options[s][l.columnKeys.optionSelected],o),l.options[s][l.columnKeys.optionSelected]){for(var d=!0,c=0;c<l.selected.length;c++)if(l.selected[c][t.columnKeys.optionValue]==l.options[s][t.columnKeys.optionValue]){d=!1;break}d&&(r={},r[l.columnKeys.optionValue]=l.options[s][l.columnKeys.optionValue],r[l.columnKeys.optionText]=l.options[s][l.columnKeys.optionText],l.selected.push(r))}else{for(var u=[],c=0;c<l.selected.length;c++)l.selected[c][t.columnKeys.optionValue]==l.options[s][t.columnKeys.optionValue]||(r={},r[l.columnKeys.optionValue]=l.selected[c][l.columnKeys.optionValue],r[l.columnKeys.optionText]=l.selected[c][l.columnKeys.optionText],u.push(r));l.selected=u}else{for(var d=!0,c=0;c<l.selected.length;c++)if(l.selected[c][t.columnKeys.optionValue]==i.value[t.columnKeys.optionValue]){d=!1;break}d&&(r={},r[l.columnKeys.optionValue]=i.value[t.columnKeys.optionValue],r[l.columnKeys.optionText]=i.value[t.columnKeys.optionText],l.selected.push(r))}},text:function(e,i,o,a){var r,l=this.queue[e],s=n.search(l.options,function(){return this[l.columnKeys.optionText]==i});if(s>-1)if(l.options[s][l.columnKeys.optionSelected]=x(l,l.options[s][l.columnKeys.optionSelected],o),l.options[s][l.columnKeys.optionSelected]){for(var d=!0,c=0;c<l.selected.length;c++)if(l.selected[c][t.columnKeys.optionText]==l.options[s][t.columnKeys.optionText]){d=!1;break}d&&(r={},r[l.columnKeys.optionValue]=l.options[s][l.columnKeys.optionValue],r[l.columnKeys.optionText]=l.options[s][l.columnKeys.optionText],l.selected.push(r))}else{for(var u=[],c=0;c<l.selected.length;c++)l.selected[c][t.columnKeys.optionText]==l.options[s][t.columnKeys.optionText]||(r={},r[l.columnKeys.optionValue]=l.selected[c][l.columnKeys.optionValue],r[l.columnKeys.optionText]=l.selected[c][l.columnKeys.optionText],u.push(r));l.selected=u}else{for(var d=!0,c=0;c<l.selected.length;c++)if(l.selected[c][t.columnKeys.optionText]==i){d=!1;break}d&&(r={},r[l.columnKeys.optionValue]=i,r[l.columnKeys.optionText]=i,l.selected.push(r))}},clear:function(e){b.call(this,e),m.call(this,e),this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.find("[data-option-index]").attr("data-option-Selected","false"),this.queue[e].optionSelectedIndex=-1}};return function(t,i,o,r){var s=n.isNumber(t)?t:y.call(this,t);if(s===-1)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if("undefined"==typeof i)throw"error not found value";if(n.isArray(i))e.clear.call(this,s),e.arr.call(this,s,this.queue[s].multiple||0==i.length?i:[i[i.length-1]],o);else if(n.isString(i)||n.isNumber(i))"undefined"==typeof i||null===i||this.queue[s].multiple||b.call(this,s),e.text.call(this,s,i,o);else if(null===i)e.clear.call(this,s);else{this.queue[s].multiple||b.call(this,s);for(var d in e)if(i[d]){e[d].call(this,s,i,o);break}}return u.call(this,s),l.call(this),"undefined"!=typeof i&&r&&!r.noStateChange&&a.call(this,this.queue[s],{self:this,item:this.queue[s],state:"changeValue",value:this.queue[s].selected}),t=null,this}}();this.init=function(){this.onStateChanged=t.onStateChanged,this.onChange=t.onChange,jQuery(window).bind("resize.ax5autocomplete-display-"+this.instanceId,function(){r.call(this)}.bind(this))},this.bind=function(a){var l,s=function(){var t=n.debounce(function(t){if(this.activeautocompleteQueueIndex==-1)return this;for(var o=[],a="",r=!1,l=this.queue[t],s=l.$displayLabel.get(0).childNodes,d=0,c=s.length;d<c;d++){var u=s[d];if(u.nodeType in e.util.nodeTypeProcessor){var h=e.util.nodeTypeProcessor[u.nodeType].call(this,this.activeautocompleteQueueIndex,u,!0);"undefined"==typeof h||(n.isString(h)?a=h:(h.removeSelectedIndex&&(r=!0),o.push(h)))}}0==s.length?w.call(this,l.id,null,void 0,"internal"):""!=a?f.call(i,t,a):r&&(w.call(this,l.id,o,void 0,"internal"),n.selectRange(l.$displayLabel,"end"),i.close())},150),a=function(t){for(var i=[],o=this.queue[t],a=o.$displayLabel.get(0).childNodes,r=0,l=a.length;r<l;r++){var s=a[r];if(s.nodeType in e.util.nodeTypeProcessor){var d=e.util.nodeTypeProcessor[s.nodeType].call(this,t,s,!0);"undefined"==typeof d||n.isString(d)||i.push(d)}}w.call(this,o.id,i,void 0,"blurLabel")},l={click:function(e,t){var o,a=n.findParentNode(t.target,function(e){return e.getAttribute("data-ax5autocomplete-remove")?(o="optionItemRemove",!0):e.getAttribute("data-selected-clear")?(o="clear",!0):void 0});if(a){if("optionItemRemove"===o){var r=a.getAttribute("data-ax5autocomplete-remove-index");return this.queue[e].selected.splice(r,1),u.call(this,e),h.call(this,e),n.stopEvent(t),this}"clear"===o&&w.call(this,e,{clear:!0})}else i.activeautocompleteQueueIndex==e?this.queue[e].optionFocusIndex==-1&&i.close():""==this.queue[e].$displayLabel.text().replace(/^\W*|\W*$/g,"")&&(this.queue[e].$displayLabel.html(c.call(this,e)),h.call(this,e))},keyUp:function(e,a){return a.which==ax5.info.eventKeys.ESC&&i.activeautocompleteQueueIndex===-1?(n.stopEvent(a),this):(i.activeautocompleteQueueIndex!=e&&(i.open(e),n.stopEvent(a)),void(o[a.which]?n.stopEvent(a):t.call(this,e)))},keyDown:function(e,t){t.which==ax5.info.eventKeys.ESC?n.stopEvent(t):t.which==ax5.info.eventKeys.RETURN?n.stopEvent(t):t.which==ax5.info.eventKeys.DOWN?(v.call(this,e,1),n.stopEvent(t)):t.which==ax5.info.eventKeys.UP&&(v.call(this,e,-1),n.stopEvent(t))},focus:function(e,t){n.selectRange(this.queue[e].$displayLabel,"end")},blur:function(e,t){a.call(this,e),n.stopEvent(t)},selectChange:function(e,t){w.call(this,e,{value:this.queue[e].$select.val()},!0)}};return function(t){var n=this.queue[t],i={};return n.$display?(n.$displayLabel.html(c.call(this,t)),r.call(this)):(i.instanceId=this.instanceId,i.id=n.id,i.name=n.name,i.theme=n.theme,i.tabIndex=n.tabIndex,i.multiple=n.multiple,i.reset=n.reset,i.label=c.call(this,t),i.formSize=function(){return n.size?"input-"+n.size:""}(),n.$display=jQuery(e.tmpl.get.call(this,"autocompleteDisplay",i,n.columnKeys)),n.$displayTable=n.$display.find('[data-els="display-table"]'),n.$displayLabel=n.$display.find('[data-ax5autocomplete-display="label"]'),n.$target.find("select").get(0)?(n.$select=n.$target.find("select"),n.$select.attr("tabindex","-1").attr("class","form-control "+i.formSize),i.name&&n.$select.attr("name","name"),n.$select.attr("multiple","multiple")):(n.$select=jQuery(e.tmpl.get.call(this,"formSelect",i,n.columnKeys)),n.$target.append(n.$select)),n.$target.append(n.$display),r.call(this)),n.$display.unbind("click.ax5autocomplete").bind("click.ax5autocomplete",l.click.bind(this,t)),n.$displayLabel.unbind("focus.ax5autocomplete").bind("focus.ax5autocomplete",l.focus.bind(this,t)).unbind("blur.ax5autocomplete").bind("blur.ax5autocomplete",l.blur.bind(this,t)).unbind("keyup.ax5autocomplete").bind("keyup.ax5autocomplete",l.keyUp.bind(this,t)).unbind("keydown.ax5autocomplete").bind("keydown.ax5autocomplete",l.keyDown.bind(this,t)),n.$select.unbind("change.ax5autocomplete").bind("change.ax5autocomplete",l.selectChange.bind(this,t)),i=null,n=null,t=null,this}}(),d={};return a=jQuery.extend(!0,d,t,a),a.target?(a.$target=jQuery(a.target),a.id||(a.id=a.$target.data("data-ax5autocomplete-id")),a.id||(a.id="ax5autocomplete-"+ax5.getGuid(),a.$target.data("data-ax5autocomplete-id",a.id)),a.name=a.$target.attr("data-ax5autocomplete"),a.options=[],a.selected=[],function(e){n.isObject(e)&&!e.error&&(a=jQuery.extend(!0,a,e))}(n.parseJson(a.$target.attr("data-ax5autocomplete-config"),!0)),l=n.search(this.queue,function(){return this.id==a.id}),l===-1?(this.queue.push(a),s.call(this,this.queue.length-1)):(this.queue[l]=jQuery.extend(!0,{},this.queue[l],a),s.call(this,l)),d=null,l=null,this):(console.log(ax5.info.getError("ax5autocomplete","401","bind")),this)},this.open=function(){return function(i,o){this.waitOptionsCallback=null;var r,c,u=n.isNumber(i)?i:y.call(this,i),h=this.queue[u],p={};return h.$display.attr("disabled")?this:(this.openTimer&&clearTimeout(this.openTimer),this.activeautocompleteOptionGroup?this.activeautocompleteQueueIndex==u?this:o>2?this:(this.close(),this.openTimer=setTimeout(function(){this.open(u,(o||0)+1)}.bind(this),t.animateTime),this):(h.optionFocusIndex=-1,h.selected&&h.selected.length>0&&(h.optionSelectedIndex=h.selected[0]["@findex"]),p.id=h.id,p.theme=h.theme,p.size="ax5autocomplete-option-group-"+h.size,p.multiple=h.multiple,p.lang=h.lang,h.$display.attr("data-autocomplete-option-group-opened","true"),p.waitOptions=!0,p.options=[],this.activeautocompleteOptionGroup=jQuery(e.tmpl.get.call(this,"optionGroup",p,h.columnKeys)),this.activeautocompleteOptionGroup.find('[data-els="content"]').html(jQuery(e.tmpl.get.call(this,"options",p,h.columnKeys))),this.activeautocompleteQueueIndex=u,l.call(this,"append"),jQuery(window).bind("resize.ax5autocomplete-"+this.instanceId,function(){l.call(this)}.bind(this)),h.selected&&h.selected.length>0&&(c=this.activeautocompleteOptionGroup.find('[data-option-index="'+h.selected[0]["@index"]+'"]'),c.get(0)&&(r=c.position().top-this.activeautocompleteOptionGroup.height()/3,this.activeautocompleteOptionGroup.find('[data-els="content"]').stop().animate({scrollTop:r},h.animateTime,"swing",function(){}))),jQuery(window).bind("keyup.ax5autocomplete-"+this.instanceId,function(e){e=e||window.event,d.call(this,e),n.stopEvent(e)}.bind(this)),jQuery(window).bind("click.ax5autocomplete-"+this.instanceId,function(e){e=e||window.event,s.call(this,e),n.stopEvent(e)}.bind(this)),a.call(this,h,{self:this,state:"open",item:h}),p=null,r=null,c=null,this))}}(),this.setValue=function(e,t){var i=n.isNumber(e)?e:y.call(this,e);if(i===-1)return void console.log(ax5.info.getError("ax5autocomplete","402","val"));if(this.queue[i].selected=[],b.call(this,i),n.isArray(t)){var o=n.map(t,function(){return{value:this}});w.call(this,i,o,!0,{noStateChange:!0})}else n.isObject(t)&&(console.log(t),w.call(this,i,{value:t},!0,{noStateChange:!0}));return p.call(this,i),this},this.setText=function(e,t){var i=n.isNumber(e)?e:y.call(this,e);return i===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(this.queue[i].selected=[],b.call(this,i),w.call(this,i,t,!0,{noStateChange:!0}),p.call(this,i),this)},this.getSelectedOption=function(e){var t=n.isNumber(e)?e:y.call(this,e);return t===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):n.deepCopy(this.queue[t].selected)},this.close=function(e){return this.closeTimer&&clearTimeout(this.closeTimer),this.activeautocompleteOptionGroup?(e=this.queue[this.activeautocompleteQueueIndex],e.optionFocusIndex=-1,e.$display.removeAttr("data-autocomplete-option-group-opened").trigger("focus"),this.activeautocompleteOptionGroup.addClass("destroy"),jQuery(window).unbind("resize.ax5autocomplete-"+this.instanceId).unbind("click.ax5autocomplete-"+this.instanceId).unbind("keyup.ax5autocomplete-"+this.instanceId),this.closeTimer=setTimeout(function(){this.activeautocompleteOptionGroup&&this.activeautocompleteOptionGroup.remove(),this.activeautocompleteOptionGroup=null,this.activeautocompleteQueueIndex=-1,a.call(this,e,{self:this,state:"close"})}.bind(this),t.animateTime),this.waitOptionsCallback=null,this):this},this.blur=function(e){var t=n.isNumber(e)?e:y.call(this,e);return t===-1?void console.log(ax5.info.getError("ax5autocomplete","402","val")):(p.call(this,t),this)},this.enable=function(e){var t=y.call(this,e);return this.queue[t].$display.removeAttr("disabled"),this.queue[t].$input.removeAttr("disabled"),a.call(this,this.queue[t],{self:this,state:"enable"}),this},this.disable=function(e){var t=y.call(this,e);return this.queue[t].$display.attr("disabled","disabled"),this.queue[t].$input.attr("disabled","disabled"),a.call(this,this.queue[t],{self:this,state:"disable"}),this},this.main=function(){arguments&&n.isObject(arguments[0])?this.setConfig(arguments[0]):this.init()}.apply(this,arguments)};return t}()),e=ax5.ui.autocomplete}(),ax5.ui.autocomplete_instance=new ax5.ui.autocomplete,jQuery.fn.ax5autocomplete=function(){return function(e){if(ax5.util.isString(arguments[0])){var t=arguments[0];switch(t){case"open":return ax5.ui.autocomplete_instance.open(this);case"close":return ax5.ui.autocomplete_instance.close(this);case"setValue":return ax5.ui.autocomplete_instance.setValue(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"setText":return ax5.ui.autocomplete_instance.setText(this,arguments[1],arguments[2],arguments[3],arguments[4]||"justSetValue");case"getSelectedOption":return ax5.ui.autocomplete_instance.getSelectedOption(this);case"enable":return ax5.ui.autocomplete_instance.enable(this);case"disable":return ax5.ui.autocomplete_instance.disable(this);case"blur":return ax5.ui.autocomplete_instance.blur(this);default:return this}}else"undefined"==typeof e&&(e={}),jQuery.each(this,function(){var t={target:this};e=jQuery.extend({},e,t),ax5.ui.autocomplete_instance.bind(e)});return this}}(),function(){var e=ax5.ui.autocomplete,t=(ax5.util,function(e){return'\n<div class="ax5autocomplete-option-group {{theme}} {{size}}" data-ax5autocomplete-option-group="{{id}}">\n    <div class="ax-autocomplete-body">\n        <div class="ax-autocomplete-option-group-content" data-els="content"></div>\n    </div>\n    <div class="ax-autocomplete-arrow"></div> \n</div>\n'}),n=function(e){return'\n<div class="form-control {{formSize}} ax5autocomplete-display {{theme}}" \ndata-ax5autocomplete-display="{{id}}" data-ax5autocomplete-instance="{{instanceId}}">\n    <div class="ax5autocomplete-display-table" data-els="display-table">\n        <div data-ax5autocomplete-display="label-holder"> \n        <a {{^tabIndex}}href="#ax5autocomplete-{{id}}" {{/tabIndex}}{{#tabIndex}}tabindex="{{tabIndex}}" {{/tabIndex}}\n        data-ax5autocomplete-display="label"\n        contentEditable="true"\n        spellcheck="false">{{{label}}}</a>\n        </div>\n        <div data-ax5autocomplete-display="addon"> \n            {{#multiple}}{{#reset}}\n            <span class="addon-icon-reset" data-selected-clear="true">{{{.}}}</span>\n            {{/reset}}{{/multiple}}\n        </div>\n    </div>\n</a>\n'},i=function(e){return'\n<select tabindex="-1" class="form-control {{formSize}}" name="{{name}}" multiple="multiple"></select>\n'},o=function(e){return'\n{{#selected}}\n<option value="{{'+e.optionValue+'}}" selected="true">{{'+e.optionText+"}}</option>\n{{/selected}}\n"},a=function(e){return'\n{{#waitOptions}}\n    <div class="ax-autocomplete-option-item">\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">\n                    {{{lang.loading}}}\n                </span>\n            </div>\n        </div>\n{{/waitOptions}}\n{{^waitOptions}}\n    {{#options}}\n        {{^hide}}\n        <div class="ax-autocomplete-option-item" data-option-focus-index="{{@findex}}" data-option-index="{{@index}}" data-option-value="{{'+e.optionValue+'}}" {{#'+e.optionSelected+'}}data-option-selected="true"{{/'+e.optionSelected+'}}>\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">{{'+e.optionText+'}}</span>\n            </div>\n        </div>\n        {{/hide}}\n    {{/options}}\n    {{^options}}\n        <div class="ax-autocomplete-option-item">\n            <div class="ax-autocomplete-option-item-holder">\n                <span class="ax-autocomplete-option-item-cell ax-autocomplete-option-item-label">\n                    {{{lang.noOptions}}}\n                </span>\n            </div>\n        </div>\n    {{/options}}\n{{/waitOptions}}\n'},r=function(e){return'{{#selected}}<div tabindex="-1" data-ax5autocomplete-selected-label="{{@i}}" data-ax5autocomplete-selected-text="{{text}}"><div data-ax5autocomplete-remove="true" data-ax5autocomplete-remove-index="{{@i}}">{{{removeIcon}}}</div><span>{{text}}</span></div>{{/selected}}'};e.tmpl={autocompleteDisplay:n,formSelect:i,formSelectOptions:o,optionGroup:t,options:a,label:r,get:function(t,n,i){return ax5.mustache.render(e.tmpl[t].call(this,i),n)}}}(),function(){var e=ax5.ui.autocomplete,t=(ax5.util,{1:function(e,t,n){var i=this.config,o=t;$(t).find("span").get(0)&&(o=$(t).find("span").get(0));var a,r,l=(o.textContent||o.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,""),s=this.queue[e];if(s.selected&&s.selected.length>0)return t.getAttribute("data-ax5autocomplete-selected-text")==l?(a=t.getAttribute("data-ax5autocomplete-selected-label"),r=s.selected[a],{selectedIndex:{index:r["@index"],value:r[i.columnKeys.optionValue]}}):(a=t.getAttribute("data-ax5autocomplete-selected-label"),r=s.selected[a],{removeSelectedIndex:{index:r["@index"],value:r[i.columnKeys.optionValue]}})},3:function(e,t,n){var i=(this.config,(t.textContent||t.innerText).replace(/^[\s\r\n\t]*|[\s\r\n\t]*$/g,"")),o=this.queue[e];if(""!=i){if(n)return i;var a;return o.optionFocusIndex>-1&&(a=this.activeautocompleteOptionGroup.find('[data-option-focus-index="'+o.optionFocusIndex+'"]')),o.optionFocusIndex>-1&&a.get(0)&&a.attr("data-option-value")?{optionIndex:{gindex:a.attr("data-option-group-index"),index:a.attr("data-option-index")}}:o.editable?i:void 0}}});e.util={nodeTypeProcessor:t}}();